---
title: "지연 콘텐츠 로드(WCF Data Services)"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework-oob
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, deferred content
- WCF Data Services, loading data
ms.assetid: 32f9b588-c832-44c4-a7e0-fcce635df59a
caps.latest.revision: "2"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 599b420dee2e1d19c85a078ac358a9249ca055ed
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 12/02/2017
---
# <a name="loading-deferred-content-wcf-data-services"></a><span data-ttu-id="4ef12-102">지연 콘텐츠 로드(WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="4ef12-102">Loading Deferred Content (WCF Data Services)</span></span>
<span data-ttu-id="4ef12-103">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]는 기본적으로 쿼리에서 반환되는 데이터 양을 제한합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-103">By default, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] limits the amount of data that a query returns.</span></span> <span data-ttu-id="4ef12-104">그러나 필요한 경우 데이터 서비스에서 관련 엔터티, 페이징 응답 데이터 및 이진 데이터 스트림을 포함한 추가 데이터를 명시적으로 로드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-104">However, you can explicitly load additional data, including related entities, paged response data, and binary data streams, from the data service when it is needed.</span></span> <span data-ttu-id="4ef12-105">이 항목에서는 이러한 지연된 콘텐츠를 응용 프로그램에 로드하는 방법을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-105">This topic describes how to load such deferred content into your application.</span></span>  
  
## <a name="related-entities"></a><span data-ttu-id="4ef12-106">관련 엔터티</span><span class="sxs-lookup"><span data-stu-id="4ef12-106">Related Entities</span></span>  
 <span data-ttu-id="4ef12-107">쿼리를 실행하면 주소가 지정된 엔터티 집합의 엔터티만 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-107">When you execute a query, only entities in the addressed entity set are returned.</span></span> <span data-ttu-id="4ef12-108">예를 들어, Northwind 데이터 서비스에 대한 쿼리가 `Customers` 엔터티를 반환하는 경우 `Orders` 및 `Customers` 간에 관계가 있어도 기본적으로 관련 `Orders` 엔터티가 반환되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-108">For example, when a query against the Northwind data service returns `Customers` entities, by default the related `Orders` entities are not returned, even though there is a relationship between `Customers` and `Orders`.</span></span> <span data-ttu-id="4ef12-109">또한 데이터 서비스에서 페이징을 사용하도록 설정한 경우 서비스에서 이후 데이터 페이지를 명시적으로 로드해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-109">Also, when paging is enabled in the data service, you must explicitly load subsequent data pages from the service.</span></span> <span data-ttu-id="4ef12-110">관련 엔터티를 로드하는 방법에는 다음 두 가지가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-110">There are two ways to load related entities:</span></span>  
  
-   <span data-ttu-id="4ef12-111">**즉시 로드**: 사용할 수 있습니다는 `$expand` 요청한 쿼리에 쿼리 옵션을 쿼리에 연결 된 엔터티에 의해 관련 된 엔터티를 반환 하도록 요청할 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-111">**Eager loading**: You can use the `$expand` query option to request that the query return entities that are related by an association to the entity set that the query requested.</span></span> <span data-ttu-id="4ef12-112">데이터 서비스에 전송되는 쿼리에 <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> 옵션을 추가하려면 <xref:System.Data.Services.Client.DataServiceQuery%601>의 `$expand` 메서드를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-112">Use the <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> method on the <xref:System.Data.Services.Client.DataServiceQuery%601> to add the `$expand` option to the query that is sent to the data service.</span></span> <span data-ttu-id="4ef12-113">다음 예제와 같이 관련 엔터티 집합을 쉼표로 구분하여 여러 개 요청할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-113">You can request multiple related entity sets by separating them by a comma, as in the following example.</span></span> <span data-ttu-id="4ef12-114">쿼리에서 요청한 모든 엔터티가 하나의 응답으로 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-114">All entities requested by the query are returned in a single response.</span></span> <span data-ttu-id="4ef12-115">다음 예제에서는 `Order_Details` 엔터티 집합과 함께 `Customers` 및 `Orders`를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-115">The following example returns `Order_Details` and `Customers` together with the `Orders` entity set:</span></span>  
  
     [!code-csharp[Astoria Northwind Client#ExpandOrderDetailsSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#expandorderdetailsspecific)]
     [!code-vb[Astoria Northwind Client#ExpandOrderDetailsSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#expandorderdetailsspecific)]  
  
     [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]<span data-ttu-id="4ef12-116">에서는 `$expand` 쿼리 옵션을 사용하여 단일 쿼리에 포함할 수 있는 엔터티 집합의 수를 12개로 제한합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-116"> limits to 12 the number of entity sets that can be included in a single query by using the `$expand` query option.</span></span>  
  
-   <span data-ttu-id="4ef12-117">**명시적 로드**: 호출할 수 있습니다는 <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> 메서드를는 <xref:System.Data.Services.Client.DataServiceContext> 인스턴스를 명시적으로 관련된 엔터티를 로드 합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-117">**Explicit loading**: You can call the <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance to explicitly load related entities.</span></span> <span data-ttu-id="4ef12-118"><xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> 메서드를 호출할 때마다 데이터 서비스에 대해 별도의 요청이 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-118">Each call to the <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> method creates a separate request to the data service.</span></span> <span data-ttu-id="4ef12-119">다음 예제에서는 `Order_Details` 엔터티에 대한 `Orders`를 명시적으로 로드합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-119">The following example explicitly loads `Order_Details` for an `Orders` entity:</span></span>  
  
     [!code-csharp[Astoria Northwind Client#LoadRelatedOrderDetailsSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#loadrelatedorderdetailsspecific)]
     [!code-vb[Astoria Northwind Client#LoadRelatedOrderDetailsSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#loadrelatedorderdetailsspecific)]  
  
 <span data-ttu-id="4ef12-120">사용할 옵션을 고려할 때는 데이터 서비스에 대한 요청 수와 하나의 응답으로 반환되는 데이터 양이 서로 상쇄되는 관계임을 염두에 두어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-120">When you consider which option to use, realize that there is a tradeoff between the number of requests to the data service and the amount of data that is returned in a single response.</span></span> <span data-ttu-id="4ef12-121">응용 프로그램에 연결된 개체가 필요하지만 이러한 개체의 명시적 검색 요청에서 추가적인 지연이 발생하는 것을 피하려는 경우 즉시 로드를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-121">Use eager loading when your application requires associated objects and you want to avoid the added latency of additional requests to explicitly retrieve them.</span></span> <span data-ttu-id="4ef12-122">그러나 응용 프로그램에 특정 관련 엔터티 인스턴스에 대한 데이터만 필요한 경우 <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> 메서드를 호출하여 이러한 엔터티를 명시적으로 로드하는 것을 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-122">However, if there are cases when the application only needs the data for specific related entity instances, you should consider explicitly loading those entities by calling the <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> method.</span></span> <span data-ttu-id="4ef12-123">자세한 내용은 참조 [하는 방법: 관련 엔터티 로드](../../../../docs/framework/data/wcf/how-to-load-related-entities-wcf-data-services.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-123">For more information, see [How to: Load Related Entities](../../../../docs/framework/data/wcf/how-to-load-related-entities-wcf-data-services.md).</span></span>  
  
## <a name="paged-content"></a><span data-ttu-id="4ef12-124">페이징 콘텐츠</span><span class="sxs-lookup"><span data-stu-id="4ef12-124">Paged Content</span></span>  
 <span data-ttu-id="4ef12-125">데이터 서비스에서 페이징을 사용하도록 설정한 경우 데이터 서비스가 반환하는 피드의 항목 수는 데이터 서비스의 구성에 의해 제한됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-125">When paging is enabled in the data service, the number of entries in the feed that the data service returns is limited by the configuration of the data service.</span></span> <span data-ttu-id="4ef12-126">페이지 제한은 각 엔터티 집합에 대해 별도로 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-126">Page limits can be set separately for each entity set.</span></span> <span data-ttu-id="4ef12-127">자세한 내용은 참조 [데이터 서비스 구성](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-127">For more information, see [Configuring the Data Service](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md).</span></span> <span data-ttu-id="4ef12-128">페이징을 사용하도록 설정하면 피드의 최종 항목에 다음 데이터 페이지에 대한 링크가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-128">When paging is enabled, the final entry in the feed contains a link to the next page of data.</span></span> <span data-ttu-id="4ef12-129">이 링크는 <xref:System.Data.Services.Client.DataServiceQueryContinuation%601> 개체에 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-129">This link is contained in a <xref:System.Data.Services.Client.DataServiceQueryContinuation%601> object.</span></span> <span data-ttu-id="4ef12-130"><xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A>를 실행할 때 반환되는 <xref:System.Data.Services.Client.QueryOperationResponse%601>의 <xref:System.Data.Services.Client.DataServiceQuery%601> 메서드를 호출하여 다음 데이터 페이지의 URI를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-130">You obtain the URI to the next page of data by calling the <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> method on the <xref:System.Data.Services.Client.QueryOperationResponse%601> returned when the <xref:System.Data.Services.Client.DataServiceQuery%601> is executed.</span></span> <span data-ttu-id="4ef12-131">반환된 <xref:System.Data.Services.Client.DataServiceQueryContinuation%601> 개체는 다음 결과 페이지를 로드하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-131">The returned <xref:System.Data.Services.Client.DataServiceQueryContinuation%601> object is then used to load the next page of results.</span></span> <span data-ttu-id="4ef12-132"><xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> 메서드를 호출하기 전에 쿼리 결과를 열거해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-132">You must enumerate the query result before you call the <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> method.</span></span> <span data-ttu-id="4ef12-133">`do…while` 루프를 사용하여 쿼리 결과를 먼저 열거한 후 다음 `non-null` 링크 값을 확인하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-133">Consider using a `do…while` loop to first enumerate the query result and then check for a `non-null` next link value.</span></span> <span data-ttu-id="4ef12-134"><xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> 메서드에서 `null`(Visual Basic에서는 `Nothing`)을 반환하면 원래 쿼리에 대한 추가 결과 페이지가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-134">When the <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> method returns `null` (`Nothing` in Visual Basic), there are no additional result pages for the original query.</span></span> <span data-ttu-id="4ef12-135">다음 예제에서는 Northwind 샘플 데이터 서비스에서 페이징 고객 데이터를 로드하는 `do…while` 루프를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-135">The following example shows a `do…while` loop that loads paged customer data from the Northwind sample data service.</span></span>  
  
 [!code-csharp[Astoria Northwind Client#LoadNextLink](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#loadnextlink)]
 [!code-vb[Astoria Northwind Client#LoadNextLink](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#loadnextlink)]  
  
 <span data-ttu-id="4ef12-136">쿼리에서 관련 엔터티가 요청된 엔터티 집합과 함께 단일 응답으로 반환되도록 요청하는 경우 페이징 제한이 응답에 인라인으로 포함된 중첩된 피드에 영향을 줄 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-136">When a query requests that related entities are returned in a single response together with the requested entity set, paging limits may affect nested feeds that are included inline with the response.</span></span> <span data-ttu-id="4ef12-137">예를 들어, Northwind 샘플 데이터 서비스에 `Customers` 엔터티 집합에 대한 페이징 제한이 설정되어 있는 경우 Northwind 샘플 데이터 서비스를 정의하는 Northwind.svc.cs 파일에서 다음 예제와 같이 관련 `Orders` 엔터티 집합에 대해 독립적인 페이징 제한을 설정할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-137">For example, when a paging limit is set in the Northwind sample data service for the `Customers` entity set, an independent paging limit can also be set for the related `Orders` entity set, as in the following example from the Northwind.svc.cs file that defines the Northwind sample data service.</span></span>  
  
 [!code-csharp[Astoria Northwind Service#DataServiceConfigPaging](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind service/cs/northwind.svc.cs#dataserviceconfigpaging)]
 [!code-vb[Astoria Northwind Service#DataServiceConfigPaging](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind service/vb/northwind.svc.vb#dataserviceconfigpaging)]  
  
 <span data-ttu-id="4ef12-138">이 경우 최상위 `Customers`와 중첩된 `Orders` 엔터티 피드에 대해 모두 페이징을 구현해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-138">In this case, you must implement paging for both the top-level `Customers` and the nested `Orders` entity feeds.</span></span> <span data-ttu-id="4ef12-139">다음 예제에서는 선택한 `while` 엔터티와 관련된 `Orders` 엔터티의 페이지를 로드하는 데 사용되는 `Customers` 루프를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-139">The following example shows the `while` loop used to load pages of `Orders` entities related to a selected `Customers` entity.</span></span>  
  
 [!code-csharp[Astoria Northwind Client#LoadNextOrdersLink](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#loadnextorderslink)]
 [!code-vb[Astoria Northwind Client#LoadNextOrdersLink](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#loadnextorderslink)]  
  
 <span data-ttu-id="4ef12-140">자세한 내용은 참조 [하는 방법: 페이징 결과 로드](../../../../docs/framework/data/wcf/how-to-load-paged-results-wcf-data-services.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-140">For more information, see [How to: Load Paged Results](../../../../docs/framework/data/wcf/how-to-load-paged-results-wcf-data-services.md).</span></span>  
  
## <a name="binary-data-streams"></a><span data-ttu-id="4ef12-141">이진 데이터 스트림</span><span class="sxs-lookup"><span data-stu-id="4ef12-141">Binary Data Streams</span></span>  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]<span data-ttu-id="4ef12-142">를 사용하면 BLOB(Binary Large Object) 데이터를 데이터 스트림으로 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-142"> enables you to access binary large object (BLOB) data as a data stream.</span></span> <span data-ttu-id="4ef12-143">스트리밍을 사용하면 필요할 때까지 이진 데이터 로드가 지연되며, 클라이언트가 보다 효율적으로 이 데이터를 처리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-143">Streaming defers the loading of binary data until it is needed, and the client can more efficiently process this data.</span></span> <span data-ttu-id="4ef12-144">이 기능을 사용하려면 데이터 서비스에서 <xref:System.Data.Services.Providers.IDataServiceStreamProvider> 공급자를 구현해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-144">In order to take advantage of this functionality, the data service must implement the <xref:System.Data.Services.Providers.IDataServiceStreamProvider> provider.</span></span> <span data-ttu-id="4ef12-145">자세한 내용은 참조 [스트리밍 공급자](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-145">For more information, see [Streaming Provider](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md).</span></span> <span data-ttu-id="4ef12-146">스트리밍을 사용하도록 설정하면 엔터티 형식이 관련 이진 데이터 없이 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-146">When streaming is enabled, entity types are returned without the related binary data.</span></span> <span data-ttu-id="4ef12-147">이 경우에 사용 해야는 <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> 의 메서드는 <xref:System.Data.Services.Client.DataServiceContext> 서비스에서 이진 데이터에 대 한 데이터 스트림에 액세스 하는 클래스입니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-147">In this case, you must use the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method of the <xref:System.Data.Services.Client.DataServiceContext> class to access the data stream for the binary data from the service.</span></span> <span data-ttu-id="4ef12-148">이와 유사하게, <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> 메서드를 사용하여 엔터티의 이진 데이터를 스트림으로 추가하거나 변경할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-148">Similarly, use the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method to add or change binary data for an entity as a stream.</span></span> <span data-ttu-id="4ef12-149">자세한 내용은 참조 [이진 데이터 작업](../../../../docs/framework/data/wcf/working-with-binary-data-wcf-data-services.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="4ef12-149">For more information, see [Working with Binary Data](../../../../docs/framework/data/wcf/working-with-binary-data-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4ef12-150">참고 항목</span><span class="sxs-lookup"><span data-stu-id="4ef12-150">See Also</span></span>  
 [<span data-ttu-id="4ef12-151">WCF Data Services 클라이언트 라이브러리</span><span class="sxs-lookup"><span data-stu-id="4ef12-151">WCF Data Services Client Library</span></span>](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)  
 [<span data-ttu-id="4ef12-152">데이터 서비스 쿼리</span><span class="sxs-lookup"><span data-stu-id="4ef12-152">Querying the Data Service</span></span>](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)
