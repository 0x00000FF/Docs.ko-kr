---
title: 애플리케이션 설정 아키텍처
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- application settings [Windows Forms], architecture
ms.assetid: c8eb2ad0-fac6-4ea2-9140-675a4a44d562
ms.openlocfilehash: a049bbe22d29f02acbc7889bb5d5010ec44f9d15
ms.sourcegitcommit: c4e9d05644c9cb89de5ce6002723de107ea2e2c4
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/19/2019
ms.locfileid: "65876228"
---
# <a name="application-settings-architecture"></a><span data-ttu-id="c4bc2-102">애플리케이션 설정 아키텍처</span><span class="sxs-lookup"><span data-stu-id="c4bc2-102">Application Settings Architecture</span></span>
<span data-ttu-id="c4bc2-103">이 항목에서는 애플리케이션 설정 아키텍처가 작동하는 방식과 그룹화된 설정 및 설정 키와 같은 고급 아키텍처 기능에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-103">This topic describes how the Application Settings architecture works, and explores advanced features of the architecture, such as grouped settings and settings keys.</span></span>  
  
 <span data-ttu-id="c4bc2-104">애플리케이션 설정 아키텍처에서는 애플리케이션 범위 또는 사용자 범위로 강력한 형식의 설정을 정의하고 애플리케이션 세션 간에 설정을 유지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-104">The application settings architecture supports defining strongly typed settings with either application or user scope, and persisting the settings between application sessions.</span></span> <span data-ttu-id="c4bc2-105">또한 이 아키텍처는 로컬 파일 시스템에 설정을 저장하고 해당 시스템에서 설정을 로드하기 위한 기본 지속성 엔진을 제공하며,</span><span class="sxs-lookup"><span data-stu-id="c4bc2-105">The architecture provides a default persistence engine for saving settings to and loading them from the local file system.</span></span> <span data-ttu-id="c4bc2-106">사용자 지정 지속성 엔진을 제공하기 위한 인터페이스도 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-106">The architecture also defines interfaces for supplying a custom persistence engine.</span></span>  
  
 <span data-ttu-id="c4bc2-107">애플리케이션에서 사용자 지정 구성 요소를 호스팅할 때 구성 요소 자체의 설정을 유지할 수 있도록 하는 인터페이스가 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-107">Interfaces are provided that enable custom components to persist their own settings when they are hosted in an application.</span></span> <span data-ttu-id="c4bc2-108">설정 키를 사용하면 구성 요소에서 구성 요소의 여러 인스턴스에 대한 설정을 개별적으로 유지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-108">By using settings keys, components can keep settings for multiple instances of the component separate.</span></span>  
  
## <a name="defining-settings"></a><span data-ttu-id="c4bc2-109">설정 정의</span><span class="sxs-lookup"><span data-stu-id="c4bc2-109">Defining Settings</span></span>  
 <span data-ttu-id="c4bc2-110">응용 프로그램 설정 아키텍처는 Windows Forms 및 ASP.NET에서 사용 되 고 두 환경 간에 공유 되는 기본 클래스의 번호를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-110">The application settings architecture is used within both ASP.NET and Windows Forms, and it contains a number of base classes that are shared across both environments.</span></span> <span data-ttu-id="c4bc2-111">가장 중요 한 <xref:System.Configuration.SettingsBase>는 컬렉션을 통해 설정에 대 한 액세스를 제공 하며 설정 로드 및 저장에 대 한 하위 수준 메서드를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-111">The most important is <xref:System.Configuration.SettingsBase>, which provides access to settings through a collection, and provides low-level methods for loading and saving settings.</span></span> <span data-ttu-id="c4bc2-112">파생 된 고유한 클래스를 구현 하는 각 환경 <xref:System.Configuration.SettingsBase> 해당 환경에 대 한 추가 설정 기능을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-112">Each environment implements its own class derived from <xref:System.Configuration.SettingsBase> to provide additional settings functionality for that environment.</span></span> <span data-ttu-id="c4bc2-113">Windows Forms 기반 응용 프로그램을 모든 응용 프로그램 설정에서 파생 된 클래스에 정의 되어야 합니다는 <xref:System.Configuration.ApplicationSettingsBase> 기본 클래스에는 다음과 같은 기능을 추가 하는 클래스:</span><span class="sxs-lookup"><span data-stu-id="c4bc2-113">In a Windows Forms-based application, all application settings must be defined on a class derived from the <xref:System.Configuration.ApplicationSettingsBase> class, which adds the following functionality to the base class:</span></span>  
  
- <span data-ttu-id="c4bc2-114">상위 수준 로드 및 저장 작업</span><span class="sxs-lookup"><span data-stu-id="c4bc2-114">Higher-level loading and saving operations</span></span>  
  
- <span data-ttu-id="c4bc2-115">사용자 범위 설정 지원</span><span class="sxs-lookup"><span data-stu-id="c4bc2-115">Support for user-scoped settings</span></span>  
  
- <span data-ttu-id="c4bc2-116">사용자 설정을 미리 정의된 기본값으로 되돌리기</span><span class="sxs-lookup"><span data-stu-id="c4bc2-116">Reverting a user's settings to the predefined defaults</span></span>  
  
- <span data-ttu-id="c4bc2-117">이전 애플리케이션 버전에서 설정 업그레이드</span><span class="sxs-lookup"><span data-stu-id="c4bc2-117">Upgrading settings from a previous application version</span></span>  
  
- <span data-ttu-id="c4bc2-118">변경하거나 저장하기 전에 설정에 대한 유효성 검사</span><span class="sxs-lookup"><span data-stu-id="c4bc2-118">Validating settings, either before they are changed or before they are saved</span></span>  
  
 <span data-ttu-id="c4bc2-119">내에서 정의 된 특성의 수를 사용 하 여 설정을 설명할 수 있습니다 합니다 <xref:System.Configuration> 네임 스페이스에 설명 된 이러한 [응용 프로그램 설정 특성](application-settings-attributes.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-119">The settings can be described using a number of attributes defined within the <xref:System.Configuration> namespace; these are described in [Application Settings Attributes](application-settings-attributes.md).</span></span> <span data-ttu-id="c4bc2-120">설정을 정의 사용 하 여 적용 해야 합니다 <xref:System.Configuration.ApplicationScopedSettingAttribute> 또는 <xref:System.Configuration.UserScopedSettingAttribute>, 설정을 전체 응용 프로그램 또는 현재 사용자에만 적용 되는지 여부를 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-120">When you define a setting, you must apply it with either <xref:System.Configuration.ApplicationScopedSettingAttribute> or <xref:System.Configuration.UserScopedSettingAttribute>, which describes whether the setting applies to the entire application or just to the current user.</span></span>  
  
 <span data-ttu-id="c4bc2-121">다음 코드 예제에서는 단일 설정인 `BackgroundColor`를 사용하여 사용자 지정 설정 클래스를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-121">The following code example defines a custom settings class with a single setting, `BackgroundColor`.</span></span>  
  
 [!code-csharp[ApplicationSettings.Create#1](~/samples/snippets/csharp/VS_Snippets_Winforms/ApplicationSettings.Create/CS/MyAppSettings.cs#1)]
 [!code-vb[ApplicationSettings.Create#1](~/samples/snippets/visualbasic/VS_Snippets_Winforms/ApplicationSettings.Create/VB/MyAppSettings.vb#1)]  
  
## <a name="settings-persistence"></a><span data-ttu-id="c4bc2-122">설정 지속성</span><span class="sxs-lookup"><span data-stu-id="c4bc2-122">Settings Persistence</span></span>  
 <span data-ttu-id="c4bc2-123">합니다 <xref:System.Configuration.ApplicationSettingsBase> ; 클래스에서 파생 되는 설정 공급자에 게 이러한 작업은 클래스 자체를 유지 하거나 하지 설정을 로드할 <xref:System.Configuration.SettingsProvider>합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-123">The <xref:System.Configuration.ApplicationSettingsBase> class does not itself persist or load settings; this job falls to the settings provider, a class that derives from <xref:System.Configuration.SettingsProvider>.</span></span> <span data-ttu-id="c4bc2-124">파생 클래스가 <xref:System.Configuration.ApplicationSettingsBase> 를 통해 설정 공급자를 지정 하지 않습니다를 <xref:System.Configuration.SettingsProviderAttribute>, 다음 기본 공급자를 <xref:System.Configuration.LocalFileSettingsProvider>, 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-124">If a derived class of <xref:System.Configuration.ApplicationSettingsBase> does not specify a settings provider through the <xref:System.Configuration.SettingsProviderAttribute>, then the default provider, <xref:System.Configuration.LocalFileSettingsProvider>, is used.</span></span>  
  
 <span data-ttu-id="c4bc2-125">.NET Framework를 사용 하 여 원래 릴리스된 구성 시스템 지원 또는 로컬 컴퓨터의 machine.config 파일을 통해 정적 응용 프로그램 구성 데이터를 제공 하는 `app.`exe.config 파일을 사용 하 여 배포 응용 프로그램입니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-125">The configuration system that was originally released with the .NET Framework supports providing static application configuration data through either the local computer's machine.config file or within an `app.`exe.config file that you deploy with your application.</span></span> <span data-ttu-id="c4bc2-126"><xref:System.Configuration.LocalFileSettingsProvider> 클래스는 다음과 같은 방법으로이 기본 지원을 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-126">The <xref:System.Configuration.LocalFileSettingsProvider> class expands this native support in the following ways:</span></span>  
  
- <span data-ttu-id="c4bc2-127">애플리케이션 범위 설정은 machine.config 또는 `app.`exe.config 파일에 저장될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-127">Application-scoped settings can be stored in either the machine.config or `app.`exe.config files.</span></span> <span data-ttu-id="c4bc2-128">Machine.config는 항상 읽기 전용이지만, `app`.exe.config는 보안 고려 사항에 따라 대부분의 애플리케이션에서 읽기 전용으로 제한됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-128">Machine.config is always read-only, while `app`.exe.config is restricted by security considerations to read-only for most applications.</span></span>  
  
- <span data-ttu-id="c4bc2-129">사용자 범위 설정은 `app`.exe.config 파일에 저장될 수 있으며, 이 경우 정적 기본값으로 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-129">User-scoped settings can be stored in `app`.exe.config files, in which case they are treated as static defaults.</span></span>  
  
- <span data-ttu-id="c4bc2-130">기본값이 아닌 사용자 범위 설정은 새 파일인 *user*.config에 저장되며, 여기서 *user*는 현재 애플리케이션을 실행 중인 사람의 사용자 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-130">Non-default user-scoped settings are stored in a new file, *user*.config, where *user* is the user name of the person currently executing the application.</span></span> <span data-ttu-id="c4bc2-131">사용 하 여 사용자 범위 설정에 대 한 기본값을 지정할 수 있습니다 <xref:System.Configuration.DefaultSettingValueAttribute>합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-131">You can specify a default for a user-scoped setting with <xref:System.Configuration.DefaultSettingValueAttribute>.</span></span> <span data-ttu-id="c4bc2-132">사용자 범위 설정이 애플리케이션 실행 중에 자주 변경되기 때문에 `user`.config는 항상 읽기/쓰기입니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-132">Because user-scoped settings often change during application execution, `user`.config is always read/write.</span></span>  
  
 <span data-ttu-id="c4bc2-133">세 가지 구성 파일은 모두 설정을 XML 형식으로 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-133">All three configuration files store settings in XML format.</span></span> <span data-ttu-id="c4bc2-134">애플리케이션 범위 설정의 최상위 XML 요소는 `<appSettings>`이며, 사용자 범위 설정에는 `<userSettings>`가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-134">The top-level XML element for application-scoped settings is `<appSettings>`, while `<userSettings>` is used for user-scoped settings.</span></span> <span data-ttu-id="c4bc2-135">애플리케이션 범위 설정과 사용자 범위 설정의 기본값을 모두 포함하는 `app`.exe.config 파일은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-135">An `app`.exe.config file which contains both application-scoped settings and defaults for user-scoped settings would look like this:</span></span>  
  
```xml  
<?xml version="1.0" encoding="utf-8" ?>  
<configuration>  
    <configSections>  
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >  
            <section name="WindowsApplication1.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />  
        </sectionGroup>  
        <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >  
            <section name="WindowsApplication1.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" />  
        </sectionGroup>  
    </configSections>  
    <applicationSettings>  
        <WindowsApplication1.Properties.Settings>  
            <setting name="Cursor" serializeAs="String">  
                <value>Default</value>  
            </setting>  
            <setting name="DoubleBuffering" serializeAs="String">  
                <value>False</value>  
            </setting>  
        </WindowsApplication1.Properties.Settings>  
    </applicationSettings>  
    <userSettings>  
        <WindowsApplication1.Properties.Settings>  
            <setting name="FormTitle" serializeAs="String">  
                <value>Form1</value>  
            </setting>  
            <setting name="FormSize" serializeAs="String">  
                <value>595, 536</value>  
            </setting>  
        </WindowsApplication1.Properties.Settings>  
    </userSettings>  
</configuration>  
```  
  
 <span data-ttu-id="c4bc2-136">구성 파일의 애플리케이션 설정 섹션에 있는 요소의 정의는 [애플리케이션 설정 스키마](../../configure-apps/file-schema/application-settings-schema.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-136">For a definition of the elements within the application settings section of a configuration file, see [Application Settings Schema](../../configure-apps/file-schema/application-settings-schema.md).</span></span>  
  
### <a name="settings-bindings"></a><span data-ttu-id="c4bc2-137">설정 바인딩</span><span class="sxs-lookup"><span data-stu-id="c4bc2-137">Settings Bindings</span></span>  
 <span data-ttu-id="c4bc2-138">애플리케이션 설정은 Windows Forms 데이터 바인딩 아키텍처를 사용하여 설정 개체와 구성 요소 간의 양방향 통신으로 설정 업데이트를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-138">Application settings uses the Windows Forms data binding architecture to provide two-way communication of settings updates between the settings object and components.</span></span> <span data-ttu-id="c4bc2-139">Visual Studio에서 애플리케이션 설정을 만들어 구성 요소 속성에 할당하면 이러한 바인딩이 자동으로 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-139">If you use Visual Studio to create application settings and assign them to component properties, these bindings are generated automatically.</span></span>  
  
 <span data-ttu-id="c4bc2-140">응용 프로그램 설정을 지 원하는 구성 요소에만 바인딩할 수 있습니다는 <xref:System.Windows.Forms.IBindableComponent> 인터페이스입니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-140">You can only bind an application setting to a component that supports the <xref:System.Windows.Forms.IBindableComponent> interface.</span></span> <span data-ttu-id="c4bc2-141">구성 요소 특정 바인딩 속성 변경 이벤트를 구현 하거나 응용 프로그램 설정 속성을 통해 변경 되었음을 알리는 해야 또한는 <xref:System.ComponentModel.INotifyPropertyChanged> 인터페이스입니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-141">Also, the component must implement a change event for a specific bound property, or notify application settings that the property has changed through the <xref:System.ComponentModel.INotifyPropertyChanged> interface.</span></span> <span data-ttu-id="c4bc2-142">구성 요소를 구현 하지 않는 경우 <xref:System.Windows.Forms.IBindableComponent> 및 Visual Studio를 통해 바인딩, 바인딩된 속성을 처음으로 설정 되지만 업데이트 되지 것입니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-142">If the component does not implement <xref:System.Windows.Forms.IBindableComponent> and you are binding through Visual Studio, the bound properties will be set the first time, but will not update.</span></span> <span data-ttu-id="c4bc2-143">구성 요소를 구현 하는 경우 <xref:System.Windows.Forms.IBindableComponent> 않습니다 하지 속성 변경 알림을 지원 하지만 속성이 변경 될 때 바인딩은 설정 파일에서 업데이트 되지 것입니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-143">If the component implements <xref:System.Windows.Forms.IBindableComponent> but does not support property change notifications, the binding will not update in the settings file when the property is changed.</span></span>  
  
 <span data-ttu-id="c4bc2-144">일부 Windows Forms 구성 요소와 같은 <xref:System.Windows.Forms.ToolStripItem>, 설정 바인딩을 지원 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-144">Some Windows Forms components, such as <xref:System.Windows.Forms.ToolStripItem>, do not support settings bindings.</span></span>  
  
### <a name="settings-serialization"></a><span data-ttu-id="c4bc2-145">설정 직렬화(Serialization)</span><span class="sxs-lookup"><span data-stu-id="c4bc2-145">Settings Serialization</span></span>  
 <span data-ttu-id="c4bc2-146">때 <xref:System.Configuration.LocalFileSettingsProvider> 설정을 디스크에 저장 해야 다음 작업을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-146">When <xref:System.Configuration.LocalFileSettingsProvider> must save settings to disk, it performs the following actions:</span></span>  
  
1. <span data-ttu-id="c4bc2-147">리플렉션을 사용 하 여 모두에 정의 된 속성을 검사 하 여 <xref:System.Configuration.ApplicationSettingsBase> 파생 클래스를 사용 하 여 적용 되는 찾기 <xref:System.Configuration.ApplicationScopedSettingAttribute> 또는 <xref:System.Configuration.UserScopedSettingAttribute>합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-147">Uses reflection to examine all of the properties defined on your <xref:System.Configuration.ApplicationSettingsBase> derived class, finding those that are applied with either <xref:System.Configuration.ApplicationScopedSettingAttribute> or <xref:System.Configuration.UserScopedSettingAttribute>.</span></span>  
  
2. <span data-ttu-id="c4bc2-148">속성을 디스크에 직렬화합니다(serialize).</span><span class="sxs-lookup"><span data-stu-id="c4bc2-148">Serializes the property to disk.</span></span> <span data-ttu-id="c4bc2-149">먼저 호출 하려고 합니다 <xref:System.ComponentModel.TypeConverter.ConvertToString%2A> 또는 <xref:System.ComponentModel.TypeConverter.ConvertFromString%2A> 에서 연관 된 형식을 <xref:System.ComponentModel.TypeConverter>합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-149">It first attempts to call the <xref:System.ComponentModel.TypeConverter.ConvertToString%2A> or <xref:System.ComponentModel.TypeConverter.ConvertFromString%2A> on the type's associated <xref:System.ComponentModel.TypeConverter>.</span></span> <span data-ttu-id="c4bc2-150">호출하지 못하면 XML serialization을 대신 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-150">If this does not succeed, it uses XML serialization instead.</span></span>  
  
3. <span data-ttu-id="c4bc2-151">설정의 특성에 따라 어떤 파일에 어떤 설정을 사용할지 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-151">Determines which settings go in which files, based on the setting's attribute.</span></span>  
  
 <span data-ttu-id="c4bc2-152">사용자 고유의 설정 클래스를 구현 하는 경우 사용할 수 있습니다 합니다 <xref:System.Configuration.SettingsSerializeAsAttribute> 사용 하 여 이진 또는 사용자 지정 serialization에 대 한 설정을 표시 하는 <xref:System.Configuration.SettingsSerializeAs> 열거형입니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-152">If you implement your own settings class, you can use the <xref:System.Configuration.SettingsSerializeAsAttribute> to mark a setting for either binary or custom serialization using the <xref:System.Configuration.SettingsSerializeAs> enumeration.</span></span> <span data-ttu-id="c4bc2-153">코드에서 사용자 고유의 설정 클래스를 만드는 방법에 대 한 자세한 내용은 참조 하세요. [방법: 응용 프로그램 설정 만들기](how-to-create-application-settings.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-153">For more information on creating your own settings class in code, see [How to: Create Application Settings](how-to-create-application-settings.md).</span></span>  
  
### <a name="settings-file-locations"></a><span data-ttu-id="c4bc2-154">설정 파일 위치</span><span class="sxs-lookup"><span data-stu-id="c4bc2-154">Settings File Locations</span></span>  
 <span data-ttu-id="c4bc2-155">`app`.exe.config 및 *user*.config 파일의 위치는 응용 프로그램을 설치하는 방법에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-155">The location of the `app`.exe.config and *user*.config files will differ based on how the application is installed.</span></span> <span data-ttu-id="c4bc2-156">로컬 컴퓨터에 복사 하는 Windows Forms 기반 응용 프로그램에 대 한 `app`합니다. 응용 프로그램의 주 실행 파일의 기본 디렉터리와 같은 디렉터리의 exe.config 상주할 및 *사용자*.config에 상주할 합니다 지정 된 위치는 <xref:System.Windows.Forms.Application.LocalUserAppDataPath%2A?displayProperty=nameWithType> 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-156">For a Windows Forms-based application copied onto the local computer, `app`.exe.config will reside in the same directory as the base directory of the application's main executable file, and *user*.config will reside in the location specified by the <xref:System.Windows.Forms.Application.LocalUserAppDataPath%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="c4bc2-157">[!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)]를 사용하여 응용 프로그램을 설치한 경우 이 두 파일은 모두 %InstallRoot%\Documents and Settings\\*username*\Local Settings 아래의 [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] 데이터 디렉터리에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-157">For an application installed by means of [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)], both of these files will reside in the [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] Data Directory underneath %InstallRoot%\Documents and Settings\\*username*\Local Settings.</span></span>  
  
 <span data-ttu-id="c4bc2-158">사용자가 로밍 프로필을 사용하도록 설정한 경우 한 도메인 내에서 다른 컴퓨터를 사용할 때 다른 Windows 및 애플리케이션 설정을 정의할 수 있으므로 이러한 파일의 저장 위치는 약간 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-158">The storage location of these files is slightly different if a user has enabled roaming profiles, which enables a user to define different Windows and application settings when he or she is using other computers within a domain.</span></span> <span data-ttu-id="c4bc2-159">이 경우 [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] 애플리케이션과 [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)]가 아닌 애플리케이션에서는 모두 `app`.exe.config 및 *user*.config 파일이 %InstallRoot%\Documents and Settings\\*username*\Application Data에 저장되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-159">In that case, both [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] applications and non-[!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] applications will have their `app`.exe.config and *user*.config files stored under %InstallRoot%\Documents and Settings\\*username*\Application Data.</span></span>  
  
 <span data-ttu-id="c4bc2-160">애플리케이션 설정 기능이 새로운 배포 기술을 통해 작동하는 방법에 대한 자세한 내용은 [ClickOnce 및 애플리케이션 설정](/visualstudio/deployment/clickonce-and-application-settings)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-160">For more information about how the Application Settings feature works with the new deployment technology, see [ClickOnce and Application Settings](/visualstudio/deployment/clickonce-and-application-settings).</span></span> <span data-ttu-id="c4bc2-161">[!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] 데이터 디렉터리에 대한 자세한 내용은 [ClickOnce 응용 프로그램의 로컬 및 원격 데이터 액세스](/visualstudio/deployment/accessing-local-and-remote-data-in-clickonce-applications)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-161">For more information about the [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] Data Directory, see [Accessing Local and Remote Data in ClickOnce Applications](/visualstudio/deployment/accessing-local-and-remote-data-in-clickonce-applications).</span></span>  
  
## <a name="application-settings-and-security"></a><span data-ttu-id="c4bc2-162">애플리케이션 설정 및 보안</span><span class="sxs-lookup"><span data-stu-id="c4bc2-162">Application Settings and Security</span></span>  
 <span data-ttu-id="c4bc2-163">애플리케이션 설정은 인터넷이나 인트라넷에서 호스팅되는 Windows Forms 애플리케이션의 기본적인 제한된 환경인 부분 신뢰 환경에서 작동하도록 설계되었습니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-163">Application settings are designed to work in partial trust, a restricted environment that is the default for Windows Forms applications hosted over the Internet or an intranet.</span></span> <span data-ttu-id="c4bc2-164">기본 설정 공급자를 포함한 애플리케이션 설정을 사용하는 데에는 부분 신뢰 권한만 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-164">No special permissions beyond partial trust are needed to use application settings with the default settings provider.</span></span>  
  
 <span data-ttu-id="c4bc2-165">[!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] 응용 프로그램에서 응용 프로그램 설정을 사용하면 `user`.config 파일이 [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] 데이터 디렉터리에 저장됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-165">When application settings are used in a [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] application, the `user`.config file is stored in the [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] data directory.</span></span> <span data-ttu-id="c4bc2-166">애플리케이션의 `user`.config 파일 크기는 [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)]에서 설정된 데이터 디렉터리 할당량을 초과할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-166">The size of the application's `user`.config file cannot exceed the data directory quota set by [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)].</span></span> <span data-ttu-id="c4bc2-167">자세한 내용은 [ClickOnce 및 애플리케이션 설정](/visualstudio/deployment/clickonce-and-application-settings)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-167">For more information, see [ClickOnce and Application Settings](/visualstudio/deployment/clickonce-and-application-settings).</span></span>  
  
## <a name="custom-settings-providers"></a><span data-ttu-id="c4bc2-168">사용자 지정 설정 공급자</span><span class="sxs-lookup"><span data-stu-id="c4bc2-168">Custom Settings Providers</span></span>  
 <span data-ttu-id="c4bc2-169">응용 프로그램 설정 아키텍처에 있어서 응용 프로그램 설정 간의 느슨한 결합을에서 파생 된 래퍼 클래스 <xref:System.Configuration.ApplicationSettingsBase>와 연결 된 설정 공급자 또는 공급자의 경우 파생 된 <xref:System.Configuration.SettingsProvider>합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-169">In the Application Settings architecture, there is a loose coupling between the applications settings wrapper class, derived from <xref:System.Configuration.ApplicationSettingsBase>, and the associated settings provider or providers, derived from <xref:System.Configuration.SettingsProvider>.</span></span> <span data-ttu-id="c4bc2-170">이 연결을 에서만 정의 <xref:System.Configuration.SettingsProviderAttribute> 래퍼 클래스 또는 해당 개별 속성에 적용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-170">This association is defined only by the <xref:System.Configuration.SettingsProviderAttribute> applied to the wrapper class or its individual properties.</span></span> <span data-ttu-id="c4bc2-171">설정 공급자가 없습니다 명시적으로 지정 하면 기본 공급자 인 <xref:System.Configuration.LocalFileSettingsProvider>에 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-171">If a settings provider is not explicitly specified, the default provider, <xref:System.Configuration.LocalFileSettingsProvider>, is used.</span></span> <span data-ttu-id="c4bc2-172">따라서 이 아키텍처는 사용자 지정 설정 공급자를 만들고 사용할 수 있도록 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-172">As a result, this architecture supports creating and using custom settings providers.</span></span>  
  
 <span data-ttu-id="c4bc2-173">예를 들어 Microsoft SQL Server 데이터베이스에 모든 설정 데이터를 저장하는 공급자인 `SqlSettingsProvider`를 개발하여 사용한다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-173">For example, suppose that you want to develop and use `SqlSettingsProvider`, a provider that will store all settings data in a Microsoft SQL Server database.</span></span> <span data-ttu-id="c4bc2-174">프로그램 <xref:System.Configuration.SettingsProvider>-파생된 클래스에서이 정보를 수신할 해당 `Initialize` 메서드에 형식 매개 변수로 <xref:System.Collections.Specialized.NameValueCollection?displayProperty=nameWithType>합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-174">Your <xref:System.Configuration.SettingsProvider>-derived class would receive this information in its `Initialize` method as a parameter of type <xref:System.Collections.Specialized.NameValueCollection?displayProperty=nameWithType>.</span></span> <span data-ttu-id="c4bc2-175">다음을 구현 합니다 <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> 데이터 저장소에서 설정을 검색 하는 방법 및 <xref:System.Configuration.SettingsProvider.SetPropertyValues%2A> 저장.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-175">You would then implement the <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> method to retrieve your settings from the data store, and <xref:System.Configuration.SettingsProvider.SetPropertyValues%2A> to save them.</span></span> <span data-ttu-id="c4bc2-176">공급자에 사용할 수는 <xref:System.Configuration.SettingsPropertyCollection> 에 제공 된 <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> 속성의 이름, 유형 및 범위를 확인 하려면 다른 설정 특성 및 해당 속성에 대해 정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-176">Your provider can use the <xref:System.Configuration.SettingsPropertyCollection> supplied to <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> to determine the property's name, type, and scope, as well as any other settings attributes defined for that property.</span></span>  
  
 <span data-ttu-id="c4bc2-177">공급자는 구현이 분명하지 않은 속성 하나와 메서드 하나를 구현해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-177">Your provider will need to implement one property and one method whose implementations may not be obvious.</span></span> <span data-ttu-id="c4bc2-178">합니다 <xref:System.Configuration.SettingsProvider.ApplicationName%2A> 속성의 추상 속성은 <xref:System.Configuration.SettingsProvider>; 다음을 반환 하도록 프로그래밍 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-178">The <xref:System.Configuration.SettingsProvider.ApplicationName%2A> property is an abstract property of <xref:System.Configuration.SettingsProvider>; you should program it to return the following:</span></span>  
  
 [!code-csharp[ApplicationSettings.Architecture#2](~/samples/snippets/csharp/VS_Snippets_Winforms/ApplicationSettings.Architecture/CS/DummyClass.cs#2)]
 [!code-vb[ApplicationSettings.Architecture#2](~/samples/snippets/visualbasic/VS_Snippets_Winforms/ApplicationSettings.Architecture/VB/DummyProviderClass.vb#2)]  
  
 <span data-ttu-id="c4bc2-179">또한 파생 클래스는 인수를 사용하지 않고 값을 반환하지 않는 `Initialize` 메서드도 구현해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-179">Your derived class must also implement an `Initialize` method that takes no arguments and returns no value.</span></span> <span data-ttu-id="c4bc2-180">이 메서드는 정의 되지 않은 <xref:System.Configuration.SettingsProvider>합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-180">This method is not defined by <xref:System.Configuration.SettingsProvider>.</span></span>  
  
 <span data-ttu-id="c4bc2-181">마지막으로 구현 <xref:System.Configuration.IApplicationSettingsProvider> 설정 새로 고침에 대 한 지원을 제공 하 여 공급자에서 설정을 기본값으로 되돌리기 및 다른 설정을 응용 프로그램 버전에서 업그레이드 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-181">Finally, you implement <xref:System.Configuration.IApplicationSettingsProvider> on your provider to provide support for refreshing settings, reverting settings to their defaults, and upgrading settings from one application version to another.</span></span>  
  
 <span data-ttu-id="c4bc2-182">공급자를 구현하고 컴파일했으면 설정 클래스에서 기본값 대신 이 공급자를 사용하도록 지시해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-182">Once you have implemented and compiled your provider, you need to instruct your settings class to use this provider instead of the default.</span></span> <span data-ttu-id="c4bc2-183">통해이 작업을 수행 합니다 <xref:System.Configuration.SettingsProviderAttribute>합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-183">You accomplish this through the <xref:System.Configuration.SettingsProviderAttribute>.</span></span> <span data-ttu-id="c4bc2-184">전체 설정 클래스에 적용 하는 경우 해당 공급자가; 클래스를 정의 하는 각 설정에 대 한 사용 개별 설정에 적용 하는 경우 응용 프로그램 설정 아키텍처에만 해당 설정에 대 한 해당 공급자를 사용 하 고이 사용 하는 <xref:System.Configuration.LocalFileSettingsProvider> 나머지 부분에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-184">If applied to an entire settings class, the provider is used for each setting that the class defines; if applied to individual settings, Application Settings architecture uses that provider for those settings only, and uses <xref:System.Configuration.LocalFileSettingsProvider> for the rest.</span></span> <span data-ttu-id="c4bc2-185">다음 코드 예제에서는 사용자 지정 공급자를 사용하도록 설정 클래스에 지시하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-185">The following code example shows how to instruct the settings class to use your custom provider.</span></span>  
  
 [!code-csharp[ApplicationSettings.Architecture#1](~/samples/snippets/csharp/VS_Snippets_Winforms/ApplicationSettings.Architecture/CS/DummyClass.cs#1)]
 [!code-vb[ApplicationSettings.Architecture#1](~/samples/snippets/visualbasic/VS_Snippets_Winforms/ApplicationSettings.Architecture/VB/DummyProviderClass.vb#1)]  
  
 <span data-ttu-id="c4bc2-186">한 공급자를 여러 스레드에서 동시에 호출할 수 있지만, 공급자가 항상 동일한 저장소 위치에 쓰므로 애플리케이션 아키텍처는 공급자 클래스의 단일 인스턴스만 인스턴스화합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-186">A provider may be called from multiple threads simultaneously, but it will always write to the same storage location; therefore, the Application Settings architecture will only ever instantiate a single instance of your provider class.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="c4bc2-187">공급자가 스레드로부터 안전하며 구성 파일에 쓸 수 있는 스레드를 한 번에 하나씩 허용하는지 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-187">You should ensure that your provider is thread-safe, and only allows one thread at a time to write to the configuration files.</span></span>  
  
 <span data-ttu-id="c4bc2-188">공급자는 특성에 정의 된 설정 중 일부를 지원 하지 않아도 <xref:System.Configuration?displayProperty=nameWithType> 네임 스페이스 최소 지원 해야 하지만 <xref:System.Configuration.ApplicationScopedSettingAttribute> 및 <xref:System.Configuration.UserScopedSettingAttribute>에 지원 해야 <xref:System.Configuration.DefaultSettingValueAttribute>합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-188">Your provider does not need to support all of the settings attributes defined in the <xref:System.Configuration?displayProperty=nameWithType> namespace, though it must at a minimum support <xref:System.Configuration.ApplicationScopedSettingAttribute> and <xref:System.Configuration.UserScopedSettingAttribute>, and should also support <xref:System.Configuration.DefaultSettingValueAttribute>.</span></span> <span data-ttu-id="c4bc2-189">지원하지 않는 특성에 대해서는 공급자가 알림 없이 실패해야 하며 예외를 throw하면 안됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-189">For those attributes that it does not support, your provider should just fail without notification; it should not throw an exception.</span></span> <span data-ttu-id="c4bc2-190">하지만 설정 클래스에서 특성의 조합이 잘못를 사용 하는 경우-적용 하는 등 <xref:System.Configuration.ApplicationScopedSettingAttribute> 고 <xref:System.Configuration.UserScopedSettingAttribute> 같은 설정으로-공급자에서 예외를 throw 하 고 작업을 중단 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4bc2-190">If the settings class uses an invalid combination of attributes, however — such as applying <xref:System.Configuration.ApplicationScopedSettingAttribute> and <xref:System.Configuration.UserScopedSettingAttribute> to the same setting — your provider should throw an exception and cease operation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c4bc2-191">참고자료</span><span class="sxs-lookup"><span data-stu-id="c4bc2-191">See also</span></span>

- <xref:System.Configuration.ApplicationSettingsBase>
- <xref:System.Configuration.SettingsProvider>
- <xref:System.Configuration.LocalFileSettingsProvider>
- [<span data-ttu-id="c4bc2-192">응용 프로그램 설정 개요</span><span class="sxs-lookup"><span data-stu-id="c4bc2-192">Application Settings Overview</span></span>](application-settings-overview.md)
- [<span data-ttu-id="c4bc2-193">사용자 지정 컨트롤에 대한 응용 프로그램 설정</span><span class="sxs-lookup"><span data-stu-id="c4bc2-193">Application Settings for Custom Controls</span></span>](application-settings-for-custom-controls.md)
- [<span data-ttu-id="c4bc2-194">ClickOnce 및 응용 프로그램 설정</span><span class="sxs-lookup"><span data-stu-id="c4bc2-194">ClickOnce and Application Settings</span></span>](/visualstudio/deployment/clickonce-and-application-settings)
- [<span data-ttu-id="c4bc2-195">응용 프로그램 설정 스키마</span><span class="sxs-lookup"><span data-stu-id="c4bc2-195">Application Settings Schema</span></span>](../../configure-apps/file-schema/application-settings-schema.md)
