---
title: "세션 사용"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: sessions [WCF]
ms.assetid: 864ba12f-3331-4359-a359-6d6d387f1035
caps.latest.revision: "32"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 82fab5b5d7c702bc9f5e595572b8eba821159cd7
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 12/02/2017
---
# <a name="using-sessions"></a><span data-ttu-id="acd2e-102">세션 사용</span><span class="sxs-lookup"><span data-stu-id="acd2e-102">Using Sessions</span></span>
<span data-ttu-id="acd2e-103">[!INCLUDE[indigo1](../../../includes/indigo1-md.md)] 응용 프로그램에서 *세션* 은 메시지 그룹을 대화에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-103">In [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] applications, a *session* correlates a group of messages into a conversation.</span></span> [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]<span data-ttu-id="acd2e-104"> 세션은 [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] 응용 프로그램에서 사용할 수 있는 세션 개체와 다르며, 다른 동작을 지원하고 다른 방법으로 제어됩니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-104"> sessions are different than the session object available in [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] applications, support different behaviors, and are controlled in different ways.</span></span> <span data-ttu-id="acd2e-105">이 항목에서는 세션이 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 응용 프로그램에서 사용할 수 있는 기능과 그 사용 방법에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-105">This topic describes the features that sessions enable in [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] applications and how to use them.</span></span>  
  
## <a name="sessions-in-windows-communication-foundation-applications"></a><span data-ttu-id="acd2e-106">Windows Communication Foundation 응용 프로그램의 세션</span><span class="sxs-lookup"><span data-stu-id="acd2e-106">Sessions in Windows Communication Foundation Applications</span></span>  
 <span data-ttu-id="acd2e-107">서비스 계약에서 세션이 필요하도록 지정할 경우 해당 계약은 모든 호출(즉, 호출을 지원하는 기본 메시지 교환)이 동일한 대화의 일부가 되도록 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-107">When a service contract specifies that it requires a session, that contract is specifying that all calls (that is, the underlying message exchanges that support the calls) must be part of the same conversation.</span></span> <span data-ttu-id="acd2e-108">계약이 세션을 허용하지만 특정 세션이 필요 없음을 지정하는 경우, 클라이언트는 세션을 연결하여 설정하거나 설정하지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-108">If a contract specifies that it allows sessions but does not require one, clients can connect and either establish a session or not establish a session.</span></span> <span data-ttu-id="acd2e-109">세션이 종료되고 메시지가 동일한 채널을 통해 전송될 경우 예외가 throw됩니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-109">If the session ends and a message is sent through the same channel an exception is thrown.</span></span>  
  
 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]<span data-ttu-id="acd2e-110"> 세션에는 다음과 같은 주요 개념적 기능이 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-110"> sessions have the following main conceptual features:</span></span>  
  
-   <span data-ttu-id="acd2e-111">이러한 기능은 호출 응용 프로그램(WCF 클라이언트)에 의해 명시적으로 시작되고 종료됩니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-111">They are explicitly initiated and terminated by the calling application (the WCF client).</span></span>  
  
-   <span data-ttu-id="acd2e-112">한 세션 동안 배달된 메시지는 수신된 순서대로 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-112">Messages delivered during a session are processed in the order in which they are received.</span></span>  
  
-   <span data-ttu-id="acd2e-113">세션은 메시지 그룹을 대화에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-113">Sessions correlate a group of messages into a conversation.</span></span> <span data-ttu-id="acd2e-114">여러 유형의 상관 관계를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-114">Different types of correlation are possible.</span></span> <span data-ttu-id="acd2e-115">예를 들어, 공유된 네트워크 연결을 기반으로 메시지와 연결될 수 있는 세션 기반 채널이 있는 반면 메시지 본문의 공유 태그를 기반으로 메시지와 연결될 수 있는 세션 기반 채널도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-115">For instance, one session-based channel may correlate messages based on a shared network connection while another session-based channel may correlate messages based on a shared tag in the message body.</span></span> <span data-ttu-id="acd2e-116">세션에서 파생될 수 있는 기능은 상관 관계의 특성에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-116">The features that can be derived from the session depend on the nature of the correlation.</span></span>  
  
-   <span data-ttu-id="acd2e-117">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 세션과 연결된 일반 데이터 저장소는 없습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-117">There is no general data store associated with a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] session.</span></span>  
  
 <span data-ttu-id="acd2e-118"><xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType> 응용 프로그램의 [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] 클래스 및 기능에 익숙한 경우, 해당 유형의 세션 및 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 세션 사이에 다음과 같은 차이점이 있음을 알 수 있습니다</span><span class="sxs-lookup"><span data-stu-id="acd2e-118">If you are familiar with the <xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType> class in [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] applications and the functionality it provides, you might notice the following differences between that kind of session and [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] sessions:</span></span>  
  
-   [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)]<span data-ttu-id="acd2e-119"> 세션은 항상 서버에 의해 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-119"> sessions are always server-initiated.</span></span>  
  
-   [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)]<span data-ttu-id="acd2e-120"> 세션은 암시적으로 순서가 지정되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-120"> sessions are implicitly unordered.</span></span>  
  
-   [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)]<span data-ttu-id="acd2e-121"> 세션은 요청을 통해 일반 데이터 저장소 메커니즘을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-121"> sessions provide a general data storage mechanism across requests.</span></span>  
  
 <span data-ttu-id="acd2e-122">이 항목에서는 다음을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-122">This topic describes:</span></span>  
  
-   <span data-ttu-id="acd2e-123">서비스 모델 계층에서 세션 기반 바인딩을 사용하는 경우 기본 실행 동작</span><span class="sxs-lookup"><span data-stu-id="acd2e-123">The default execution behavior when using session-based bindings in the service model layer.</span></span>  
  
-   <span data-ttu-id="acd2e-124">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 세션 기반의 시스템 제공 바인딩이 제공하는 기능 유형</span><span class="sxs-lookup"><span data-stu-id="acd2e-124">The types of features that the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] session-based, system-provided bindings provide.</span></span>  
  
-   <span data-ttu-id="acd2e-125">세션 요구 사항을 선언하는 계약을 만드는 방법</span><span class="sxs-lookup"><span data-stu-id="acd2e-125">How to create a contract that declares a session requirement.</span></span>  
  
-   <span data-ttu-id="acd2e-126">세션의 생성과 종료 및 세션과 서비스 인스턴스와의 관계를 이해하고 제어하는 방법</span><span class="sxs-lookup"><span data-stu-id="acd2e-126">How to understand and control the creation and termination of the session and the relationship of the session to the service instance.</span></span>  
  
## <a name="default-execution-behavior-using-sessions"></a><span data-ttu-id="acd2e-127">세션을 사용한 기본 실행 동작</span><span class="sxs-lookup"><span data-stu-id="acd2e-127">Default Execution Behavior Using Sessions</span></span>  
 <span data-ttu-id="acd2e-128">세션을 초기화하려는 바인딩은 *세션 기반* 바인딩에서 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-128">A binding that attempts to initiate a session is called a *session-based* binding.</span></span> <span data-ttu-id="acd2e-129">서비스 계약에서는 서비스 계약 인터페이스(또는 클래스)의 <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> 속성을 <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> 열거형 값 중 하나로 설정하여 세션 기반 바인딩을 필요로 하거나 허용하거나 거부하도록 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-129">Service contracts specify that they require, permit, or refuse session-based bindings by setting the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property on the service contract interface (or class) to one of the <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> enumeration values.</span></span> <span data-ttu-id="acd2e-130">기본적으로 이 속성 값은 <xref:System.ServiceModel.SessionMode.Allowed>이며, 클라이언트가 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 서비스 구현을 통해 세션 기반 바인딩을 사용하는 경우 서비스가 제공된 세션을 설정하고 사용하는 것을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-130">By default, the value of this property is <xref:System.ServiceModel.SessionMode.Allowed>, which means that if a client uses a session-based binding with a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service implementation, the service establishes and uses the session provided.</span></span>  
  
 <span data-ttu-id="acd2e-131">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 서비스가 클라이언트 세션을 허용하는 경우 기본적으로 다음 기능을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-131">When a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service accepts a client session, the following features are enabled by default:</span></span>  
  
1.  <span data-ttu-id="acd2e-132">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 클라이언트 개체 간의 모든 호출은 동일한 서비스 인스턴스에 의해 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-132">All calls between a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object are handled by the same service instance.</span></span>  
  
2.  <span data-ttu-id="acd2e-133">다른 세션 기반 바인딩은 추가 기능을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-133">Different session-based bindings provide additional features.</span></span>  
  
## <a name="system-provided-session-types"></a><span data-ttu-id="acd2e-134">시스템 제공 세션 유형</span><span class="sxs-lookup"><span data-stu-id="acd2e-134">System-Provided Session Types</span></span>  
 <span data-ttu-id="acd2e-135">세션 기반 바인딩은 서비스 인스턴스와 특정 세션과의 기본 연결을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-135">A session-based binding supports the default association of a service instance with a particular session.</span></span> <span data-ttu-id="acd2e-136">그러나 다른 세션 기반 바인딩은 앞서 설명한 세션 기반 인스턴스 만들기를 제어할 수 있는 기능 이외에 다른 기능을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-136">However, different session-based bindings support different features in addition to enabling the session-based instancing control previously described.</span></span>  
  
 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]<span data-ttu-id="acd2e-137"> 에서는 다음 유형의 세션 기반 응용 프로그램 동작을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-137"> provides the following types of session-based application behavior:</span></span>  
  
-   <span data-ttu-id="acd2e-138"><xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType>는 통신의 양쪽 끝에서 특정 보안 대화에 동의한 보안 기반 세션을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-138">The <xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType> supports security-based sessions, in which both ends of communication have agreed upon a specific secure conversation.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="acd2e-139">[서비스 보안](../../../docs/framework/wcf/securing-services.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-139"> [Securing Services](../../../docs/framework/wcf/securing-services.md).</span></span> <span data-ttu-id="acd2e-140">예를 들어, 보안 세션과 신뢰할 수 있는 세션 모두에 대한 지원이 포함된 <xref:System.ServiceModel.WSHttpBinding?displayProperty=nameWithType> 바인딩은 기본적으로 메시지에 대해 암호화 및 디지털 서명을 수행하는 보안 세션만 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-140">For example, the <xref:System.ServiceModel.WSHttpBinding?displayProperty=nameWithType> binding, which contains support for both security sessions and reliable sessions, by default uses only a secure session that encrypts and digitally signs messages.</span></span>  
  
-   <span data-ttu-id="acd2e-141"><xref:System.ServiceModel.NetTcpBinding?displayProperty=nameWithType> 바인딩은 모든 메시지가 소켓 수준에서 연결을 통해 상호 연결되도록 TCP/IP 기반 세션을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-141">The <xref:System.ServiceModel.NetTcpBinding?displayProperty=nameWithType> binding supports TCP/IP-based sessions to ensure that all messages are correlated by the connection at the socket level.</span></span>  
  
-   <span data-ttu-id="acd2e-142">WS-ReliableMessaging 사양을 구현하는 <xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType> 요소는 신뢰할 수 있는 세션에 대한 지원을 제공합니다. 신뢰할 수 있는 세션에서는 메시지를 순서대로 정확히 한 번 배달하도록 구성하여 대화 중에 여러 노드에서 메시지가 전달되는 경우에도 메시지가 수신되도록 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-142">The <xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType> element, which implements the WS-ReliableMessaging specification, provides support for reliable sessions in which messages can be configured to be delivered in order and exactly once, ensuring messages are received even when messages travel across multiple nodes during the conversation.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="acd2e-143">[신뢰할 수 있는 세션](../../../docs/framework/wcf/feature-details/reliable-sessions.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-143"> [Reliable Sessions](../../../docs/framework/wcf/feature-details/reliable-sessions.md).</span></span>  
  
-   <span data-ttu-id="acd2e-144"><xref:System.ServiceModel.NetMsmqBinding?displayProperty=nameWithType> 바인딩은 MSMQ 데이터그램 세션을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-144">The <xref:System.ServiceModel.NetMsmqBinding?displayProperty=nameWithType> binding provides MSMQ datagram sessions.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="acd2e-145">[WCF의 큐](../../../docs/framework/wcf/feature-details/queues-in-wcf.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-145"> [Queues in WCF](../../../docs/framework/wcf/feature-details/queues-in-wcf.md).</span></span>  
  
 <span data-ttu-id="acd2e-146"><xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> 속성을 설정하면 계약에 필요한 세션 유형을 지정하지 않고 요구만 합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-146">Setting the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> property does not specify the type of session the contract requires, only that it requires one.</span></span>  
  
## <a name="creating-a-contract-that-requires-a-session"></a><span data-ttu-id="acd2e-147">세션이 필요한 계약 만들기</span><span class="sxs-lookup"><span data-stu-id="acd2e-147">Creating a Contract That Requires a Session</span></span>  
 <span data-ttu-id="acd2e-148">세션이 필요한 계약을 만들면 서비스 계약이 선언한 작업 그룹 모두가 같은 세션 내에서 실행되고 해당 메시지가 순서대로 배달되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-148">Creating a contract that requires a session states that the group of operations that the service contract declares must all be executed within the same session and that messages must be delivered in order.</span></span> <span data-ttu-id="acd2e-149">서비스 계약이 필요한 세션 지원 수준을 어설션하려면 서비스 계약 인터페이스 또는 클래스의 <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> 속성을 <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> 열거형 값으로 설정하여 계약에서 다음을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-149">To assert the level of session support that a service contract requires, set the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property on your service contract interface or class to the value of the <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> enumeration to specify whether the contract:</span></span>  
  
-   <span data-ttu-id="acd2e-150">세션이 필요한지 여부</span><span class="sxs-lookup"><span data-stu-id="acd2e-150">Requires a session.</span></span>  
  
-   <span data-ttu-id="acd2e-151">클라이언트가 세션을 설정하도록 허용할지 여부</span><span class="sxs-lookup"><span data-stu-id="acd2e-151">Allows a client to establish a session.</span></span>  
  
-   <span data-ttu-id="acd2e-152">세션을 금지할지 여부</span><span class="sxs-lookup"><span data-stu-id="acd2e-152">Prohibits a session.</span></span>  
  
 <span data-ttu-id="acd2e-153">그러나 <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> 속성을 설정하면 계약에 필요한 세션 기반 동작 유형을 지정하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-153">Setting the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> property does not, however, specify the type of session-based behavior the contract requires.</span></span> <span data-ttu-id="acd2e-154">이런 경우 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 는 런타임에 서비스에 대해 구성된 바인딩(여기서 통신 채널을 생성)이 서비스 구현 시 세션을 설정하는지, 설정하지 않는지, 설정할 수 있는지 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-154">It instructs [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] to confirm at runtime that the configured binding (which creates the communication channel) for the service does, does not, or can establish a session when implementing a service.</span></span> <span data-ttu-id="acd2e-155">또한 바인딩은 보안 동작, 전송 동작, 신뢰할 수 있는 동작 또는 이러한 동작의 조합 중에서 선택한 세션 기반 동작 유형과 함께 해당 요구 사항을 충족할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-155">Again, the binding can satisfy that requirement with any type of session-based behavior it chooses—security, transport, reliable, or some combination.</span></span> <span data-ttu-id="acd2e-156">정확한 동작은 선택한 <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> 값에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-156">The exact behavior depends on the <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> value selected.</span></span> <span data-ttu-id="acd2e-157">서비스에 대해 구성된 바인딩이 <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A>의 값을 준수하지 않는 경우 예외가 throw됩니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-157">If the configured binding of the service does not conform to the value of <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A>, an exception is thrown.</span></span> <span data-ttu-id="acd2e-158">바인딩 및 세션을 지원하도록 바인딩이 만든 채널을 세션 기반이라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-158">Bindings and the channels they create that support sessions are said to be session-based.</span></span>  
  
 <span data-ttu-id="acd2e-159">다음 서비스 계약은 `ICalculatorSession` 의 모든 작업이 세션 내에서 교환되도록 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-159">The following service contract specifies that all operations in the `ICalculatorSession` must be exchanged within a session.</span></span> <span data-ttu-id="acd2e-160">`Equals` 메서드를 제외하고 호출자에게 값을 반환하는 작업은 없습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-160">None of the operations returns a value to the caller except the `Equals` method.</span></span> <span data-ttu-id="acd2e-161">그러나 `Equals` 메서드는 매개 변수를 가져오지 않기 때문에 다른 작업에 데이터를 이미 전달한 세션 내에서 0이 아닌 값만 반환할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-161">However, the `Equals` method takes no parameters and, therefore, can only return a non-zero value inside a session in which data has already been passed to the other operations.</span></span> <span data-ttu-id="acd2e-162">이 계약에서 세션이 제대로 작동해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-162">This contract requires a session to function properly.</span></span> <span data-ttu-id="acd2e-163">특정 클라이언트와 연결된 세션 없이 서비스 인스턴스는 이 클라이언트가 보낸 이전 데이터를 알 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-163">Without a session associated with a specific client, the service instance has no way of knowing what previous data this client has sent.</span></span>  
  
 [!code-csharp[S_Service_Session#1](../../../samples/snippets/csharp/VS_Snippets_CFX/s_service_session/cs/service.cs#1)]
 [!code-vb[S_Service_Session#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_service_session/vb/service.vb#1)]  
  
 <span data-ttu-id="acd2e-164">서비스에서 세션을 허용하는 경우 클라이언트가 세션을 초기화하면 세션이 설정되어 사용됩니다. 그렇지 않으면 세션이 설정되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-164">If a service allows a session, then a session is established and used if the client initiates one; otherwise, no session is established.</span></span>  
  
## <a name="sessions-and-service-instances"></a><span data-ttu-id="acd2e-165">세션 및 서비스 인스턴스</span><span class="sxs-lookup"><span data-stu-id="acd2e-165">Sessions and Service Instances</span></span>  
 <span data-ttu-id="acd2e-166">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]에서 기본 인스턴스 만들기 동작을 사용하는 경우 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 클라이언트 개체 간의 모든 호출은 동일한 서비스 인스턴스에 의해 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-166">If you use the default instancing behavior in [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], all calls between a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object are handled by the same service instance.</span></span> <span data-ttu-id="acd2e-167">따라서 응용 프로그램 수준에서 세션은 로컬 호출 동작과 비슷하게 응용 프로그램 동작을 사용한다고 간주할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-167">Therefore, at the application level, you can think of a session as enabling application behavior similar to local call behavior.</span></span> <span data-ttu-id="acd2e-168">예를 들어, 로컬 개체를 만들 때 다음이 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-168">For example, when you create a local object:</span></span>  
  
-   <span data-ttu-id="acd2e-169">생성자가 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-169">A constructor is called.</span></span>  
  
-   <span data-ttu-id="acd2e-170">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 클라이언트 개체 참조에 대해 수행된 모든 후속 호출은 동일한 개체 인스턴스에 의해 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-170">All subsequent calls made to the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object reference are processed by the same object instance.</span></span>  
  
-   <span data-ttu-id="acd2e-171">개체 참조가 소멸되면 소멸자가 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-171">A destructor is called when the object reference is destroyed.</span></span>  
  
 <span data-ttu-id="acd2e-172">세션에서는 기본 서비스 인스턴스 동작이 사용되는 한 클라이언트와 서비스 간의 비슷한 동작을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-172">Sessions enable a similar behavior between clients and services as long as the default service instance behavior is used.</span></span> <span data-ttu-id="acd2e-173">서비스 계약에서 세션이 필요하거나 지원하는 경우 <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> 및 <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> 속성을 설정하여 하나 이상의 계약 작업을 세션 시작 또는 세션 종료로 표시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-173">If a service contract requires or supports sessions, one or more contract operations can be marked as initiating or terminating a session by setting the <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> and <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> properties.</span></span>  
  
 <span data-ttu-id="acd2e-174">*시작 작업* 은 새 세션의 첫 번째 작업으로 호출해야 하는 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-174">*Initiating operations* are those that must be called as the first operation of a new session.</span></span> <span data-ttu-id="acd2e-175">하나 이상의 작업을 호출한 후에만 시작 작업이 아닌 작업을 호출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-175">Non-initiating operations can be called only after at least one initiating operation has been called.</span></span> <span data-ttu-id="acd2e-176">따라서 서비스 인스턴스 시작에 해당하는 클라이언트에서 입력을 가져오도록 디자인된 시작 작업을 선언하여 해당 서비스에 맞는 특정 유형의 세션 생성자를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-176">You can therefore create a kind of session constructor for your service by declaring initiating operations designed to take input from clients appropriate to the beginning of the service instance.</span></span> <span data-ttu-id="acd2e-177">상태는 세션과 연결되지만 서비스 개체와 연결되지는 않습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-177">(The state is associated with the session, however, and not the service object.)</span></span>  
  
 <span data-ttu-id="acd2e-178">반대로*종료 작업*은 기존 세션에서 마지막 메시지로 호출해야 하는 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-178">*Terminating operations*, conversely, are those that must be called as the last message in an existing session.</span></span> <span data-ttu-id="acd2e-179">기본적으로 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 에서는 서비스와 연결된 세션이 닫힌 후에 서비스 개체 및 컨텍스트를 재활용합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-179">In the default case, [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] recycles the service object and its context after the session with which the service was associated is closed.</span></span> <span data-ttu-id="acd2e-180">따라서 서비스 인스턴스의 마지막에 해당하는 기능을 수행하도록 디자인된 종료 작업을 선언하여 특정 유형의 소멸자를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-180">You can, therefore, create a kind of destructor by declaring terminating operations designed to perform a function appropriate to the end of the service instance.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="acd2e-181">기본 동작은 로컬 생성자 및 소멸자와 비슷하지만 일치하지는 않습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-181">Although the default behavior bears a resemblance to local constructors and destructors, it is only a resemblance.</span></span> <span data-ttu-id="acd2e-182">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 서비스 작업은 시작 또는 종료 작업이거나 동시에 두 가지 작업일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-182">Any [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service operation can be an initiating or terminating operation, or both at the same time.</span></span> <span data-ttu-id="acd2e-183">또한 기본적으로 횟수와 순서에 관계없이 시작 작업을 호출할 수 있습니다. <xref:System.ServiceModel.InstanceContext?displayProperty=nameWithType> 개체를 조작하여 서비스 인스턴스의 수명을 명시적으로 지정하지 않는 한 세션이 설정되고 인스턴스와 연결되면 추가 세션이 생성되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-183">In addition, in the default case, initiating operations can be called any number of times in any order; no additional sessions are created once the session is established and associated with an instance unless you explicitly control the lifetime of the service instance (by manipulating the <xref:System.ServiceModel.InstanceContext?displayProperty=nameWithType> object).</span></span> <span data-ttu-id="acd2e-184">마지막으로 상태는 세션과 연결되고 서비스 개체와는 연결되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-184">Finally, the state is associated with the session and not the service object.</span></span>  
  
 <span data-ttu-id="acd2e-185">예를 들어, 앞의 예제에 사용된 `ICalculatorSession` 계약의 경우 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 클라이언트 개체가 먼저 다른 작업 이전에 `Clear` 작업을 호출하고, 이 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 클라이언트 개체가 있는 세션은 `Equals` 작업을 호출할 때 종료되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-185">For example, the `ICalculatorSession` contract used in the preceding example requires that the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object first call the `Clear` operation prior to any other operation and that the session with this [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object should terminate when it calls the `Equals` operation.</span></span> <span data-ttu-id="acd2e-186">다음 코드 예제에서는 이러한 요구 사항을 적용하는 계약을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-186">The following code example shows a contract that enforces these requirements.</span></span> <span data-ttu-id="acd2e-187">먼저`Clear` 를 호출하여 세션을 시작해야 하며, `Equals` 을 호출하면 세션이 끝납니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-187">`Clear` must be called first to initiate a session, and that session ends when `Equals` is called.</span></span>  
  
 [!code-csharp[SCA.IsInitiatingIsTerminating#1](../../../samples/snippets/csharp/VS_Snippets_CFX/sca.isinitiatingisterminating/cs/service.cs#1)]
 [!code-vb[SCA.IsInitiatingIsTerminating#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/sca.isinitiatingisterminating/vb/service.vb#1)]  
  
 <span data-ttu-id="acd2e-188">서비스는 클라이언트와 함께 세션을 시작하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-188">Services do not start sessions with clients.</span></span> <span data-ttu-id="acd2e-189">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 클라이언트 응용 프로그램에서 세션 기반 채널 수명과 세션 수명 사이에는 직접적인 관계가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-189">In [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client applications, a direct relationship exists between the lifetime of the session-based channel and the lifetime of the session itself.</span></span> <span data-ttu-id="acd2e-190">예를 들어, 클라이언트는 새 세션 기반 채널을 만들어 새 세션을 만들고 세션 기반 채널을 정상적으로 닫아서 기존 세션을 종료합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-190">As such, clients create new sessions by creating new session-based channels and tear down existing sessions by closing session-based channels gracefully.</span></span> <span data-ttu-id="acd2e-191">클라이언트는 다음 중 하나를 호출하여 서비스 끝점과 함께 세션을 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-191">A client starts a session with a service endpoint by calling one of the following:</span></span>  
  
-   <span data-ttu-id="acd2e-192"><xref:System.ServiceModel.ICommunicationObject.Open%2A?displayProperty=nameWithType>에 대한 호출을 통해 반환된 채널의 <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="acd2e-192"><xref:System.ServiceModel.ICommunicationObject.Open%2A?displayProperty=nameWithType> on the channel returned by a call to <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>.</span></span>  
  
-   <span data-ttu-id="acd2e-193"><xref:System.ServiceModel.ClientBase%601.Open%2A?displayProperty=nameWithType>에 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 에 의해 생성 된 클라이언트 개체는 [ServiceModel Metadata 유틸리티 도구 (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-193"><xref:System.ServiceModel.ClientBase%601.Open%2A?displayProperty=nameWithType> on the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span>  
  
-   <span data-ttu-id="acd2e-194">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 클라이언트 개체 유형에 대한 시작 작업(기본적으로 모든 작업이 시작 작업)</span><span class="sxs-lookup"><span data-stu-id="acd2e-194">An initiating operation on either type of [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object (by default, all operations are initiating).</span></span> <span data-ttu-id="acd2e-195">첫 번째 작업을 호출하면 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 클라이언트 개체가 자동으로 채널을 열고 세션을 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-195">When the first operation is called, the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object automatically opens the channel and initiates a session.</span></span>  
  
 <span data-ttu-id="acd2e-196">일반적으로 클라이언트는 다음 중 하나를 호출하여 서비스 끝점과 함께 세션을 종료합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-196">Typically a client ends a session with a service endpoint by calling one of the following:</span></span>  
  
-   <span data-ttu-id="acd2e-197"><xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType>에 대한 호출을 통해 반환된 채널의 <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="acd2e-197"><xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType> on the channel returned by a call to <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>.</span></span>  
  
-   <span data-ttu-id="acd2e-198">Svcutil.exe에 의해 생성된 <xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType> 클라이언트 개체의 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]</span><span class="sxs-lookup"><span data-stu-id="acd2e-198"><xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType> on the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object generated by Svcutil.exe.</span></span>  
  
-   <span data-ttu-id="acd2e-199">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 클라이언트 개체 유형에 대한 종료 작업(기본적으로 작업은 종료 작업이 아니며 계약은 명시적으로 종료 작업을 지정해야 함)</span><span class="sxs-lookup"><span data-stu-id="acd2e-199">A terminating operation on either type of [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object (by default, no operations are terminating; the contract must explicitly specify a terminating operation).</span></span> <span data-ttu-id="acd2e-200">첫 번째 작업을 호출하면 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 클라이언트 개체가 자동으로 채널을 열고 세션을 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-200">When the first operation is called, the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object automatically opens the channel and initiates a session.</span></span>  
  
 <span data-ttu-id="acd2e-201">예를 들어, [How to: Create a Service That Requires Sessions](../../../docs/framework/wcf/feature-details/how-to-create-a-service-that-requires-sessions.md) , [Default Service Behavior](../../../docs/framework/wcf/samples/default-service-behavior.md) 및 [Instancing](../../../docs/framework/wcf/samples/instancing.md) 샘플을 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="acd2e-201">For examples, see [How to: Create a Service That Requires Sessions](../../../docs/framework/wcf/feature-details/how-to-create-a-service-that-requires-sessions.md) as well as the [Default Service Behavior](../../../docs/framework/wcf/samples/default-service-behavior.md) and [Instancing](../../../docs/framework/wcf/samples/instancing.md) samples.</span></span>  
  
 [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="acd2e-202">클라이언트 및 세션에 참조 [WCF 클라이언트를 사용 하 여 액세스 서비스](../../../docs/framework/wcf/feature-details/accessing-services-using-a-client.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-202"> clients and sessions, see [Accessing Services Using a WCF Client](../../../docs/framework/wcf/feature-details/accessing-services-using-a-client.md).</span></span>  
  
## <a name="sessions-interact-with-instancecontext-settings"></a><span data-ttu-id="acd2e-203">세션이 InstanceContext 설정과 상호 작용</span><span class="sxs-lookup"><span data-stu-id="acd2e-203">Sessions Interact with InstanceContext Settings</span></span>  
 <span data-ttu-id="acd2e-204">계약의 <xref:System.ServiceModel.SessionMode> 열거형과 <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> 속성 간에 상호 작용이 있으며, 이를 통해 채널과 특정 서비스 개체 간의 연결을 제어합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-204">There is an interaction between the <xref:System.ServiceModel.SessionMode> enumeration in a contract and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property, which controls the association between channels and specific service objects.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="acd2e-205">[세션, 인스턴스 및 동시성](../../../docs/framework/wcf/feature-details/sessions-instancing-and-concurrency.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-205"> [Sessions, Instancing, and Concurrency](../../../docs/framework/wcf/feature-details/sessions-instancing-and-concurrency.md).</span></span>  
  
### <a name="sharing-instancecontext-objects"></a><span data-ttu-id="acd2e-206">InstanceContext 개체 공유</span><span class="sxs-lookup"><span data-stu-id="acd2e-206">Sharing InstanceContext Objects</span></span>  
 <span data-ttu-id="acd2e-207">또한 해당 연결을 직접 수행하여 <xref:System.ServiceModel.InstanceContext> 개체와 연결된 세션 기반 채널 또는 호출을 제어할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-207">You can also control which session-based channel or call is associated with which <xref:System.ServiceModel.InstanceContext> object by performing that association yourself.</span></span> <span data-ttu-id="acd2e-208">전체 예제는 [InstanceContextSharing](http://msdn.microsoft.com/en-us/4a6a46d7-b7d7-4bb5-a0dd-03ffa3cbc230)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="acd2e-208">For a complete example, see [InstanceContextSharing](http://msdn.microsoft.com/en-us/4a6a46d7-b7d7-4bb5-a0dd-03ffa3cbc230).</span></span>  
  
## <a name="sessions-and-streaming"></a><span data-ttu-id="acd2e-209">세션 및 스트리밍</span><span class="sxs-lookup"><span data-stu-id="acd2e-209">Sessions and Streaming</span></span>  
 <span data-ttu-id="acd2e-210">전송할 데이터가 많은 경우 버퍼링을 수행하고 메모리 내에서 메시지 전체를 처리하는 기본 동작 대신 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 의 스트리밍 전송 모드를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-210">When you have a large amount of data to transfer, the streaming transfer mode in [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] is a feasible alternative to the default behavior of buffering and processing messages in memory in their entirety.</span></span> <span data-ttu-id="acd2e-211">세션 기반 바인딩을 통해 스트리밍 호출이 수행될 경우 예기치 못한 동작이 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-211">You may get unexpected behavior when streaming calls with a session-based binding.</span></span> <span data-ttu-id="acd2e-212">모든 스트리밍 호출은 사용 중인 바인딩이 세션을 사용하도록 구성된 경우에도 세션을 지원하지 않는 하나의 채널(데이터그램 채널)을 통해 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-212">All streaming calls are made through a single channel (the datagram channel) that does not support sessions even if the binding being used is configured to use sessions.</span></span> <span data-ttu-id="acd2e-213">여러 클라이언트에서 세션 기반 바인딩을 통해 동일한 서비스 개체에 대한 스트리밍 호출을 수행하고, 서비스 개체의 동시성 모드가 단일 모드로 설정되고, 서비스 개체의 인스턴스 컨텍스트 모드가 `PerSession`으로 설정된 경우, 모든 호출은 데이터그램 채널을 통해 수행되므로 한 번에 하나의 호출만 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-213">If multiple clients make streaming calls to the same service object over a session-based binding, and the service object's concurrency mode is set to single and its instance context mode is set to `PerSession`, all calls must go through the datagram channel and so only one call is processed at a time.</span></span> <span data-ttu-id="acd2e-214">하나 이상의 클라이언트의 제한 시간이 초과될 수 있습니다. 이 문제는 서비스 개체의 `InstanceContextMode` 를 `PerCall` 로 설정하거나 동시성 모드를 다중 모드로 설정하여 해결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-214">One or more clients may then time out. You can work around this issue by either setting the service object's `InstanceContextMode` to `PerCall` or Concurrency to multiple.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="acd2e-215">이 경우 사용할 수 있는 "세션"이 하나이기 때문에 MaxConcurrentSessions에는 영향을 주지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="acd2e-215">MaxConcurrentSessions have no effect in this case because there is only one "session" available.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="acd2e-216">참고 항목</span><span class="sxs-lookup"><span data-stu-id="acd2e-216">See Also</span></span>  
 <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A>  
 <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A>
