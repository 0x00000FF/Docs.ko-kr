---
title: 상관 관계 개요
ms.date: 03/30/2017
ms.assetid: edcc0315-5d26-44d6-a36d-ea554c418e9f
ms.openlocfilehash: 8ac5d39866b23bc134f009fdb0df6ebf56c6d234
ms.sourcegitcommit: ad99773e5e45068ce03b99518008397e1299e0d1
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 09/22/2018
ms.locfileid: "46696484"
---
# <a name="correlation-overview"></a><span data-ttu-id="89b91-102">상관 관계 개요</span><span class="sxs-lookup"><span data-stu-id="89b91-102">Correlation Overview</span></span>
<span data-ttu-id="89b91-103">상관 관계는 워크플로 서비스 메시지를 서로 연결하거나 응용 프로그램 상태와 연결하는 메커니즘입니다. 예를 들어 응답을 초기 요청과 연결하거나 특정 주문 ID를 주문 처리 워크플로의 지속된 상태와 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-103">Correlation is the mechanism for relating workflow service messages to each other or to the application instance state, such as a reply to an initial request, or a particular order ID to the persisted state of an order-processing workflow.</span></span> <span data-ttu-id="89b91-104">이 항목에서는 상관 관계에 대해 간략하게 설명하고</span><span class="sxs-lookup"><span data-stu-id="89b91-104">This topic provides an overview of correlation.</span></span> <span data-ttu-id="89b91-105">이 단원의 다른 항목에서는 각 상관 관계 형식에 대해 자세히 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-105">The other topics in this section provide additional information for each type of correlation.</span></span>  
  
## <a name="types-of-correlation"></a><span data-ttu-id="89b91-106">상관 관계 형식</span><span class="sxs-lookup"><span data-stu-id="89b91-106">Types of Correlation</span></span>  
 <span data-ttu-id="89b91-107">상관 관계는 프로토콜 기반 또는 내용 기반일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-107">Correlation can be protocol-based or content-based.</span></span> <span data-ttu-id="89b91-108">프로토콜 기반 상관 관계는 메시지 배달 인프라에서 제공하는 데이터를 사용하여 메시지 간의 매핑을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-108">Protocol-based correlations use data provided by the message delivery infrastructure to provide the mapping between messages.</span></span> <span data-ttu-id="89b91-109">프로토콜 기반 상관 관계를 사용하여 상호 관련된 메시지는 메모리에 있는 개체(예: <xref:System.ServiceModel.Channels.RequestContext>)를 사용하거나 전송 프로토콜에서 제공하는 토큰에 의해 서로 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-109">Messages that are correlated using protocol-based correlation are related to each other using an object in memory, such as a <xref:System.ServiceModel.Channels.RequestContext>, or by a token provided by the transport protocol.</span></span> <span data-ttu-id="89b91-110">내용 기반 상관 관계는 응용 프로그램에서 지정한 데이터를 사용하여 메시지를 서로 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-110">Content-based correlations relate messages to each other using application-specified data.</span></span> <span data-ttu-id="89b91-111">내용 기반 상관 관계를 사용하여 상호 관련된 메시지는 해당 메시지에 있는 일부 응용 프로그램 정의 데이터(예: 고객 번호)를 사용하여 서로 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-111">Messages that are correlated using content-based correlation are related to each other by some application-defined data in the message, such as a customer number.</span></span>  
  
 <span data-ttu-id="89b91-112">상관 관계에 참여하는 작업은 <xref:System.ServiceModel.Activities.CorrelationHandle>을 사용하여 메시징 작업을 서로 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-112">Activities that participate in correlation use a <xref:System.ServiceModel.Activities.CorrelationHandle> to tie the messaging activities together.</span></span> <span data-ttu-id="89b91-113">예를 들어 서비스를 호출하는 데 사용되는 <xref:System.ServiceModel.Activities.Send>와 서비스로부터 콜백을 받은 데 사용되는 후속 <xref:System.ServiceModel.Activities.Receive>는 동일한 <xref:System.ServiceModel.Activities.CorrelationHandle>을 공유합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-113">For example, a <xref:System.ServiceModel.Activities.Send> that is used to call a service and a subsequent <xref:System.ServiceModel.Activities.Receive> that is used to receive a callback from the service, share the same <xref:System.ServiceModel.Activities.CorrelationHandle>.</span></span> <span data-ttu-id="89b91-114">이 기본 패턴은 내용 기반 상관 관계와 프로토콜 상관 관계에서 모두 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-114">This basic pattern is used whether the correlation is content based or protocol based.</span></span> <span data-ttu-id="89b91-115">즉, 각 작업에 상관 관계 핸들을 명시적으로 설정하거나 <xref:System.ServiceModel.Activities.CorrelationScope> 작업에 작업을 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-115">The correlation handle can be explicitly set on each activity or the activities can be contained in a <xref:System.ServiceModel.Activities.CorrelationScope> activity.</span></span> <span data-ttu-id="89b91-116"><xref:System.ServiceModel.Activities.CorrelationScope>에 포함된 작업은 <xref:System.ServiceModel.Activities.CorrelationScope>를 통해 해당 상관 관계 핸들을 관리하기 때문에 <xref:System.ServiceModel.Activities.CorrelationHandle>을 명시적으로 설정할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-116">Activities contained in a <xref:System.ServiceModel.Activities.CorrelationScope> have their correlation handles managed by the <xref:System.ServiceModel.Activities.CorrelationScope> and do not require the <xref:System.ServiceModel.Activities.CorrelationHandle> to be explicitly set.</span></span> <span data-ttu-id="89b91-117"><xref:System.ServiceModel.Activities.CorrelationScope> 범위는 요청-회신 상관 관계 및 하나의 추가 상관 관계 형식에 <xref:System.ServiceModel.Activities.CorrelationHandle> 관리를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-117">A <xref:System.ServiceModel.Activities.CorrelationScope> scope provides <xref:System.ServiceModel.Activities.CorrelationHandle> management for a request-reply correlation and one additional correlation type.</span></span> <span data-ttu-id="89b91-118"><xref:System.ServiceModel.Activities.WorkflowServiceHost>를 사용하여 호스트된 워크플로 서비스는 <xref:System.ServiceModel.Activities.CorrelationScope> 작업과 동일한 기본 상관 관계 관리를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-118">Workflow services hosted using <xref:System.ServiceModel.Activities.WorkflowServiceHost> have the same default correlation management as the <xref:System.ServiceModel.Activities.CorrelationScope> activity.</span></span> <span data-ttu-id="89b91-119">일반적으로 이 기본 상관 관계 관리는 두 개의 <xref:System.ServiceModel.Activities.CorrelationScope> 작업이 나란히 있거나 두 개의 <xref:System.ServiceModel.Activities.CorrelationHandle> 작업 뒤에 두 개의 <xref:System.ServiceModel.Activities.Receive> 작업이 있는 것과 같이 여러 메시징 작업이 나란히 있거나 겹치지 않는 한 대부분의 경우에 <xref:System.ServiceModel.Activities.Send> 또는 워크플로 서비스의 메시징 작업에 해당 <xref:System.ServiceModel.Activities.Receive> 집합이 필요 없음을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-119">This default correlation management generally means that in many scenarios, messaging activities in a <xref:System.ServiceModel.Activities.CorrelationScope> or a workflow service do not require their <xref:System.ServiceModel.Activities.CorrelationHandle> set unless multiple messaging activities are in parallel or overlap, such as two <xref:System.ServiceModel.Activities.Receive> activities in parallel, or two <xref:System.ServiceModel.Activities.Send> activities followed by two <xref:System.ServiceModel.Activities.Receive> activities.</span></span> <span data-ttu-id="89b91-120">기본 상관 관계는 이 단원에서 각 상관 관계 형식에 대해 설명하는 항목에서 자세히 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-120">More information about default correlation is provided in the topics in this section that cover each specific type of correlation.</span></span> <span data-ttu-id="89b91-121">메시징 활동에 대 한 자세한 내용은 참조 하세요. [메시징 활동](../../../../docs/framework/wcf/feature-details/messaging-activities.md) 하 고 [방법: 메시징 작업을 사용 하 여 워크플로 서비스 만들기](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="89b91-121">For more information about messaging activities see [Messaging Activities](../../../../docs/framework/wcf/feature-details/messaging-activities.md) and [How to: Create a Workflow Service with Messaging Activities](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md).</span></span>  
  
## <a name="protocol-based-correlation"></a><span data-ttu-id="89b91-122">프로토콜 기반 상관 관계</span><span class="sxs-lookup"><span data-stu-id="89b91-122">Protocol-Based Correlation</span></span>  
 <span data-ttu-id="89b91-123">프로토콜 기반 상관 관계는 전송 메커니즘을 사용하여 메시지를 서로 연결하거나 적절한 인스턴스와 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-123">Protocol-based correlation uses the transport mechanism to relate messages to each other and the appropriate instance.</span></span> <span data-ttu-id="89b91-124">일부 시스템 제공 프로토콜 상관 관계에는 요청-회신 상관 관계와 컨텍스트 기반 상관 관계가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-124">Some system-provided protocol correlations include request-reply correlation and context-based correlation.</span></span> <span data-ttu-id="89b91-125">요청-회신 상관 관계는 <xref:System.ServiceModel.Activities.Send>와 쌍을 이루는 <xref:System.ServiceModel.Activities.ReceiveReply> 또는 <xref:System.ServiceModel.Activities.Receive>와 쌍을 이루는 <xref:System.ServiceModel.Activities.SendReply>처럼 한 쌍의 메시징 작업을 상호 연결하여 양방향 작업을 만드는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-125">A request-reply correlation is used to correlate a single pair of messaging activities to form a two-way operation, such as a <xref:System.ServiceModel.Activities.Send> paired with a <xref:System.ServiceModel.Activities.ReceiveReply>, or a <xref:System.ServiceModel.Activities.Receive> paired with a <xref:System.ServiceModel.Activities.SendReply>.</span></span> <span data-ttu-id="89b91-126">[!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] Workflow Designer에서는 이러한 패턴을 빠르게 구현할 수 있도록 작업 템플릿 집합도 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-126">The [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] Workflow Designer also provides a set of activity templates to quickly implement this pattern.</span></span> <span data-ttu-id="89b91-127">컨텍스트 기반 상관 관계에 설명 된 컨텍스트 교환 메커니즘을 기반으로 합니다 [.NET Context Exchange Protocol Specification](https://go.microsoft.com/fwlink/?LinkID=166059)합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-127">A context-based correlation is based on the context exchange mechanism described in the [.NET Context Exchange Protocol Specification](https://go.microsoft.com/fwlink/?LinkID=166059).</span></span> <span data-ttu-id="89b91-128">컨텍스트 상관 관계를 사용하려면 엔드포인트에서 <xref:System.ServiceModel.BasicHttpContextBinding>, <xref:System.ServiceModel.WSHttpContextBinding> 또는 <xref:System.ServiceModel.NetTcpContextBinding>을 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-128">To use context-based correlation, a context-based binding such as <xref:System.ServiceModel.BasicHttpContextBinding>, <xref:System.ServiceModel.WSHttpContextBinding> or <xref:System.ServiceModel.NetTcpContextBinding> must be used on the endpoint.</span></span>  
  
 <span data-ttu-id="89b91-129">프로토콜 상관 관계에 대 한 자세한 내용은 참조 하세요. [컨텍스트 교환](../../../../docs/framework/wcf/feature-details/context-exchange-correlation.md)하십시오 [영 속 이중](../../../../docs/framework/wcf/feature-details/durable-duplex-correlation.md), 및 [요청-회신](../../../../docs/framework/wcf/feature-details/request-reply-correlation.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-129">For more information about protocol correlation, see [Context Exchange](../../../../docs/framework/wcf/feature-details/context-exchange-correlation.md), [Durable Duplex](../../../../docs/framework/wcf/feature-details/durable-duplex-correlation.md), and [Request-Reply](../../../../docs/framework/wcf/feature-details/request-reply-correlation.md).</span></span> <span data-ttu-id="89b91-130">사용에 대 한 자세한 내용은 합니다 [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] Workflow Designer 작업 템플릿을 참조 하세요 [메시징 작업](../../../../docs/framework/wcf/feature-details/messaging-activities.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-130">For more information about using the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] Workflow Designer activity templates, see [Messaging Activities](../../../../docs/framework/wcf/feature-details/messaging-activities.md).</span></span> <span data-ttu-id="89b91-131">샘플 코드에 대 한 참조를 [영 속 이중 &#91;WF 샘플&#93; ](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md) 하 고 [NetContextExchangeCorrelation](https://msdn.microsoft.com/library/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf) 샘플입니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-131">For sample code, see the [Durable Duplex &#91;WF Samples&#93;](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md) and [NetContextExchangeCorrelation](https://msdn.microsoft.com/library/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf) samples.</span></span>  
  
## <a name="content-based-correlation"></a><span data-ttu-id="89b91-132">내용 기반 상관 관계</span><span class="sxs-lookup"><span data-stu-id="89b91-132">Content-Based Correlation</span></span>  
 <span data-ttu-id="89b91-133">내용 기반 상관 관계는 메시지에 있는 일부 정보를 사용하여 해당 메시지를 특정 인스턴스와 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-133">Content-based correlation uses some piece of information in the message to associate it to a particular instance.</span></span> <span data-ttu-id="89b91-134">프로토콜 기반 상관 관계와 달리 내용 기반 상관 관계는 응용 프로그램 작성자가 연결된 각 메시지에서 이러한 데이터를 찾을 수 있는 위치를 명시적으로 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-134">Unlike protocol-based correlation, content-based correlation requires the application author to explicitly state where this data can be found in each related message.</span></span> <span data-ttu-id="89b91-135">내용 기반 상관 관계를 사용하는 작업은 <xref:System.ServiceModel.MessageQuerySet>을 사용하여 이 메시지 데이터를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-135">Activities that use content-based correlation specify this message data by using a <xref:System.ServiceModel.MessageQuerySet>.</span></span> <span data-ttu-id="89b91-136">내용 기반 상관 관계는 <xref:System.ServiceModel.BasicHttpContextBinding>과 같은 컨텍스트 바인딩 중 하나를 사용하지 않는 서비스와 통신할 때 유용합니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-136">Content-based correlation is useful when communicating with services that do not use one of the context bindings such as <xref:System.ServiceModel.BasicHttpContextBinding>.</span></span> <span data-ttu-id="89b91-137">내용 기반 상관 관계에 대 한 자세한 내용은 참조 하세요. [콘텐츠 기반](../../../../docs/framework/wcf/feature-details/content-based-correlation.md)입니다.</span><span class="sxs-lookup"><span data-stu-id="89b91-137">For more information about content-based correlation, see [Content Based](../../../../docs/framework/wcf/feature-details/content-based-correlation.md).</span></span> <span data-ttu-id="89b91-138">샘플 코드에 대 한 참조를 [내용 기반 상관 관계](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md) 하 고 [계산기 상관 관계가 지정 된](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md) 샘플.</span><span class="sxs-lookup"><span data-stu-id="89b91-138">For sample code, see the [Content-Based Correlation](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md) and [Correlated Calculator](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md) samples.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="89b91-139">참고 항목</span><span class="sxs-lookup"><span data-stu-id="89b91-139">See Also</span></span>  
 [<span data-ttu-id="89b91-140">내용 기반 상관 관계</span><span class="sxs-lookup"><span data-stu-id="89b91-140">Content-Based Correlation</span></span>](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md)  
 [<span data-ttu-id="89b91-141">상호 관련된 계산기</span><span class="sxs-lookup"><span data-stu-id="89b91-141">Correlated Calculator</span></span>](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md)  
 [<span data-ttu-id="89b91-142">영 속 이중 &#91;WF 샘플&#93;</span><span class="sxs-lookup"><span data-stu-id="89b91-142">Durable Duplex &#91;WF Samples&#93;</span></span>](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md)  
 [<span data-ttu-id="89b91-143">NetContextExchangeCorrelation</span><span class="sxs-lookup"><span data-stu-id="89b91-143">NetContextExchangeCorrelation</span></span>](https://msdn.microsoft.com/library/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf)
