---
title: Net.TCP 포트 공유
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- port activation [WCF]
- port sharing [WCF]
ms.assetid: f13692ee-a179-4439-ae72-50db9534eded
caps.latest.revision: 14
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: c7abf272cb1d069b0fbdcd561256580de5a82c29
ms.sourcegitcommit: 03ee570f6f528a7d23a4221dcb26a9498edbdf8c
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/28/2018
---
# <a name="nettcp-port-sharing"></a><span data-ttu-id="e4434-102">Net.TCP 포트 공유</span><span class="sxs-lookup"><span data-stu-id="e4434-102">Net.TCP Port Sharing</span></span>
[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]<span data-ttu-id="e4434-103">에서는 고성능 통신을 위한 새로운 TCP 기반 네트워크 프로토콜(net.tcp://)을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-103"> provides a new TCP-based network protocol (net.tcp://) for high-performance communication.</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="e4434-104">에서는 여러 사용자 프로세스 간에 net.tcp 포트를 공유할 수 있는 새 시스템 구성 요소인 Net.TCP Port Sharing Service도 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-104"> also introduces a new system component, the Net.TCP Port Sharing Service that enables net.tcp ports to be shared across multiple user processes.</span></span>  
  
## <a name="background-and-motivation"></a><span data-ttu-id="e4434-105">배경 및 동기</span><span class="sxs-lookup"><span data-stu-id="e4434-105">Background and Motivation</span></span>  
 <span data-ttu-id="e4434-106">TCP/IP 프로토콜이 처음에 도입되었을 때는 소수의 응용 프로그램 프로토콜에만 사용되었습니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-106">When the TCP/IP protocol was first introduced, only a small number of application protocols made use of it.</span></span> <span data-ttu-id="e4434-107">TCP/IP 사용 포트 번호는 고유 16비트 포트 번호를 각 응용 프로그램 프로토콜에 할당하므로 응용 프로그램에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-107">TCP/IP used port numbers to differentiate between applications by assigning a unique 16-bit port number to each application protocol.</span></span> <span data-ttu-id="e4434-108">예를 들어 HTTP 트래픽은 TCP 포트 80을, SMTP는 TCP 포트 25를, FTP는 TCP 포트 20 및 21을 사용하도록 표준화되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-108">For example, HTTP traffic today is standardized to use TCP port 80, SMTP uses TCP port 25, and FTP uses TCP ports 20 and 21.</span></span> <span data-ttu-id="e4434-109">TCP를 전송 프로토콜로 사용하는 다른 응용 프로그램은 규칙에 따라 또는 공식 표준화를 통해 사용 가능한 다른 포트 번호를 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-109">Other applications using TCP as a transport can choose another available port number, either by convention or through formal standardization.</span></span>  
  
 <span data-ttu-id="e4434-110">응용 프로그램을 서로 구분하기 위해 포트 번호를 사용하면 보안 문제가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-110">Using port numbers to distinguish between applications had security problems.</span></span> <span data-ttu-id="e4434-111">일반적으로 방화벽은 몇 개의 잘 알려진 진입점을 제외하고 모든 포트의 TCP 트래픽을 차단하도록 구성되므로 비표준 포트를 사용하는 응용 프로그램을 배포하는 것은 기업 및 개인 방화벽으로 인해 복잡하거나 불가능할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-111">Firewalls are generally configured to block TCP traffic on all ports except for a few well-known entry points, so deploying an application that uses a non-standard port is often complicated or even impossible due to the presence of corporate and personal firewalls.</span></span> <span data-ttu-id="e4434-112">이미 허용된 잘 알려진 표준 포트를 통해 통신할 수 있는 응용 프로그램의 경우 공격을 받을 수 있는 부분이 줄어듭니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-112">Applications that can communicate over standard, well-known ports that are already permitted, reduce the external attack surface.</span></span> <span data-ttu-id="e4434-113">대부분의 방화벽은 TCP 포트 80에서 트래픽을 허용하도록 기본적으로 구성되기 때문에 여러 네트워크 응용 프로그램에서 HTTP 프로토콜을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-113">Many network applications make use of the HTTP protocol because most firewalls are configured by default to allow traffic on TCP port 80.</span></span>  
  
 <span data-ttu-id="e4434-114">여러 HTTP 응용 프로그램의 트래픽이 단일 TCP 포트에 멀티플렉싱되는 HTTP.SYS 모델이 Windows 플랫폼의 표준이 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-114">The HTTP.SYS model in which traffic for many different HTTP applications is multiplexed onto a single TCP port has become standard on the Windows platform.</span></span> <span data-ttu-id="e4434-115">따라서 응용 프로그램 개발자가 네트워크를 사용할 수 있는 새 응용 프로그램을 빌드하는 데 필요한 배포 비용을 최소화할 수 있도록 하는 동시에 방화벽 관리자를 위한 공통 제어 지점을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-115">This provides a common point of control for firewall administrators while allowing application developers to minimize the deployment cost of building new applications that can make use of the network.</span></span>  
  
 <span data-ttu-id="e4434-116">여러 HTTP 응용 프로그램 간의 포트를 공유할 수 있는 기능은 IIS(인터넷 정보 서비스)의 오래된 기능 중 하나입니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-116">The ability to share ports across multiple HTTP applications has long been a feature of Internet Information Services (IIS).</span></span> <span data-ttu-id="e4434-117">그러나 이 인프라가 완전히 일반화된 것은 [!INCLUDE[iis601](../../../../includes/iis601-md.md)]과 함께 HTTP.SYS(커널 모드 HTTP 프로토콜 수신기)가 도입된 이후부터입니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-117">However, it was only with the introduction of HTTP.SYS (the kernel-mode HTTP protocol listener) with [!INCLUDE[iis601](../../../../includes/iis601-md.md)] that this infrastructure was fully generalized.</span></span> <span data-ttu-id="e4434-118">실제로 HTTP.SYS를 사용하면 임의의 사용자 프로세스에서 HTTP 트래픽 전용 TCP 포트를 공유할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-118">In effect, HTTP.SYS allows arbitrary user processes to share the TCP ports dedicated to HTTP traffic.</span></span> <span data-ttu-id="e4434-119">이 기능을 사용하면 동일한 실제 컴퓨터에서 여러 HTTP 응용 프로그램을 별도의 격리 프로세스로 함께 사용할 수 있고, TCP 포트 80을 통해 트래픽을 보내고 받는 데 필요한 네트워크 인프라를 공유할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-119">This capability allows many HTTP applications to coexist on the same physical machine in separate, isolated processes while sharing the network infrastructure required to send and receive traffic over TCP port 80.</span></span> <span data-ttu-id="e4434-120">Net.TCP Port Sharing Service를 통해 net.tcp 응용 프로그램에서 동일한 형식의 포트를 공유할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-120">The Net.TCP Port Sharing Service enables the same type of port sharing for net.tcp applications.</span></span>  
  
## <a name="port-sharing-architecture"></a><span data-ttu-id="e4434-121">포트 공유 아키텍처</span><span class="sxs-lookup"><span data-stu-id="e4434-121">Port Sharing Architecture</span></span>  
 <span data-ttu-id="e4434-122">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]의 포트 공유 아키텍처에는 다음과 같은 세 가지 주요 구성 요소가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-122">The Port Sharing architecture in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] has three main components:</span></span>  
  
-   <span data-ttu-id="e4434-123">작업자 프로세스: 공유 포트를 사용하여 net.tcp://를 통해 통신하는 모든 프로세스를 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-123">A Worker Process: Any process communicating over net.tcp:// using shared ports.</span></span>  
  
-   <span data-ttu-id="e4434-124">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] TCP 전송: net.tcp:// 프로토콜을 구현합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-124">The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] TCP transport: Implements the net.tcp:// protocol.</span></span>  
  
-   <span data-ttu-id="e4434-125">Net.TCP Port Sharing Service: 여러 작업자 프로세스에서 동일한 TCP 포트를 공유할 수 있도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-125">The Net.TCP Port Sharing Service: Allows many worker processes to share the same TCP port.</span></span>  
  
 <span data-ttu-id="e4434-126">Net.TCP Port Sharing Service는 이 서비스를 통해 연결되는 사용자 프로세스 대신 net.tcp:// 연결을 수락하는 사용자 모드 Windows 서비스입니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-126">The Net.TCP Port Sharing Service is a user-mode Windows service that accepts net.tcp:// connections on behalf of the worker processes that connect through it.</span></span> <span data-ttu-id="e4434-127">소켓 연결이 도착하면 포트 공유 서비스는 대상 주소를 가져오기 위해 들어오는 메시지 스트림을 검사합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-127">When a socket connection arrives, the port sharing service inspects the incoming message stream to obtain its destination address.</span></span> <span data-ttu-id="e4434-128">포트 공유 서비스는 이 주소에 따라 데이터 스트림을 최종적으로 처리하는 응용 프로그램으로 라우팅할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-128">Based on this address, the port sharing service can route the data stream to the application that ultimately processes it.</span></span>  
  
 <span data-ttu-id="e4434-129">net.tcp:// 포트 공유를 사용하는 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 서비스가 열릴 때 응용 프로그램 프로세스에서 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] TCP 전송 인프라는 TCP 소켓을 직접 열지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-129">When a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service that uses net.tcp:// port sharing opens, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] TCP transport infrastructure does not directly open a TCP socket in the application process.</span></span> <span data-ttu-id="e4434-130">대신 전송 인프라는 서비스의 기본 주소 URI(Uniform Resource Identifier)를 Net.TCP Port Sharing Service를 사용하여 등록하고 포트 공유 서비스가 대신 메시지를 수신 대기하도록 기다립니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-130">Instead, the transport infrastructure registers the service’s base address Uniform Resource Identifier (URI) with the Net.TCP Port Sharing Service and waits for the port sharing service to listen for messages on its behalf.</span></span>  <span data-ttu-id="e4434-131">포트 공유 서비스는 메시지가 도착하면 응용 프로그램 서비스에 주소가 지정된 메시지를 디스패치합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-131">The port sharing service dispatches messages addressed to the application service as they arrive.</span></span>  
  
## <a name="installing-port-sharing"></a><span data-ttu-id="e4434-132">포트 공유 설치</span><span class="sxs-lookup"><span data-stu-id="e4434-132">Installing Port Sharing</span></span>  
 <span data-ttu-id="e4434-133">Net.TCP Port Sharing Service는 [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]을 지원하는 모든 운영 체제에서 사용할 수 있지만 기본적으로 서비스가 활성화되어 있지는 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-133">The Net.TCP Port Sharing Service is available on all operating systems that support [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], but the service is not enabled by default.</span></span> <span data-ttu-id="e4434-134">보안 예방 조치로 관리자는 Net.TCP Port Sharing Service를 처음 사용하기 전에 수동으로 활성화해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-134">As a security precaution, an administrator must manually enable the Net.TCP Port Sharing Service prior to first use.</span></span> <span data-ttu-id="e4434-135">Net.TCP Port Sharing Service는 포트 공유 서비스에서 소유한 네트워크 소켓의 여러 특징을 조작할 수 있는 구성 옵션을 노출합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-135">The Net.TCP Port Sharing Service exposes configuration options that allow you to manipulate several characteristics of the network sockets owned by the port sharing service.</span></span> <span data-ttu-id="e4434-136">자세한 내용은 참조 [하는 방법: Net.TCP Port Sharing Service를 사용 하도록 설정](../../../../docs/framework/wcf/feature-details/how-to-enable-the-net-tcp-port-sharing-service.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-136">For more information, see [How to: Enable the Net.TCP Port Sharing Service](../../../../docs/framework/wcf/feature-details/how-to-enable-the-net-tcp-port-sharing-service.md).</span></span>  
  
## <a name="using-nettcp-port-sharing-in-an-application"></a><span data-ttu-id="e4434-137">응용 프로그램에서 Net.tcp 포트 공유 사용</span><span class="sxs-lookup"><span data-stu-id="e4434-137">Using Net.tcp Port Sharing in an Application</span></span>  
 <span data-ttu-id="e4434-138">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 응용 프로그램에서 net.tcp:// 포트 공유를 사용하는 가장 쉬운 방법은 <xref:System.ServiceModel.NetTcpBinding>을 사용하여 서비스를 노출한 다음 <xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A> 속성을 사용하여 Net.TCP Port Sharing Service를 활성화하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-138">The easiest way to use net.tcp:// port sharing in your [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] application is to expose a service using the <xref:System.ServiceModel.NetTcpBinding> and then to enable Net.TCP Port Sharing Service using the <xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A> property.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e4434-139"> 이 작업을 수행 하 [하는 방법: WCF 서비스를 사용 하 여 포트 공유 구성](../../../../docs/framework/wcf/feature-details/how-to-configure-a-wcf-service-to-use-port-sharing.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-139"> how to do this, see [How to: Configure a WCF Service to Use Port Sharing](../../../../docs/framework/wcf/feature-details/how-to-configure-a-wcf-service-to-use-port-sharing.md).</span></span>  
  
## <a name="security-implications-of-port-sharing"></a><span data-ttu-id="e4434-140">포트 공유 시 보안 관련 문제</span><span class="sxs-lookup"><span data-stu-id="e4434-140">Security Implications of Port Sharing</span></span>  
 <span data-ttu-id="e4434-141">Net.TCP Port Sharing Service에서는 응용 프로그램과 네트워크 간의 처리 계층을 제공하지만 포트 공유를 사용하는 응용 프로그램의 경우 네트워크에서 직접 수신 대기하고 있는 것처럼 보안이 설정되어 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-141">Although the Net.TCP Port Sharing Service provides a layer of processing between applications and the network, applications that use port sharing should still be secured as if they were directly listening on the network.</span></span> <span data-ttu-id="e4434-142">특히 포트 공유를 사용하는 응용 프로그램은 응용 프로그램이 실행되는 프로세스 권한을 평가해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e4434-142">Specifically, applications that use port sharing should evaluate the process privileges under which they run.</span></span> <span data-ttu-id="e4434-143">네트워크 통신에 필요한 프로세스 권한의 최소 집합으로 실행되는 기본 제공 Network Service 계정을 사용하여 응용 프로그램을 실행해 보세요.</span><span class="sxs-lookup"><span data-stu-id="e4434-143">Consider running your application using the built-in Network Service account, which runs with the minimal set of process privileges required for network communication.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e4434-144">참고 항목</span><span class="sxs-lookup"><span data-stu-id="e4434-144">See Also</span></span>  
 [<span data-ttu-id="e4434-145">Net.TCP Port Sharing Service 구성</span><span class="sxs-lookup"><span data-stu-id="e4434-145">Configuring the Net.TCP Port Sharing Service</span></span>](../../../../docs/framework/wcf/feature-details/configuring-the-net-tcp-port-sharing-service.md)  
 [<span data-ttu-id="e4434-146">호스팅</span><span class="sxs-lookup"><span data-stu-id="e4434-146">Hosting</span></span>](../../../../docs/framework/wcf/feature-details/hosting.md)  
 [<span data-ttu-id="e4434-147">방법: 포트 공유를 사용하도록 WCF 서비스 구성</span><span class="sxs-lookup"><span data-stu-id="e4434-147">How to: Configure a WCF Service to Use Port Sharing</span></span>](../../../../docs/framework/wcf/feature-details/how-to-configure-a-wcf-service-to-use-port-sharing.md)  
 [<span data-ttu-id="e4434-148">방법: Net.TCP Port Sharing Service 사용</span><span class="sxs-lookup"><span data-stu-id="e4434-148">How to: Enable the Net.TCP Port Sharing Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-enable-the-net-tcp-port-sharing-service.md)
