---
title: 자동 포맷 선택
ms.date: 03/30/2017
ms.assetid: dab51e56-8517-4a6a-bb54-b55b15ab37bb
ms.openlocfilehash: 4fd695195f5c7c13bc088248a6b3c12388328d37
ms.sourcegitcommit: a885cc8c3e444ca6471348893d5373c6e9e49a47
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 09/06/2018
ms.locfileid: "43873051"
---
# <a name="automatic-format-selection"></a><span data-ttu-id="cc53e-102">자동 포맷 선택</span><span class="sxs-lookup"><span data-stu-id="cc53e-102">Automatic Format Selection</span></span>
<span data-ttu-id="cc53e-103">이 샘플의 작업 코드에서 형식을 명시적으로 설정 하는 방법 뿐만 아니라 모델 프로그래밍 Windows Communication Foundation (WCF) REST를 사용 하 여 선택 영역 자동 서식 지정 (XML 또는 JSON)을 사용 하도록 설정 하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-103">This sample demonstrates how to enable automatic format selection (XML or JSON) with the Windows Communication Foundation (WCF) REST programming model, as well as how to explicitly set the format in the operation code.</span></span>  
  
## <a name="sample-details"></a><span data-ttu-id="cc53e-104">샘플 세부 정보</span><span class="sxs-lookup"><span data-stu-id="cc53e-104">Sample Details</span></span>  
 <span data-ttu-id="cc53e-105">이 샘플은 서비스와 서비스로 요청을 보내는 클라이언트 코드로 구성되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-105">The sample consists of a service along with client code that makes requests to the service.</span></span> <span data-ttu-id="cc53e-106">서비스에서는 단일 HTTP `GET` 작업(`EchoWithGet`) 및 단일 HTTP `POST` 작업(`EchoWithPost`)을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-106">The service supports a single HTTP `GET` operation (`EchoWithGet`) and a single HTTP `POST` operation (`EchoWithPost`).</span></span> <span data-ttu-id="cc53e-107">두 작업은 모두 문자열을 필요로 하며 응답에서도 문자열을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-107">Both operations expect a string and then return the string in the response.</span></span> <span data-ttu-id="cc53e-108">`GET` 작업을 사용할 경우 문자열은 URI 쿼리 문자열 매개 변수에서 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-108">With the `GET` operation, the string is provided in a URI query-string parameter.</span></span> <span data-ttu-id="cc53e-109">`POST` 작업을 사용할 경우 문자열은 요청의 본문에서 XML로 serialize되어 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-109">With the `POST` operation, the string is provided in the body of the request, serialized in XML.</span></span> <span data-ttu-id="cc53e-110">서비스에서는 [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)]의 새로운 기능인 선택 영역 자동 서식 지정 및 선택 영역 명령적 서식 지정 기능을 사용하여 응답을 XML이나 JSON으로 반환할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-110">The service is able to return responses in either XML or JSON, utilizing the new automatic format selection and imperative format selection features in [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)].</span></span>  
  
 <span data-ttu-id="cc53e-111">이 샘플에서는 App.config 파일을 사용하여 선택 영역 자동 서식 지정 기능을 사용하도록 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-111">In the sample, automatic format selection is enabled using the App.config file.</span></span> <span data-ttu-id="cc53e-112">기본 웹 HTTP 엔드포인트에서 `automaticFormatSelectionEnabled` 특성에는 `true` 값이 지정됩니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-112">On the default Web HTTP endpoint, the `automaticFormatSelectionEnabled` attribute has been given a value of `true`.</span></span> <span data-ttu-id="cc53e-113">WCF 인프라가 사용 하도록 설정 선택 영역 자동 서식 지정을 사용 하 여 가장 적절 한 응답 형식 (XML 또는 JSON) 요청의 HTTP Accept 또는 Content-type 헤더를 지정 된를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-113">With automatic format selection enabled, the WCF infrastructure selects the most appropriate response format (XML or JSON) given the HTTP Accept or Content-Type headers of the request.</span></span> <span data-ttu-id="cc53e-114">개발자는 `automaticFormatSelectionEnabled` 특성을 `true`로 설정하여 이 새 기능을 사용할 수 있으며 그 외에는 추가 코드나 구성을 제공할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-114">The developer is not required to provide any additional code or configuration other than setting the `automaticFormatSelectionEnabled` attribute to `true` to use this new feature.</span></span> <span data-ttu-id="cc53e-115">Program.cs의 클라이언트 코드에서 요청은 모두로 보내지며 합니다 `GET` 고 `POST` HTTP Accept 헤더가 "application/xml" 또는 "application/json"으로 지정 된 서비스 및 서비스의 작업에 응답을 반환 합니다. 해당 형식입니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-115">In the client code in Program.cs, requests are sent to both the `GET` and `POST` operations of the service with the HTTP Accept header specified as either "application/xml" or "application/json" and the service returns a response in that respective format.</span></span>  
  
 <span data-ttu-id="cc53e-116">또한 `GET` 작업에서는 선택 영역 명령적 서식 지정 기능이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-116">Also in the `GET` operation, imperative format selection is used.</span></span> <span data-ttu-id="cc53e-117">`GET` 작업에서는 선택적 `format` 쿼리 문자열 매개 변수를 검사하고, 이 매개 변수가 있으면 <xref:System.ServiceModel.Web.WebOperationContext.OutgoingResponse%2A> 속성에서 응답 형식을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-117">The `GET` operation checks for an optional `format` query-string parameter and if present, sets the response format on the <xref:System.ServiceModel.Web.WebOperationContext.OutgoingResponse%2A> property.</span></span> <span data-ttu-id="cc53e-118">이 방식으로 응답 형식을 명령적으로 설정 완료 WCF 인프라에서 자동 형식 선택을 재정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-118">Imperatively setting the response format in this way overrides the automatic format selection done by the WCF infrastructure.</span></span>  
  
 <span data-ttu-id="cc53e-119">이 샘플은 자체 호스팅 서비스와 콘솔 응용 프로그램 내에서 실행되는 클라이언트로 구성되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-119">The sample consists of a self-hosted service and a client that runs within a console application.</span></span> <span data-ttu-id="cc53e-120">콘솔 응용 프로그램이 실행되면 클라이언트에서는 서비스로 요청을 보내고 응답의 관련 정보를 콘솔 창에 씁니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-120">As the console application runs, the client makes requests to the service and writes the pertinent information from the responses to the console window.</span></span>  
  
#### <a name="to-use-this-sample"></a><span data-ttu-id="cc53e-121">이 샘플을 사용하려면</span><span class="sxs-lookup"><span data-stu-id="cc53e-121">To use this sample</span></span>  
  
1.  <span data-ttu-id="cc53e-122">Automatic Format Selection 샘플의 솔루션을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-122">Open the solution for the Automatic Format Selection Sample.</span></span> <span data-ttu-id="cc53e-123">관리자 권한으로 [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]을 시작해야 샘플이 제대로 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-123">When launching [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run as an administrator for the sample to execute successfully.</span></span> <span data-ttu-id="cc53e-124">마우스 오른쪽 단추로 클릭 하 여이 작업을 수행 합니다 [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] 아이콘을 선택 **관리자 권한으로 실행** 상황에 맞는 메뉴입니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-124">Do this by right-clicking the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] icon and select **Run as Administrator** from the context menu.</span></span>  
  
2.  <span data-ttu-id="cc53e-125">Ctrl+Shift+B를 눌러 솔루션을 빌드한 다음 Ctrl+F5를 눌러 콘솔 응용 프로그램 AutomaticFormatSelection 프로젝트를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-125">Press CTRL+SHIFT+B to build the solution and then press Ctrl+F5 to run the console application AutomaticFormatSelection project.</span></span> <span data-ttu-id="cc53e-126">콘솔 창이 나타나고 실행 중인 서비스의 URI와 실행 중인 서비스에 대한 HTML 도움말 페이지의 URI가 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-126">The console window appears and provides the URI of the running service and the URI of the HTML help page for the running service.</span></span>  
  
3.  <span data-ttu-id="cc53e-127">샘플이 실행되면 클라이언트에서는 서비스로 요청을 보내고 콘솔 창에 응답을 씁니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-127">As the sample runs, the client sends requests to the service and writes the responses to the console window.</span></span> <span data-ttu-id="cc53e-128">응답 형식은 XML과 JSON의 두 가지로 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-128">Notice the different formats of the responses in XML and JSON.</span></span>  
  
4.  <span data-ttu-id="cc53e-129">아무 키나 눌러 샘플을 종료합니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-129">Press any key to terminate the sample.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="cc53e-130">컴퓨터에 이 샘플이 이미 설치되어 있을 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-130">The samples may already be installed on your machine.</span></span> <span data-ttu-id="cc53e-131">계속하기 전에 다음(기본) 디렉터리를 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="cc53e-131">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="cc53e-132">이 디렉터리가 없으면로 이동 [Windows Communication Foundation (WCF) 및.NET Framework 4 용 Windows WF (Workflow Foundation) 샘플](https://go.microsoft.com/fwlink/?LinkId=150780) 모든 Windows Communication Foundation (WCF)를 다운로드 하 고 [!INCLUDE[wf1](../../../../includes/wf1-md.md)] 샘플.</span><span class="sxs-lookup"><span data-stu-id="cc53e-132">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="cc53e-133">이 샘플은 다음 디렉터리에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cc53e-133">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Web\AutomaticFormatSelection`  
  
## <a name="see-also"></a><span data-ttu-id="cc53e-134">참고 항목</span><span class="sxs-lookup"><span data-stu-id="cc53e-134">See Also</span></span>
