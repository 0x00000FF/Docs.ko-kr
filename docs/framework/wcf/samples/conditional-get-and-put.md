---
title: 조건부 Get과 Put
ms.date: 03/30/2017
ms.assetid: 3d22067f-57b8-4e0f-a571-a694512187ae
ms.openlocfilehash: 29819f89327128cdd71cc89eb8d14126522dc2df
ms.sourcegitcommit: c7f3e2e9d6ead6cc3acd0d66b10a251d0c66e59d
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 09/08/2018
ms.locfileid: "44192368"
---
# <a name="conditional-get-and-put"></a><span data-ttu-id="3b518-102">조건부 Get과 Put</span><span class="sxs-lookup"><span data-stu-id="3b518-102">Conditional Get and Put</span></span>
<span data-ttu-id="3b518-103">이 샘플에서는 WCF REST 프로그래밍 모델을 위한 새 조건부 검색 및 업데이트 API를 사용하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-103">This sample demonstrates how to use the new conditional retrieve and update APIs for the WCF REST programming model.</span></span> <span data-ttu-id="3b518-104">조건부 검색 및 업데이트에 가장 적합 한 되므로 리소스 지향 및 REST 서비스에서이 샘플은 확장 합니다 [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) 샘플.</span><span class="sxs-lookup"><span data-stu-id="3b518-104">Because conditional retrieve and update are most appropriate for resource-oriented and REST services, this sample extends the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample.</span></span> <span data-ttu-id="3b518-105">조건부 검색 및 업데이트에 대 한 지원 추가에 중점을 두고이 샘플은 [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) 에 도입 된 새 Api를 사용 하는 샘플 [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)]합니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-105">This sample focuses on adding support for conditional retrieve and update to the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample using the new APIs introduced in [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)].</span></span>  
  
## <a name="demonstrates"></a><span data-ttu-id="3b518-106">세부 항목</span><span class="sxs-lookup"><span data-stu-id="3b518-106">Demonstrates</span></span>  
 <span data-ttu-id="3b518-107">조건부 검색 및 업데이트</span><span class="sxs-lookup"><span data-stu-id="3b518-107">Conditional Retrieve and Update</span></span>  
  
## <a name="discussion"></a><span data-ttu-id="3b518-108">토론</span><span class="sxs-lookup"><span data-stu-id="3b518-108">Discussion</span></span>  
 <span data-ttu-id="3b518-109">이 샘플의 WCF 서비스는 리소스 지향 및 REST 방식으로 고객 컬렉션을 노출합니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-109">The WCF service in this sample exposes a collection of customers in a resource-oriented and REST manner.</span></span> <span data-ttu-id="3b518-110">서비스 구현에 대 한 자세한 설명을 참조 하십시오 합니다 [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) 샘플입니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-110">For a detailed description of the service implementation, please see the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample.</span></span>  
  
 <span data-ttu-id="3b518-111">이 샘플에 조건부 검색 및 업데이트 기능을 추가 합니다 [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) 샘플입니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-111">This sample adds conditional retrieve and update capabilities to the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample.</span></span> <span data-ttu-id="3b518-112">조건부 검색 및 업데이트 기능에서는 HTTP 엔터티 태그와 HTTP If-None-Match 및 If-Match 헤더를 사용하여 클라이언트에 지정된 리소스에 대한 최신 엔터티가 있는지 또는 없는지를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-112">Conditional retrieve and update use HTTP entity tags and the HTTP If-None-Match and If-Match headers to validate that clients either have or do not have the most current entity for a given resource.</span></span> <span data-ttu-id="3b518-113">그러나 HTTP If-None-Match 및 If-Match 헤더를 올바르게 구문 분석하기 위한 코드를 구현하는 작업은 번거롭고 오류가 발생하기 쉽습니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-113">However, implementing the code to correctly parse the HTTP If-None-Match and If-Match headers can be tedious and error-prone.</span></span> <span data-ttu-id="3b518-114">따라서 <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A>의 현재 인스턴스를 사용하여 액세스할 수 있는 <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A>에 <xref:System.ServiceModel.Web.IncomingWebRequestContext> 및 <xref:System.ServiceModel.Web.WebOperationContext> 메서드가 추가되었습니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-114">Therefore, the <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> and <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> methods have been added to the <xref:System.ServiceModel.Web.IncomingWebRequestContext>, which can be accessed using the current instance of the <xref:System.ServiceModel.Web.WebOperationContext>.</span></span> <span data-ttu-id="3b518-115">또한 올바른 엔터티 태그를 쉽게 반환할 수 있도록 `SetETag`에 <xref:System.ServiceModel.Web.OutgoingWebRequestContext> 메서드가 추가되었습니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-115">In addition, the `SetETag` method has been added to the <xref:System.ServiceModel.Web.OutgoingWebRequestContext>, making it easier to return valid entity tags.</span></span>  
  
 <span data-ttu-id="3b518-116"><xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> 메서드는 [WebGet] 작업과 함께 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-116">The <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> method is intended to be used with [WebGet] operations.</span></span> <span data-ttu-id="3b518-117">이 메서드는 지정된 리소스에 대한 현재 엔터티 태그를 `entityTag` 매개 변수로 사용하며, 이 매개 변수는 `string`, `int`, `long` 또는 `Guid`일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-117">It takes the current entity tag for the given resource as the `entityTag` parameter, which can be a `string`, `int`, `long` or `Guid`.</span></span> <span data-ttu-id="3b518-118"><xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> 메서드는 요청의 HTTP If-None-Match 헤더와 비교하여 엔터티 태그를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-118">The <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> method checks the entity tag against the HTTP If-None-Match header of the request.</span></span> <span data-ttu-id="3b518-119">엔터티 태그가 HTTP If-None-Match 헤더에 있는 경우 상태 코드 304(수정 안 됨)와 함께 <xref:System.ServiceModel.Web.WebFaultException>이 throw되며, 그렇지 않은 경우에는 메서드가 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-119">If the entity tag is present in the HTTP If-None-Match header, then a <xref:System.ServiceModel.Web.WebFaultException> with a status code of Not Modified (304) is thrown; otherwise the method returns.</span></span> <span data-ttu-id="3b518-120">클라이언트에서는 조건부 검색 메커니즘을 사용하여 이 엔터티가 있음을 서버에 알릴 수 있으며 클라이언트에 이 엔터티가 아직 없는 경우에만 현재 엔터티를 보낼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-120">The conditional retrieve mechanism allows the client to tell the server that it has this entity and to only send the current entity if the client does not already have it.</span></span> <span data-ttu-id="3b518-121"><xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> 메서드의 사용 예는 서비스의 `GetCustomer` 및 `GetCustomers` 작업에서 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-121">Example usage of the <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> method can be seen in the `GetCustomer` and `GetCustomers` operations of the service.</span></span> <span data-ttu-id="3b518-122"><xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A>에 대한 호출이 반환되지 않을 수 있다는 점에 주의하십시오.</span><span class="sxs-lookup"><span data-stu-id="3b518-122">It is important to note that calls to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> may not return.</span></span> <span data-ttu-id="3b518-123">개발자는 <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A>에 대한 호출이 실행되기 전에 해당 요청이 이미 성공적인 것으로 알려지도록 작업을 구현해야 합니다. 이러한 경우 <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A>에 대한 호출이 없으면 서비스에서는 성공 상태 코드와 함께 응답을 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-123">Developers should implement the operation so that the request is already known to be successful before the call to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> is executed, such that if the call to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> was not present, the service would send a response with a successful status code.</span></span>  
  
 <span data-ttu-id="3b518-124"><xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> 메서드는 <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> 메서드와 비슷합니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-124">The <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> method is similar to the <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> method.</span></span> <span data-ttu-id="3b518-125">또한 이 메서드는 지정된 리소스에 대한 현재 엔터티 태그를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-125">It also takes the current entity tag for the given resource.</span></span> <span data-ttu-id="3b518-126">그러나 메서드가 "PUT" 또는 "DELETE"로 설정 됩니다는 [WebInvoke] 작업과 함께 사용할 것입니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-126">However, it is intended to be used with [WebInvoke] operations in which the method is set to "PUT" or "DELETE".</span></span> <span data-ttu-id="3b518-127"><xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> 메서드는 요청의 HTTP If-Match 헤더를 비교하여 엔터티 태그를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-127">The <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> method checks the entity tag against the HTTP If-Match header of the request.</span></span> <span data-ttu-id="3b518-128">엔터티 태그가 HTTP If-Match 헤더에 없는 경우 상태 코드 412(사전 조건 실패)와 함께 <xref:System.ServiceModel.Web.WebFaultException>이 throw됩니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-128">If the entity tag is not present in the HTTP If-Match header, then a <xref:System.ServiceModel.Web.WebFaultException> with a status code of Precondition Failed (412) is thrown.</span></span> <span data-ttu-id="3b518-129">클라이언트에서는 조건부 업데이트 메커니즘을 사용하여 리소스에 대한 이 엔터티가 있음을 서버에 알릴 수 있으며 클라이언트에 있는 엔터티가 현재 엔터티인 경우에만 리소스를 변경할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-129">The conditional update mechanism allows the client to tell the server that it has this entity for the resource and to only allow the client to alter the resource; if the entity it has is current.</span></span> <span data-ttu-id="3b518-130"><xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> 메서드의 사용 예는 서비스의 `UpdateCustomer` 및 `DeleteCustomer` 작업에서 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-130">Example usage of the <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> method can be seen in the `UpdateCustomer` and `DeleteCustomer` operations of the service.</span></span> <span data-ttu-id="3b518-131"><xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A>와 마찬가지로 <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A>에 대한 호출이 반환되지 않을 수 있다는 점에 주의하십시오.</span><span class="sxs-lookup"><span data-stu-id="3b518-131">Just as with <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A>, it is important to note that calls to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> may not return.</span></span> <span data-ttu-id="3b518-132">개발자는 <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A>에 대한 호출이 실행되기 전에 해당 요청이 이미 성공적인 것으로 알려지도록 작업을 구현해야 합니다. 이러한 경우 <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A>에 대한 호출이 없으면 서비스에서는 성공 상태 코드와 함께 응답합니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-132">Developers should implement the operation such that the request is already known to be successful before the call to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> is executed, such that if the call to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> was not present, the service would respond with a successful status code.</span></span>  
  
 <span data-ttu-id="3b518-133">이 샘플은 자체 호스팅 서비스와 콘솔 응용 프로그램 내에서 실행되는 클라이언트로 구성되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-133">The sample consists of a self-hosted service and a client that runs within a console application.</span></span> <span data-ttu-id="3b518-134">콘솔 응용 프로그램이 실행되면 클라이언트에서는 서비스로 요청을 보내고 응답의 관련 정보를 콘솔 창에 씁니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-134">As the console application runs, the client makes requests to the service and writes the pertinent information from the responses to the console window.</span></span>  
  
#### <a name="to-run-the-sample"></a><span data-ttu-id="3b518-135">이 샘플을 실행하려면</span><span class="sxs-lookup"><span data-stu-id="3b518-135">To run the sample</span></span>  
  
1.  <span data-ttu-id="3b518-136">Conditional Get and Put 샘플의 솔루션을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-136">Open the solution for the Conditional Get and Put sample.</span></span> <span data-ttu-id="3b518-137">관리자 권한으로 [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]을 시작해야 샘플이 제대로 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-137">When launching [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run as an administrator to execute the sample successfully.</span></span> <span data-ttu-id="3b518-138">마우스 오른쪽 단추로 클릭 하 여이 작업을 수행 합니다 [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] 아이콘과 선택 **관리자 권한으로 실행** 상황에 맞는 메뉴입니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-138">Do this by right-clicking the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] icon and choosing **Run as Administrator** from the context menu.</span></span>  
  
2.  <span data-ttu-id="3b518-139">Ctrl+Shift+B를 눌러 솔루션을 빌드한 다음 Ctrl+F5를 눌러 콘솔 응용 프로그램 프로젝트를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-139">Press CTRL+SHIFT+B to build the solution and then press CTRL+F5 to run the console application project.</span></span> <span data-ttu-id="3b518-140">Ctrl+F5 대신 F5 키를 눌러 디버깅을 사용하는 상태로 이 프로젝트를 실행할 경우, 조건부 GET 및 PUT 확인 시 예외가 throw되면 디버거가 중지됩니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-140">If running this project with debugging enabled (by pressing F5 instead of CTRL+F5), the debugger stops when an exception is thrown by the conditional GET and PUT checking.</span></span> <span data-ttu-id="3b518-141">이 경우 F5 키를 눌러 샘플을 계속 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-141">When this happens, press F5 to continue executing the sample.</span></span>  
  
3.  <span data-ttu-id="3b518-142">콘솔 창이 나타나고 실행 중인 서비스의 URI와 실행 중인 서비스에 대한 HTML 도움말 페이지의 URI가 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-142">The console window appear sand provides the URI of the running service and the URI of the HTML help page for the running service.</span></span>  
  
4.  <span data-ttu-id="3b518-143">샘플이 실행되면 클라이언트에서는 서비스로 요청을 보내고 콘솔 창에 응답을 씁니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-143">As the sample runs, the client sends requests to the service and writes the responses to the console window.</span></span>  
  
5.  <span data-ttu-id="3b518-144">아무 키나 눌러 샘플을 종료합니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-144">Press any key to terminate the sample.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="3b518-145">컴퓨터에 이 샘플이 이미 설치되어 있을 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-145">The samples may already be installed on your machine.</span></span> <span data-ttu-id="3b518-146">계속하기 전에 다음(기본) 디렉터리를 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="3b518-146">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="3b518-147">이 디렉터리가 없으면로 이동 [Windows Communication Foundation (WCF) 및.NET Framework 4 용 Windows WF (Workflow Foundation) 샘플](https://go.microsoft.com/fwlink/?LinkId=150780) 모든 Windows Communication Foundation (WCF)를 다운로드 하 고 [!INCLUDE[wf1](../../../../includes/wf1-md.md)] 샘플.</span><span class="sxs-lookup"><span data-stu-id="3b518-147">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="3b518-148">이 샘플은 다음 디렉터리에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3b518-148">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Web\ConditionalGetAndPut`
