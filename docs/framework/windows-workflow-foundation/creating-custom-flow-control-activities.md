---
title: 사용자 지정 흐름 제어 작업 만들기
ms.date: 03/30/2017
ms.assetid: 27f409f6-2d1d-4cfb-9765-93eb2ad667d5
ms.openlocfilehash: 2be47281335066def5c1d267cd709db5a8ff1187
ms.sourcegitcommit: 69bf8b719d4c289eec7b45336d0b933dd7927841
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/14/2019
ms.locfileid: "57847013"
---
# <a name="creating-custom-flow-control-activities"></a><span data-ttu-id="c363a-102">사용자 지정 흐름 제어 작업 만들기</span><span class="sxs-lookup"><span data-stu-id="c363a-102">Creating custom flow control activities</span></span>
<span data-ttu-id="c363a-103">다양 한 프로그래밍 구조를 추상화 하는 비슷하게 작동 하는 흐름 제어 활동을 포함 하는.NET Framework (같은 <xref:System.Activities.Statements.Flowchart>) 또는 표준 프로그래밍 문 (같은 <xref:System.Activities.Statements.If>).</span><span class="sxs-lookup"><span data-stu-id="c363a-103">The .NET Framework contains a variety of flow-control activities that function similarly to abstract programming structures (such as <xref:System.Activities.Statements.Flowchart>)   or to standard programming statements (such as <xref:System.Activities.Statements.If>).</span></span> <span data-ttu-id="c363a-104">이 항목에서는 샘플 프로젝트 중 하나의 아키텍처를 설명 [제네릭이 아닌 ForEach](./samples/non-generic-foreach.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-104">This topic discusses the architecture of one of the sample projects, [Non-Generic ForEach](./samples/non-generic-foreach.md).</span></span>  
  
## <a name="creating-the-custom-class"></a><span data-ttu-id="c363a-105">사용자 지정 클래스 만들기</span><span class="sxs-lookup"><span data-stu-id="c363a-105">Creating the custom class</span></span>  
 <span data-ttu-id="c363a-106">비제네릭 ForEach 클래스는 자식 작업을 예약해야 하고 <xref:System.Activities.NativeActivity>에서 파생되는 작업에는 이 기능이 없기 때문에 <xref:System.Workflow.Activities.CodeActivity>에서 파생되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-106">Since the Non-Generic ForEach class will need to schedule child activities, it will need to derive from <xref:System.Activities.NativeActivity>, since activities that derive from <xref:System.Workflow.Activities.CodeActivity> do not have this functionality.</span></span>  
  
```  
public sealed class ForEach : NativeActivity  
    {  
```  
  
 <span data-ttu-id="c363a-107">사용자 지정 클래스에서 작업에 사용되는 데이터를 저장하고 작업의 자식 작업을 실행하는 기능을 제공하려면 여러 멤버가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-107">The custom class requires several members to store data being used by the activity, and to provide functionality to execute the activity’s child activities.</span></span> <span data-ttu-id="c363a-108">여기에는 다음과 같은 멤버가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-108">These members include:</span></span>  
  
-   <span data-ttu-id="c363a-109">`valueEnumerator`: Public이 아닌 <xref:System.Activities.Variable%601> 형식의 <xref:System.Collections.IEnumerator> 항목의 컬렉션을 반복 하는 데 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-109">`valueEnumerator`: The non-public <xref:System.Activities.Variable%601> of type <xref:System.Collections.IEnumerator> used to iterate over the collection of items.</span></span> <span data-ttu-id="c363a-110">이 멤버는 작업에서 내부적으로 사용되기 때문에 이 개체의 원본이 작업 외부에 있는 경우에 사용되는 인수나 공용 속성 대신 <xref:System.Activities.Variable%601> 형식입니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-110">This member is of type <xref:System.Activities.Variable%601> because it is used internally in the activity, rather than an argument or public property, which would be used if this object were to have an origin outside the activity.</span></span>  
  
-   <span data-ttu-id="c363a-111">`OnChildComplete`: 공용 <xref:System.Activities.CompletionCallback> 실행을 완료 하는 각 자식 때 실행 되는 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-111">`OnChildComplete`: The public <xref:System.Activities.CompletionCallback> property that executes when each child completes execution.</span></span> <span data-ttu-id="c363a-112">이 멤버는 작업의 각 인스턴스에 대해 값이 변경되지 않으므로 CLR 속성으로 정의됩니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-112">This member is defined as a CLR property, since its value will not change for different instances of the activity.</span></span>  
  
-   <span data-ttu-id="c363a-113">`Values`: 자식 활동의 반복에 사용 된 입력의 컬렉션입니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-113">`Values`: The collection of inputs used for the iterations of the child activity.</span></span> <span data-ttu-id="c363a-114">이 멤버는 데이터 원본이 작업 외부에 있지만 작업이 실행되는 동안 컬렉션 콘텐츠가 변경되지 않아야 하므로 <xref:System.Activities.InArgument%601> 형식입니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-114">This member is of type <xref:System.Activities.InArgument%601>, since the origin of the data is outside the activity, but the contents of the collection is not expected to change during the execution of the activity.</span></span> <span data-ttu-id="c363a-115">작업이 실행되는 동안 이 컬렉션의 콘텐츠를 변경하는 기능(예: 작업 추가 또는 제거)이 작업에 필요한 경우 이 멤버는 <xref:System.Activities.ActivityAction>으로 정의된 다음 액세스할 때마다 평가되므로 작업에서 변경 내용을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-115">If the activity needed the functionality to change the contents of this collection while the activity was executing (to add or remove activities, for instance), this member would have been defined as an <xref:System.Activities.ActivityAction>, which then would have been evaluated every time it was accessed, so that changes would be available to the activity.</span></span>  
  
-   <span data-ttu-id="c363a-116">`Body`: 각 항목에 대해 실행할 활동을 정의 하는이 멤버는 `Values` 컬렉션입니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-116">`Body`: This member defines the activity to be executed for each item in the `Values` collection.</span></span> <span data-ttu-id="c363a-117">이 멤버는 액세스할 때마다 평가되도록 <xref:System.Activities.ActivityAction>으로 정의됩니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-117">This member is defined as an <xref:System.Activities.ActivityAction> so that it is evaluated every time it is accessed.</span></span>  
  
-   <span data-ttu-id="c363a-118">`Execute`: 이 메서드를 사용 합니다 `InternalExecute`, `OnForEachComplete`, 및 `GetStateAndExecute` 실행을 예약 하 고 본문 멤버에 정의 된 자식 활동의 완료 처리기를 할당 하려면 public이 아닌 멤버입니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-118">`Execute`: This method uses the `InternalExecute`, `OnForEachComplete`, and `GetStateAndExecute` non-public members to schedule the execution and assign the completion handler of the child activity defined in the Body member.</span></span>  
  
-   <span data-ttu-id="c363a-119">`CacheMetadata`: 이 멤버는 작업을 실행 하는 데 필요한 정보를 런타임에 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-119">`CacheMetadata`: This member provides the runtime with the information it needs to execute the activity.</span></span> <span data-ttu-id="c363a-120">기본적으로 작업의 `CacheMetadata` 메서드가 작업의 모든 공용 멤버를 런타임에 알리지만, 이 작업은 일부 기능에 전용 멤버를 사용하기 때문에 런타임에서 인식할 수 있도록 전용 멤버의 존재를 런타임에 알려야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-120">By default, an activity’s `CacheMetadata` method will inform the runtime of all public members of the activity, but since this activity uses private members for some functionality, it needs to inform the runtime of their existence so that the runtime can be aware of them.</span></span> <span data-ttu-id="c363a-121">이 경우 전용 `CacheMetadata` 멤버에 액세스할 수 있도록 `valueEnumerator` 함수가 재정의됩니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-121">In this case, the `CacheMetadata` function is overridden so that the private `valueEnumerator` member can be accessed.</span></span> <span data-ttu-id="c363a-122">또한 이 멤버는 실행되는 동안 작업에 전달될 수 있도록 작업 값에 대한 인수를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c363a-122">This member also creates an argument for the values for the activity so that they can be passed in to the activity during execution.</span></span>
