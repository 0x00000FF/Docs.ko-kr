---
title: "연습: 형식 공급자를 사용하여 OData 서비스에 액세스(F#)"
description: "F # 3.0의 F # ODataService 형식 공급자를 사용 하 여 OData 서비스에 대 한 클라이언트 형식을 생성 하는 방법을 알아보고 쿼리 하는 데이터 서비스를 제공 하는 피드를 제공 합니다."
keywords: "visual f#, f#, 함수형 프로그래밍"
author: cartermp
ms.author: phcart
ms.date: 05/16/2016
ms.topic: language-reference
ms.prod: .net
ms.technology: devlang-fsharp
ms.devlang: fsharp
ms.assetid: 0adae84c-b0fa-455f-994b-274ecdc6df30
ms.openlocfilehash: 750407c36a989cece30c0c0654ff905c8eee3b33
ms.sourcegitcommit: 655fd4f78741967f80c409cef98347fdcf77857d
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/28/2018
---
# <a name="walkthrough-accessing-an-odata-service-by-using-type-providers"></a><span data-ttu-id="63a35-104">연습: 형식 공급자를 사용하여 OData 서비스에 액세스</span><span class="sxs-lookup"><span data-stu-id="63a35-104">Walkthrough: Accessing an OData Service by Using Type Providers</span></span>

> [!NOTE]
<span data-ttu-id="63a35-105">이 가이드는 F # 3.0 용으로 작성 된 하 고 업데이트 됩니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-105">This guide was written for F# 3.0 and will be updated.</span></span>  <span data-ttu-id="63a35-106">최신 크로스 플랫폼 형식 공급자에 대해서는 [FSharp.Data](https://fsharp.github.io/FSharp.Data/)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="63a35-106">See [FSharp.Data](https://fsharp.github.io/FSharp.Data/) for up-to-date, cross-platform type providers.</span></span>

> [!NOTE]
<span data-ttu-id="63a35-107">API 참조 링크 MSDN을 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-107">The API reference links will take you to MSDN.</span></span>  <span data-ttu-id="63a35-108">docs.microsoft.com API 참조가 완전하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-108">The docs.microsoft.com API reference is not complete.</span></span>

<span data-ttu-id="63a35-109">개방형 데이터 프로토콜 의미 OData는 인터넷을 통해 데이터를 전송 하기 위한 프로토콜입니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-109">OData, meaning Open Data Protocol, is a protocol for transferring data over the Internet.</span></span> <span data-ttu-id="63a35-110">많은 데이터 공급자는 OData 웹 서비스를 게시 하 여 자신의 데이터에 대 한 액세스를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-110">Many data providers expose access to their data by publishing an OData web service.</span></span> <span data-ttu-id="63a35-111">F # 3.0의 데이터 형식을 사용 하 여 자동으로 생성 되는 모든 OData 원본에서 데이터에 액세스할 수는 `ODataService` 형식 공급자입니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-111">You can access data from any OData source in F# 3.0 using data types that are automatically generated by the `ODataService` type provider.</span></span> <span data-ttu-id="63a35-112">OData에 대 한 자세한 내용은 https://msdn.microsoft.com/library/da3380cc-f6da-4c6c-bdb2-bb86afa59d62를 참조 합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-112">For more information about OData, see https://msdn.microsoft.com/library/da3380cc-f6da-4c6c-bdb2-bb86afa59d62.</span></span>

<span data-ttu-id="63a35-113">이 연습에서는 OData 서비스에 대 한 클라이언트 형식을 생성 하는 F # ODataService 형식 공급자를 사용 하는 방법을 보여 줍니다. 및 쿼리 하는 데이터 서비스를 제공 하는 피드를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-113">This walkthrough shows you how to use the F# ODataService type provider to generate client types for an OData service and query data feeds that the service provides.</span></span>

<span data-ttu-id="63a35-114">이 연습에서는 다음 작업을 설명하는데, 연습을 성공적으로 수행하려면 이 순서대로 작업을 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-114">This walkthrough illustrates the following tasks, which you should perform in this order for the walkthrough to succeed:</span></span>


- <span data-ttu-id="63a35-115">OData 서비스에 대 한 클라이언트 프로젝트 구성</span><span class="sxs-lookup"><span data-stu-id="63a35-115">Configuring a client project for an OData service</span></span>
<br />

- <span data-ttu-id="63a35-116">OData 형식 액세스</span><span class="sxs-lookup"><span data-stu-id="63a35-116">Accessing OData types</span></span>
<br />

- <span data-ttu-id="63a35-117">OData 서비스 쿼리</span><span class="sxs-lookup"><span data-stu-id="63a35-117">Querying an OData service</span></span>
<br />

- <span data-ttu-id="63a35-118">OData 요청 확인</span><span class="sxs-lookup"><span data-stu-id="63a35-118">Verifying the OData requests</span></span>
<br />


## <a name="configuring-a-client-project-for-an-odata-service"></a><span data-ttu-id="63a35-119">OData 서비스에 대 한 클라이언트 프로젝트 구성</span><span class="sxs-lookup"><span data-stu-id="63a35-119">Configuring a client project for an OData service</span></span>
<span data-ttu-id="63a35-120">이 단계에서는 OData 형식 공급자를 사용 하도록 프로젝트를 설정 하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-120">In this step, you set up a project to use an OData type provider.</span></span>


#### <a name="to-configure-a-client-project-for-an-odata-service"></a><span data-ttu-id="63a35-121">OData 서비스에 대 한 클라이언트 프로젝트를 구성 하려면</span><span class="sxs-lookup"><span data-stu-id="63a35-121">To configure a client project for an OData service</span></span>

- <span data-ttu-id="63a35-122">F # 콘솔 응용 프로그램 프로젝트를 연 다음에 대 한 참조를 추가 `System.Data.Services.Client` 프레임 워크 어셈블리입니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-122">Open an F# Console Application project, and then add a reference to the `System.Data.Services.Client` Framework assembly.</span></span>
<br />

- <span data-ttu-id="63a35-123">아래 `Extensions`에 대 한 참조 추가 `FSharp.Data.TypeProviders` 어셈블리입니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-123">Under `Extensions`, add a reference to the `FSharp.Data.TypeProviders` assembly.</span></span>
<br />

## <a name="accessing-odata-types"></a><span data-ttu-id="63a35-124">OData 형식 액세스</span><span class="sxs-lookup"><span data-stu-id="63a35-124">Accessing OData types</span></span>
<span data-ttu-id="63a35-125">이 단계에서는 OData 서비스에 대 한 유형 및 데이터에 대 한 액세스를 제공 하는 형식 공급자를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-125">In this step, you create a type provider that provides access to the types and data for an OData service.</span></span>


#### <a name="to-access-odata-types"></a><span data-ttu-id="63a35-126">OData 형식에 액세스 하려면</span><span class="sxs-lookup"><span data-stu-id="63a35-126">To access OData types</span></span>

- <span data-ttu-id="63a35-127">코드 편집기에서 F # 소스 파일을 열고 다음 코드를 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-127">In the Code Editor, open an F# source file, and enter the following code.</span></span>
<br />

```fsharp
open Microsoft.FSharp.Data.TypeProviders


type Northwind = ODataService<"https://services.odata.org/Northwind/Northwind.svc/">

let db = Northwind.GetDataContext()
let fullContext = Northwind.ServiceTypes.NorthwindEntities()
```

<span data-ttu-id="63a35-128">이 예제에서는 F # 형식 공급자를 호출에 있고 지정 된 OData URI를 기반으로 하는 형식의 집합을 만드는 것을 지시 합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-128">In this example, you have invoked the F# type provider and instructed it to create a set of types that are based on the OData URI that you specified.</span></span> <span data-ttu-id="63a35-129">사용할 수 있는 두 개의 개체에서 데이터에 대 한 정보를 포함 하는 하나는 간단한 데이터 컨텍스트 `db` 예제에서입니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-129">Two objects are available that contain information about the data; one is a simplified data context, `db` in the example.</span></span> <span data-ttu-id="63a35-130">이 개체는 데이터 형식만 데이터베이스와 연결 된 테이블 또는 피드에 대 한 형식을 포함 하는 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-130">This object contains only the data types that are associated with the database, which include types for tables or feeds.</span></span> <span data-ttu-id="63a35-131">다른 개체 `fullContext` 이 예제에서는의 인스턴스가 `System.Data.Linq.DataContext` 많은 추가 속성, 메서드 및 이벤트를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-131">The other object, `fullContext` in this example, is an instance of `System.Data.Linq.DataContext` and contains many additional properties, methods, and events.</span></span>
<br />


## <a name="querying-an-odata-service"></a><span data-ttu-id="63a35-132">OData 서비스 쿼리</span><span class="sxs-lookup"><span data-stu-id="63a35-132">Querying an OData service</span></span>
<span data-ttu-id="63a35-133">이 단계에서는 F # 쿼리 식을 사용 하 여 OData 서비스를 쿼리.</span><span class="sxs-lookup"><span data-stu-id="63a35-133">In this step, you use F# query expressions to query the OData service.</span></span>


#### <a name="to-query-an-odata-service"></a><span data-ttu-id="63a35-134">OData 서비스를 쿼리할 수</span><span class="sxs-lookup"><span data-stu-id="63a35-134">To query an OData service</span></span>

1. <span data-ttu-id="63a35-135">형식 공급자를 설정한 했으므로 OData 서비스를 쿼리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-135">Now that you've set up the type provider, you can query an OData service.</span></span>
<br />  <span data-ttu-id="63a35-136">OData는 사용 가능한 쿼리 작업의 하위 집합만을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-136">OData supports only a subset of the available query operations.</span></span> <span data-ttu-id="63a35-137">다음 작업 및 해당 하는 키워드가 지원 됩니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-137">The following operations and their corresponding keywords are supported:</span></span>
<br />
  - <span data-ttu-id="63a35-138">프로젝션 (`select`)</span><span class="sxs-lookup"><span data-stu-id="63a35-138">projection (`select`)</span></span>
<br />

  - <span data-ttu-id="63a35-139">필터링 (`where`문자열을 사용 하 여 여을 작업 날짜)</span><span class="sxs-lookup"><span data-stu-id="63a35-139">filtering (`where`, by using string and date operations)</span></span>
<br />

  - <span data-ttu-id="63a35-140">페이징 (`skip`, `take`)</span><span class="sxs-lookup"><span data-stu-id="63a35-140">paging (`skip`, `take`)</span></span>
<br />

  - <span data-ttu-id="63a35-141">순서 지정 (`orderBy`, `thenBy`)</span><span class="sxs-lookup"><span data-stu-id="63a35-141">ordering (`orderBy`, `thenBy`)</span></span>
<br />

  - <span data-ttu-id="63a35-142">`AddQueryOption` 및 `Expand`, 하는 OData 전용 작업</span><span class="sxs-lookup"><span data-stu-id="63a35-142">`AddQueryOption` and `Expand`, which are OData-specific operations</span></span>
<br />

  <span data-ttu-id="63a35-143">자세한 내용은 참조 [LINQ 고려 사항 &#40; WCF Data Services &#41; ](https://msdn.microsoft.com/library/ee622463.aspx).</span><span class="sxs-lookup"><span data-stu-id="63a35-143">For more information, see [LINQ Considerations &#40;WCF Data Services&#41;](https://msdn.microsoft.com/library/ee622463.aspx).</span></span>
<br />  <span data-ttu-id="63a35-144">모든 피드 또는 테이블에 항목을 하려는 경우 다음 코드 에서처럼 쿼리 식의 가장 간단한 형태를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-144">If you want all of the entries in a feed or table, use the simplest form of the query expression, as in the following code:</span></span>
<br />

```fsharp
query {
  for customer in db.Customers do
  select customer
} |> Seq.iter (fun customer ->
                  printfn "ID: %s\nCompany: %s" customer.CustomerID customer.CompanyName
                  printfn "Contact: %s\nAddress: %s" customer.ContactName customer.Address
                  printfn "         %s, %s %s" customer.City customer.Region customer.PostalCode
                  printfn "%s\n" customer.Phone)
```

2. <span data-ttu-id="63a35-145">필드 또는 select 키워드 다음 튜플을 사용 하 여 원하는 열을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-145">Specify the fields or columns that you want by using a tuple after the select keyword.</span></span>
<br />

```fsharp
  query { 
    for cat in db.Categories do
    select (cat.CategoryID, cat.CategoryName, cat.Description)
  } |> Seq.iter (fun (id, name, description) ->
                    printfn "ID: %d\nCategory: %s\nDescription: %s\n" id name description)
```

3. <span data-ttu-id="63a35-146">조건을 사용 하 여 지정 된 `where` 절.</span><span class="sxs-lookup"><span data-stu-id="63a35-146">Specify conditions by using a `where` clause.</span></span>
<br />

```fsharp
query {
  for employee in db.Employees do
  where (employee.EmployeeID = 9)
  select employee
} |> Seq.iter (fun employee ->
                  printfn "Name: %s ID: %d" (employee.FirstName + " " + employee.LastName) (employee.EmployeeID))
```

4. <span data-ttu-id="63a35-147">쿼리 하는 부분 문자열 조건을 사용 하 여 지정 된 `System.String.Contains(System.String)` 메서드.</span><span class="sxs-lookup"><span data-stu-id="63a35-147">Specify a substring condition to the query by using the `System.String.Contains(System.String)` method.</span></span> <span data-ttu-id="63a35-148">다음 쿼리는 이름에 "Chef"를 포함 하는 모든 제품을 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-148">The following query returns all products that have "Chef" in their names.</span></span> <span data-ttu-id="63a35-149">또한 사용 하는 것을 볼 `System.Nullable<'T>.GetValueOrDefault()`합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-149">Also notice the use of `System.Nullable<'T>.GetValueOrDefault()`.</span></span> <span data-ttu-id="63a35-150">`UnitPrice` 는 null 허용 값, 사용 하 여 값을 가져올 하거나 해야는 `Value` 속성 또는 있습니다 호출 해야 `System.Nullable<'T>.GetValueOrDefault()`합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-150">The `UnitPrice` is a nullable value, so you must either get the value by using the `Value` property, or you must call `System.Nullable<'T>.GetValueOrDefault()`.</span></span>
<br />

```fsharp
query { 
  for product in db.Products do
  where (product.ProductName.Contains("Chef"))
  select product
} |> Seq.iter (fun product ->
                  printfn "ID: %d Product: %s" product.ProductID product.ProductName
                  printfn "Price: %M\n" (product.UnitPrice.GetValueOrDefault()))
```

5. <span data-ttu-id="63a35-151">사용 하 여는 `System.String.EndsWith(System.String)` 문자열이 특정 하위 문자열로 끝나는지를 지정 하는 메서드.</span><span class="sxs-lookup"><span data-stu-id="63a35-151">Use the `System.String.EndsWith(System.String)` method to specify that a string ends with a certain substring.</span></span>
<br />

```fsharp
query {
  for product in db.Products do
  where (product.ProductName.EndsWith("u"))
  select product
} |> Seq.iter (fun product ->
                  printfn "ID: %d Product: %s" product.ProductID product.ProductName
                  printfn "Price: %M\n" (product.UnitPrice.GetValueOrDefault()))
```

6. <span data-ttu-id="63a35-152">where 조건을 결합 사용 하 여 절은 `&&` 연산자입니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-152">Combine conditions in a where clause by using the `&&` operator.</span></span>
<br />

```fsharp
// Open this module to use the nullable operators ?> and ?<.
open Microsoft.FSharp.Linq.NullableOperators

let salesIn1997 = query { 
  for sales in db.Category_Sales_for_1997 do
  where (sales.CategorySales ?> 50000.00M && sales.CategorySales ?< 60000.0M)
  select sales }

salesIn1997
|> Seq.iter (fun sales ->
                printfn "Category: %s Sales: %M" sales.CategoryName (sales.CategorySales.GetValueOrDefault()))
```

<span data-ttu-id="63a35-153">연산자 `?>` 및 `?<` null 허용 연산자 됩니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-153">The operators `?>` and `?<` are nullable operators.</span></span> <span data-ttu-id="63a35-154">Null 허용 같음 및 비교 연산자의 전체 집합을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-154">You can use a full set of nullable equality and comparison operators.</span></span> <span data-ttu-id="63a35-155">자세한 내용은 참조 [Linq.NullableOperators 모듈](https://msdn.microsoft.com/visualfsharpdocs/conceptual/linq.nullableoperators-module-%5bfsharp%5d)합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-155">For more information, see [Linq.NullableOperators Module](https://msdn.microsoft.com/visualfsharpdocs/conceptual/linq.nullableoperators-module-%5bfsharp%5d).</span></span>
<br />

7. <span data-ttu-id="63a35-156">사용 하 여는 `sortBy` 순서를 지정 하는 연산자를 쿼리하고 사용할 `thenBy` 다른 수준의 순서를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-156">Use the `sortBy` query operator to specify ordering, and use `thenBy` to specify another level of ordering.</span></span> <span data-ttu-id="63a35-157">쿼리의 select 부분에 있는 튜플의 사용을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-157">Notice also the use of a tuple in the select part of the query.</span></span> <span data-ttu-id="63a35-158">따라서 쿼리 요소 형식을 자기 튜플을입니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-158">Therefore, the query has a tuple as an element type.</span></span>
<br />

```fsharp
printfn "Freight for some orders: "

query { 
  for order in db.Orders do
  sortBy (order.OrderDate.Value)
  thenBy (order.OrderID)
  select (order.OrderDate, order.OrderID, order.Customer.CompanyName)
} |> Seq.iter (fun (orderDate, orderID, company) ->
                  printfn "OrderDate: %s" (orderDate.GetValueOrDefault().ToString())
                  printfn "OrderID: %d Company: %s\n" orderID company)
```

8. <span data-ttu-id="63a35-159">Skip 연산자를 사용 하 여 지정 된 레코드 수를 무시 하 고 take 연산자를 사용 하 여 반환할 레코드 수를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-159">Ignore a specified number of records by using the skip operator, and use the take operator to specify a number of records to return.</span></span> <span data-ttu-id="63a35-160">이러한 방식으로 데이터 피드에서 페이징을 구현할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-160">In this way, you can implement paging on data feeds.</span></span>
<br />

```fsharp
printfn "Get the first page of 2 employees."

query { 
  for employee in db.Employees do
  take 2
  select employee
} |> Seq.iter (fun employee ->
                  printfn "Name: %s ID: %d" (employee.FirstName + " " + employee.LastName) (employee.EmployeeID)) 

printfn "Get the next 2 employees."

query { 
  for employee in db.Employees do
  skip 2
  take 2
  select employee
} |> Seq.iter (fun employee ->
                  printfn "Name: %s ID: %d" (employee.FirstName + " " + employee.LastName) (employee.EmployeeID))
```

## <a name="verifying-the-odata-request"></a><span data-ttu-id="63a35-161">OData 요청 확인</span><span class="sxs-lookup"><span data-stu-id="63a35-161">Verifying the OData request</span></span>
<span data-ttu-id="63a35-162">모든 OData 쿼리는 특정 OData 요청 URI로 변환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-162">Every OData query is translated into a specific OData request URI.</span></span> <span data-ttu-id="63a35-163">URI, 아마도 디버깅용으로 이벤트 처리기를 추가 하 여 확인할 수 있습니다는 `SendingRequest` 전체 데이터 컨텍스트 개체의 이벤트입니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-163">You can verify that URI, perhaps for debugging purposes, by adding an event handler to the `SendingRequest` event on the full data context object.</span></span>


#### <a name="to-verify-the-odata-request"></a><span data-ttu-id="63a35-164">OData 요청을 확인 하려면</span><span class="sxs-lookup"><span data-stu-id="63a35-164">To verify the OData request</span></span>

- <span data-ttu-id="63a35-165">OData 요청 URI를 확인 하려면 다음 코드를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-165">To verify the OData request URI, use the following code:</span></span>
<br />

```fsharp
// The DataContext property returns the full data context.
db.DataContext.SendingRequest.Add (fun eventArgs -> printfn "Requesting %A" eventArgs.Request.RequestUri)
```

<span data-ttu-id="63a35-166">이전 코드의 출력은입니다.</span><span class="sxs-lookup"><span data-stu-id="63a35-166">The output of the previous code is:</span></span>
<br />`requesting https://services.odata.org/Northwind/Northwind.svc/Orders()?$orderby=ShippedDate&amp;$select=OrderID,ShippedDate`


## <a name="see-also"></a><span data-ttu-id="63a35-167">참고 항목</span><span class="sxs-lookup"><span data-stu-id="63a35-167">See Also</span></span>
[<span data-ttu-id="63a35-168">쿼리 식</span><span class="sxs-lookup"><span data-stu-id="63a35-168">Query Expressions</span></span>](../../language-reference/query-expressions.md)

[<span data-ttu-id="63a35-169">LINQ 고려 사항 (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="63a35-169">LINQ Considerations (WCF Data Services)</span></span>](https://msdn.microsoft.com/library/ee622463.aspx)

[<span data-ttu-id="63a35-170">ODataService 형식 공급자 (F #)</span><span class="sxs-lookup"><span data-stu-id="63a35-170">ODataService Type Provider (F#)</span></span>](https://msdn.microsoft.com/visualfsharpdocs/conceptual/odataservice-type-provider-%5bfsharp%5d)
