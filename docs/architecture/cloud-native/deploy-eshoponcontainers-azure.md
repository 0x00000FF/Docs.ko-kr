---
title: Azure에 eShopOnContainers 배포
description: Azure Kubernetes Service, 투구 및 DevSpaces를 사용 하 여 eShopOnContainers 응용 프로그램을 배포 합니다.
ms.date: 06/30/2019
ms.openlocfilehash: 21033cc904dc595193c69f3452ce2522740f8ff6
ms.sourcegitcommit: 55f438d4d00a34b9aca9eedaac3f85590bb11565
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 09/23/2019
ms.locfileid: "73840492"
---
# <a name="deploying-eshoponcontainers-to-azure"></a><span data-ttu-id="18fb5-103">Azure에 eShopOnContainers 배포</span><span class="sxs-lookup"><span data-stu-id="18fb5-103">Deploying eShopOnContainers to Azure</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="18fb5-104">Azure에서 다양 한 서비스를 사용 하 여 eShopOnContainers 응용 프로그램을 지 원하는 논리를 지원할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-104">The logic supporting the eShopOnContainers application can be supported by Azure using a variety of services.</span></span> <span data-ttu-id="18fb5-105">Azure Kubernetes Service (AKS)를 사용 하 여 Kubernetes를 활용 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-105">The recommended approach is to leverage Kubernetes using Azure Kubernetes Service (AKS).</span></span> <span data-ttu-id="18fb5-106">쉽게 반복 되는 인프라 구성을 보장 하기 위해이를 투구 배포와 결합할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-106">This can be combined with Helm deployment to ensure easily repeated infrastructure configuration.</span></span> <span data-ttu-id="18fb5-107">개발자는 필요에 따라 개발 프로세스의 일환으로 Kubernetes에 대 한 Azure Dev Spaces 활용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-107">Optionally, developers can leverage Azure Dev Spaces for Kubernetes as part of their development process.</span></span> <span data-ttu-id="18fb5-108">또 다른 옵션은 Azure Functions 및 Azure Logic Apps와 같은 Azure 서버 리스 기능을 사용 하 여 앱의 기능을 호스트 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-108">Another option is to host the functionality of the app using Azure Serverless features like Azure Functions and Azure Logic Apps.</span></span>

## <a name="azure-kubernetes-service"></a><span data-ttu-id="18fb5-109">Azure Kubernetes Service</span><span class="sxs-lookup"><span data-stu-id="18fb5-109">Azure Kubernetes Service</span></span>

<span data-ttu-id="18fb5-110">자신의 AKS 클러스터에서 eShopOnContainers 응용 프로그램을 호스트 하려는 경우 첫 번째 단계는 클러스터를 만드는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-110">If you'd like to host the eShopOnContainers application in your own AKS cluster, the first step is to create your cluster.</span></span> <span data-ttu-id="18fb5-111">필요한 단계를 안내 하는 Azure Portal을 사용 하 여이 작업을 수행할 수 있습니다 .이 작업을 수행 하는 경우 Azure CLI를 사용 하 여 RBAC (역할 기반 Access Control) 및 응용 프로그램 라우팅을 사용 하도록 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-111">You can do this using the Azure portal, which will walk you through the required steps, or you can use the Azure CLI, taking care to ensure you enable Role-Based Access Control (RBAC) and application routing when you do so.</span></span> <span data-ttu-id="18fb5-112">EShopOnContainers ' 설명서에서는 고유한 AKS 클러스터를 만드는 데 필요한 단계에 대해 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-112">The eShopOnContainers' documentation describes the steps involved in creating your own AKS cluster.</span></span> <span data-ttu-id="18fb5-113">클러스터가 만들어지면 Kubernetes 대시보드에 대 한 액세스를 사용 하도록 설정 해야 합니다 .이 시점에서 클러스터를 관리 하기 위해 Kubernetes 대시보드로 이동할 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-113">Once the cluster is created, you must enable access to the Kubernetes dashboard, at which point you should be able to browse to the Kubernetes dashboard to manage the cluster.</span></span>

<span data-ttu-id="18fb5-114">클러스터를 만들고 구성한 후에는 투구 및 Tiller를 사용 하 여 응용 프로그램을 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-114">Once the cluster has been created and configured, you can deploy the application to it using Helm and Tiller.</span></span>

## <a name="deploying-to-azure-kubernetes-service-using-helm"></a><span data-ttu-id="18fb5-115">투구를 사용 하 여 Azure Kubernetes Service에 배포</span><span class="sxs-lookup"><span data-stu-id="18fb5-115">Deploying to Azure Kubernetes Service using Helm</span></span>

<span data-ttu-id="18fb5-116">AKS에 대 한 기본 배포에서는 사용자 지정 CLI 스크립트 또는 간단한 배포 파일을 사용할 수 있지만 더 복잡 한 응용 프로그램은 투구와 같은 종속성 관리 도구를 사용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-116">Basic deployments to AKS may use custom CLI scripts or simple deployment files, but more complex applications should use a dependency management tool like Helm.</span></span> <span data-ttu-id="18fb5-117">투구는 클라우드 기본 컴퓨팅 기반에서 유지 관리 되며 Kubernetes 응용 프로그램을 정의, 설치 및 업그레이드 하는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-117">Helm is maintained by the Cloud-native Computing Foundation and helps you define, install, and upgrade Kubernetes applications.</span></span> <span data-ttu-id="18fb5-118">투구는 투구 차트를 사용 하는 Tiller 및 클러스터 내 구성 요소를 사용 하는 명령줄 클라이언트 (투구)로 구성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-118">Helm is composed of a command-line client, helm, which uses helm charts, and an in-cluster component, Tiller.</span></span> <span data-ttu-id="18fb5-119">투구 차트는 표준 YAML 형식 파일을 사용 하 여 관련 된 Kubernetes 리소스 집합을 설명 하 고 일반적으로 설명 하는 응용 프로그램과 함께 버전을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-119">Helm Charts use standard YAML-formatted files to describe a related set of Kubernetes resources and are typically versioned alongside the application they describe.</span></span> <span data-ttu-id="18fb5-120">투구 차트는 설명 하는 설치 요구 사항에 따라 단순에서 복잡 하 게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-120">Helm Charts range from simple to complex depending on the requirements of the installation they describe.</span></span>

<span data-ttu-id="18fb5-121">/K8s/helm 폴더에서 eShopOnContainers 투구 차트를 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-121">You'll find the eShopOnContainers helm charts in the /k8s/helm folder.</span></span> <span data-ttu-id="18fb5-122">그림 2-6에서는 응용 프로그램의 다양 한 구성 요소가 투구에서 사용 되는 폴더 구조로 구성 되 고, 관리 되는 배포를 정의 하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-122">Figure 2-6 shows how the different components of the application are organized into a folder structure used by helm to define and managed deployments.</span></span>

<span data-ttu-id="18fb5-123">![eShopOnContainers 아키텍처](./media/eshoponcontainers-helm-folder.png)
**그림 2-6**.</span><span class="sxs-lookup"><span data-stu-id="18fb5-123">![eShopOnContainers Architecture](./media/eshoponcontainers-helm-folder.png)
**Figure 2-6**.</span></span> <span data-ttu-id="18fb5-124">EShopOnContainers 투구 폴더입니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-124">The eShopOnContainers helm folder.</span></span>

<span data-ttu-id="18fb5-125">각 개별 구성 요소는 `helm install` 명령을 사용 하 여 설치 됩니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-125">Each individual component is installed using a `helm install` command.</span></span> <span data-ttu-id="18fb5-126">이러한 명령은 쉽게 스크립팅할 수 있으며, eShopOnContainers는 서로 다른 구성 요소를 반복 하 고 해당 하는 투구 차트를 사용 하 여 설치 하는 "모두 배포" 스크립트를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-126">These commands are easily scripted, and eShopOnContainers provides a "deploy all" script that loops through the different components and installs them using their respective helm charts.</span></span> <span data-ttu-id="18fb5-127">그 결과, 팀의 모든 사용자가 한 줄 스크립트 명령을 사용 하 여 AKS 클러스터에 배포할 수 있는 반복 가능한 프로세스가 소스 제어에서 응용 프로그램과 함께 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-127">The result is a repeatable process, versioned with the application in source control, that anyone on the team can deploy to an AKS cluster with a one-line script command.</span></span> <span data-ttu-id="18fb5-128">특히 Azure Dev Spaces와 함께 사용 하면 개발자가 자신의 마이크로 서비스 기반 클라우드 네이티브 앱에 대 한 개별 변경 사항을 쉽게 진단 하 고 테스트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-128">Especially when combined with Azure Dev Spaces, this makes it easy for developers to diagnose and test their individual changes to their microservice-based cloud-native apps.</span></span>

## <a name="azure-dev-spaces"></a><span data-ttu-id="18fb5-129">Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="18fb5-129">Azure Dev Spaces</span></span>

<span data-ttu-id="18fb5-130">Azure Dev Spaces는 개별 개발자가 개발 하는 동안 Azure에서 고유한 AKS 클러스터 버전을 호스트 하는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-130">Azure Dev Spaces helps individual developers host their own unique version of AKS clusters in Azure during development.</span></span> <span data-ttu-id="18fb5-131">이렇게 하면 로컬 컴퓨터 요구 사항이 최소화 되며 팀 멤버가 실제 AKS 환경에서 변경 내용을 신속 하 게 파악할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-131">This minimizes local machine requirements and allows team members to quickly see how their changes will behave in a real AKS environment.</span></span> <span data-ttu-id="18fb5-132">Azure Dev Spaces는 개발자가 개발 공간을 관리 하 고 필요에 따라 특정 자식 개발 공간에 배포 하는 데 사용할 수 있는 CLI를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-132">Azure Dev Spaces offers a CLI for developers to use to manage their dev spaces and to deploy to a specific child dev space as needed.</span></span> <span data-ttu-id="18fb5-133">각 자식 개발 공간은 고유한 URL 하위 도메인을 사용 하 여 참조 되므로 개별 개발자가 진행 중인 작업과 충돌을 방지할 수 있도록 수정 된 클러스터의 side-by-side 배포를 허용 합니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-133">Each child dev space is referenced using a unique URL subdomain, allowing side-by-side deployments of modified clusters so that individual developers can avoid conflicting with each other's work in progress.</span></span> <span data-ttu-id="18fb5-134">그림 2-7에서 개발자 Susie 자신의 자전거 마이크로 서비스 버전을 개발 공간에 배포 하는 방법을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-134">In Figure 2-7 you can see how developer Susie has deployed her own version of the Bikes microservice into her dev space.</span></span> <span data-ttu-id="18fb5-135">그런 다음 사용자의 스페이스 이름으로 시작 하는 사용자 지정 URL을 사용 하 여 변경 내용을 테스트할 수 있습니다 (susie.s.dev.myapp.eus.azds.io).</span><span class="sxs-lookup"><span data-stu-id="18fb5-135">She's then able to test her changes using a custom URL starting with the name of her space (susie.s.dev.myapp.eus.azds.io).</span></span>

<span data-ttu-id="18fb5-136">![eShopOnContainers 아키텍처](./media/azure-devspaces-one.png)
**그림 2-7**.</span><span class="sxs-lookup"><span data-stu-id="18fb5-136">![eShopOnContainers Architecture](./media/azure-devspaces-one.png)
**Figure 2-7**.</span></span> <span data-ttu-id="18fb5-137">개발자 Susie 자신의 자전거 마이크로 서비스 버전을 배포 하 고 테스트 합니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-137">Developer Susie deploys her own version of the Bikes microservice and tests it.</span></span>

<span data-ttu-id="18fb5-138">동시에 개발자 John은 예약 마이크로 서비스 사용자 지정 하 고 변경 내용을 테스트 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-138">At the same time, developer John is customizing the Reservations microservice and needs to test his changes.</span></span> <span data-ttu-id="18fb5-139">그림 2-8에 표시 된 것 처럼 Susie의 변경 내용과 충돌 하지 않고 자신의 개발자 공간에 변경 내용을 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-139">He's able to deploy his changes to his own dev space without conflicting with Susie's changes as shown in Figure 2-8.</span></span> <span data-ttu-id="18fb5-140">자신의 URL을 사용 하 여 변경 내용을 테스트할 수 있습니다 (john.s.dev.myapp.eus.azds.io).</span><span class="sxs-lookup"><span data-stu-id="18fb5-140">He can test his changes using his own URL which is prefixed with the name of his space (john.s.dev.myapp.eus.azds.io).</span></span>

<span data-ttu-id="18fb5-141">![eShopOnContainers 아키텍처](./media/azure-devspaces-two.png)
**그림 2-8**.</span><span class="sxs-lookup"><span data-stu-id="18fb5-141">![eShopOnContainers Architecture](./media/azure-devspaces-two.png)
**Figure 2-8**.</span></span> <span data-ttu-id="18fb5-142">개발자는 자신의 예약 마이크로 서비스 버전을 배포 하 고 다른 개발자와 충돌 하지 않고 테스트 합니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-142">Developer John deploys his own version of the Reservations microservice and tests it without conflicting with other developers.</span></span>

<span data-ttu-id="18fb5-143">Azure Dev Spaces를 사용 하 여 팀은 변경 내용을 독립적으로 변경, 배포 및 테스트 하는 동시에 AKS를 사용 하 여 직접 작업할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-143">Using Azure Dev Spaces, teams can work directly with AKS while independently changing, deploying, and testing their changes.</span></span> <span data-ttu-id="18fb5-144">이 방법은 모든 개발자가 자신의 AKS 환경을 효과적으로 사용 하기 때문에 별도의 전용 호스팅 환경에 대 한 필요성을 줄입니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-144">This approach reduces the need for separate dedicated hosted environments since every developer effectively has their own AKS environment.</span></span> <span data-ttu-id="18fb5-145">개발자는 CLI를 사용 하 여 Azure Dev Spaces 작업 하거나 응용 프로그램을 시작 하 여 Visual Studio에서 직접 Azure Dev Spaces 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-145">Developers can work with Azure Dev Spaces using its CLI or launch their application to Azure Dev Spaces directly from Visual Studio.</span></span> [<span data-ttu-id="18fb5-146">Azure Dev Spaces 작동 하 고 구성 되는 방법에 대해 자세히 알아보세요.</span><span class="sxs-lookup"><span data-stu-id="18fb5-146">Learn more about how Azure Dev Spaces works and is configured.</span></span>](https://docs.microsoft.com/azure/dev-spaces/how-dev-spaces-works)

## <a name="azure-functions-and-logic-apps-serverless"></a><span data-ttu-id="18fb5-147">Azure Functions 및 Logic Apps (서버 리스)</span><span class="sxs-lookup"><span data-stu-id="18fb5-147">Azure Functions and Logic Apps (Serverless)</span></span>

<span data-ttu-id="18fb5-148">EShopOnContainers 샘플에는 온라인 마케팅 캠페인을 추적 하는 기능이 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-148">The eShopOnContainers sample includes support for tracking online marketing campaigns.</span></span> <span data-ttu-id="18fb5-149">Azure Function은 지정 된 캠페인 ID에 대 한 마케팅 캠페인 세부 정보를 가져오는 데 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-149">An Azure Function is used to pull marketing campaign details for a given campaign ID.</span></span> <span data-ttu-id="18fb5-150">이 목적을 위해 완전 한 ASP.NET Core 응용 프로그램을 만드는 대신 단일 Azure 함수 끝점은 더 간단 하 고 충분 합니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-150">Rather than creating a complete ASP.NET Core application for this purpose, a single Azure Function endpoint is simpler and sufficient.</span></span> <span data-ttu-id="18fb5-151">특히 Kubernetes에서 실행 되도록 구성 된 경우 전체 ASP.NET Core 응용 프로그램 보다 훨씬 간단한 빌드 및 배포 모델을 Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="18fb5-151">Azure Functions have a much simpler build and deployment model than full ASP.NET Core applications, especially when configured to run in Kubernetes.</span></span> <span data-ttu-id="18fb5-152">함수 배포는 ARM (Azure Resource Manager) 템플릿 및 Azure CLI를 사용 하 여 스크립팅됩니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-152">Deploying the function is scripted using Azure Resource Manager (ARM) templates and the Azure CLI.</span></span> <span data-ttu-id="18fb5-153">이 캠페인 세부 정보는 고객이 마이크로 서비스 것이 아니며 온라인 스토어와 동일한 요구 사항이 없으므로 Azure Functions 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-153">This campaign details microservice isn't customer-facing and doesn't have the same requirements as the online store, making it a good candidate for Azure Functions.</span></span> <span data-ttu-id="18fb5-154">함수를 사용 하려면 데이터베이스 연결 문자열 데이터 및 이미지 기본 URI 설정과 같은 일부 구성이 제대로 작동 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-154">The function requires some configuration to work properly, such as database connection string data and image base URI settings.</span></span> <span data-ttu-id="18fb5-155">Azure Portal에서 Azure Functions를 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="18fb5-155">You configure Azure Functions in the Azure Portal.</span></span>

## <a name="references"></a><span data-ttu-id="18fb5-156">참조 항목</span><span class="sxs-lookup"><span data-stu-id="18fb5-156">References</span></span>

- <span data-ttu-id="18fb5-157">[eShopOnContainers: AKS에서 Kubernetes 클러스터 만들기](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Deploy-to-Azure-Kubernetes-Service-(AKS)#create-kubernetes-cluster-in-aks)</span><span class="sxs-lookup"><span data-stu-id="18fb5-157">[eShopOnContainers: Create Kubernetes cluster in AKS](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Deploy-to-Azure-Kubernetes-Service-(AKS)#create-kubernetes-cluster-in-aks)</span></span>
- [<span data-ttu-id="18fb5-158">eShopOnContainers: Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="18fb5-158">eShopOnContainers: Azure Dev Spaces</span></span>](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Azure-Dev-Spaces)
- [<span data-ttu-id="18fb5-159">Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="18fb5-159">Azure Dev Spaces</span></span>](https://docs.microsoft.com/azure/dev-spaces/about)

>[!div class="step-by-step"]
><span data-ttu-id="18fb5-160">[이전](map-eshoponcontainers-azure-services.md)
>[다음](centralized-configuration.md)</span><span class="sxs-lookup"><span data-stu-id="18fb5-160">[Previous](map-eshoponcontainers-azure-services.md)
[Next](centralized-configuration.md)</span></span>
