---
title: 중앙 집중식 구성
description: Azure Key Vault를 사용 하 여 중앙 집중식으로 구성 하면 클라우드 네이티브 앱을 보다 쉽게 관리할 수 있습니다.
ms.date: 06/30/2019
ms.openlocfilehash: 4c516b6773d913acd71ff06742302e9766a141e2
ms.sourcegitcommit: 56f1d1203d0075a461a10a301459d3aa452f4f47
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 09/24/2019
ms.locfileid: "73841140"
---
# <a name="centralized-configuration"></a><span data-ttu-id="8b21e-103">중앙 집중식 구성</span><span class="sxs-lookup"><span data-stu-id="8b21e-103">Centralized configuration</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="8b21e-104">클라우드 네이티브 응용 프로그램에는 기존의 단일 인스턴스 모놀리식 앱 보다 실행 중인 서비스가 많이 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-104">Cloud-native applications involve many more running services than traditional single-instance monolithic apps.</span></span> <span data-ttu-id="8b21e-105">여러 개의 상호 의존적인 서비스에 대 한 구성 설정을 관리 하는 것은 어려울 수 있으므로 중앙 집중화 된 구성 저장소가 분산 응용 프로그램에 대해 구현 되는 경우가 많습니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-105">Managing configuration settings for dozens of interdependent services can be challenging, which is why centralized configuration stores are often implemented for distributed applications.</span></span>

<span data-ttu-id="8b21e-106">[1 장](introduction.md)에서 설명한 바와 같이 12 단계 앱 권장 사항은 코드와 구성 사이에 엄격한 분리가 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-106">As discussed in [Chapter 1](introduction.md), the Twelve-Factor App recommendations require strict separation between code and configuration.</span></span> <span data-ttu-id="8b21e-107">즉, 코드의 상수 또는 리터럴 값으로 구성 설정을 저장 하는 것은 위반입니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-107">This means storing configuration settings as constants or literal values in code is a violation.</span></span> <span data-ttu-id="8b21e-108">이러한 권장 사항은 개발, 테스트, 스테이징 및 프로덕션을 포함 하 여 여러 환경에서 동일한 코드를 사용 해야 하기 때문에 존재 합니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-108">This recommendation exists because the same code should be used across multiple environments, including development, testing, staging, and production.</span></span> <span data-ttu-id="8b21e-109">그러나 구성 값은 이러한 환경 마다 다를 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-109">However, configuration values are likely to vary between each of these environments.</span></span> <span data-ttu-id="8b21e-110">따라서 환경 자체에 구성 값을 저장 하거나 환경에서 중앙 집중식 구성 저장소에 자격 증명을 저장 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-110">So, configuration values should be stored in the environment itself, or the environment should store the credentials to a centralized configuration store.</span></span>

<span data-ttu-id="8b21e-111">EShopOnContainers 응용 프로그램에는 각 마이크로 서비스를 사용 하는 로컬 응용 프로그램 설정 파일이 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-111">The eShopOnContainers application includes local application settings files with each microservice.</span></span> <span data-ttu-id="8b21e-112">이러한 파일은 소스 제어에 체크 인 되지만 연결 문자열 또는 API 키와 같은 프로덕션 암호는 포함 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-112">These files are checked into source control but don't include production secrets such as connection strings or API keys.</span></span> <span data-ttu-id="8b21e-113">프로덕션에서 개별 설정은 서비스별 환경 변수를 사용 하 여 덮어쓸 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-113">In production, individual settings may be overwritten with per-service environment variables.</span></span> <span data-ttu-id="8b21e-114">이 방법은 호스팅된 응용 프로그램의 경우 일반적인 방법 이지만 중앙 구성 저장소는 제공 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-114">This is a common practice for hosted applications, but doesn't provide a central configuration store.</span></span> <span data-ttu-id="8b21e-115">구성 설정에 대 한 중앙 집중식 관리를 지원 하기 위해 각 마이크로 서비스에는 로컬 설정 사용 또는 Azure Key Vault 설정 사이를 전환 하는 설정이 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-115">To support centralized management of configuration settings, each microservice includes a setting to toggle between its use of local settings or Azure Key Vault settings.</span></span>

## <a name="azure-key-vault"></a><span data-ttu-id="8b21e-116">Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="8b21e-116">Azure Key Vault</span></span>

<span data-ttu-id="8b21e-117">Azure Key Vault는 토큰, 암호, 인증서, API 키 및 기타 중요 한 암호의 안전한 저장소를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-117">Azure Key Vault provides secure storage of tokens, passwords, certificates, API keys, and other sensitive secrets.</span></span> <span data-ttu-id="8b21e-118">Key Vault에 액세스 하려면 적절 한 호출자 인증 및 권한 부여가 필요 합니다 .이는 eShopOnContainers 마이크로 서비스의 경우에는 ClientId/ClientSecret 조합을 사용 하는 것을 의미 합니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-118">Access to Key Vault requires proper caller authentication and authorization, which in the case of the eShopOnContainers microservices means the use of a ClientId/ClientSecret combination.</span></span> <span data-ttu-id="8b21e-119">이러한 자격 증명을 소스 제어에 체크 인 하지 말고 응용 프로그램 환경에서 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-119">Don't check in these credentials into source control, but instead set in the application's environment.</span></span> <span data-ttu-id="8b21e-120">AKS에서의 Key Vault에 대 한 직접 액세스는 [Key Vault의 볼륨](https://github.com/Azure/kubernetes-keyvault-flexvol)을 사용 하 여 달성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-120">Direct access to Key Vault from AKS can be achieved using [Key Vault FlexVolume](https://github.com/Azure/kubernetes-keyvault-flexvol).</span></span>

<span data-ttu-id="8b21e-121">중앙 집중식 구성에서 중앙 집중식 로깅 끝점과 같은 전체 응용 프로그램에 적용 되는 설정은 한 번 설정 하 여 배포 응용 프로그램의 모든 부분에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-121">With centralized configuration, settings that apply to the entire application, such as the centralized logging endpoint, can be set once and used by every part of the distributed application.</span></span> <span data-ttu-id="8b21e-122">마이크로 서비스는 서로 독립적 이어야 하지만 일반적으로 구성 세부 정보가 중앙 집중식 구성 저장소를 활용할 수 있는 몇 가지 공유 종속성이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8b21e-122">Although microservices should be independent of one another, there will typically still be some shared dependencies whose configuration details can benefit from a centralized configuration store.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="8b21e-123">[이전](deploy-eshoponcontainers-azure.md)
>[다음](scale-applications.md)</span><span class="sxs-lookup"><span data-stu-id="8b21e-123">[Previous](deploy-eshoponcontainers-azure.md)
[Next](scale-applications.md)</span></span>
