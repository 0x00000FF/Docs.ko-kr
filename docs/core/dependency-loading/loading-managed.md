---
title: 관리 어셈블리 로드 알고리즘 - .NET Core
description: .NET Core에서 관리 어셈블리 로드 알고리즘의 세부 정보 설명
ms.date: 08/09/2019
author: sdmaclea
ms.author: stmaclea
ms.openlocfilehash: bf95cbd0eebed064f0198ae9b0f7a4288a938f8a
ms.sourcegitcommit: 6f28b709592503d27077b16fff2e2eacca569992
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/28/2019
ms.locfileid: "72303631"
---
# <a name="managed-assembly-loading-algorithm"></a><span data-ttu-id="8dc51-103">관리 어셈블리 로드 알고리즘</span><span class="sxs-lookup"><span data-stu-id="8dc51-103">Managed assembly loading algorithm</span></span>

<span data-ttu-id="8dc51-104">관리 어셈블리는 다양한 단계를 포함하는 알고리즘으로 배치되고 로드됩니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-104">Managed assemblies are located and loaded with an algorithm involving various stages.</span></span>

<span data-ttu-id="8dc51-105">위성 어셈블리 및 `WinRT` 어셈블리를 제외한 모든 관리 어셈블리는 동일한 알고리즘을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-105">All managed assemblies except satellite assemblies and `WinRT` assemblies use the same algorithm.</span></span>

## <a name="when-are-managed-assemblies-loaded"></a><span data-ttu-id="8dc51-106">관리 어셈블리는 언제 로드되나요?</span><span class="sxs-lookup"><span data-stu-id="8dc51-106">When are managed assemblies loaded?</span></span>

<span data-ttu-id="8dc51-107">관리 어셈블리 로드를 트리거하는 가장 일반적인 메커니즘은 정적 어셈블리 참조입니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-107">The most common mechanism to trigger a managed assembly load is a static assembly reference.</span></span> <span data-ttu-id="8dc51-108">이러한 참조는 코드에서 다른 어셈블리에 정의된 형식을 사용할 때마다 컴파일러에 의해 삽입됩니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-108">These references are inserted by the compiler whenever code uses a type defined in another assembly.</span></span> <span data-ttu-id="8dc51-109">이러한 어셈블리는 런타임에 필요한 대로 로드됩니다(`load-by-name`).</span><span class="sxs-lookup"><span data-stu-id="8dc51-109">These assemblies are loaded (`load-by-name`) as needed by the runtime.</span></span>

<span data-ttu-id="8dc51-110">특정 API를 직접 사용하면 로드도 트리거됩니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-110">The direct use of specific APIs will also trigger loads:</span></span>

|<span data-ttu-id="8dc51-111">API</span><span class="sxs-lookup"><span data-stu-id="8dc51-111">API</span></span>  |<span data-ttu-id="8dc51-112">설명</span><span class="sxs-lookup"><span data-stu-id="8dc51-112">Description</span></span>  |<span data-ttu-id="8dc51-113">`Active` <xref:System.Runtime.Loader.AssemblyLoadContext></span><span class="sxs-lookup"><span data-stu-id="8dc51-113">`Active` <xref:System.Runtime.Loader.AssemblyLoadContext></span></span> |
|---------|---------|---------|
|<xref:System.Runtime.Loader.AssemblyLoadContext.LoadFromAssemblyName%2A?displayProperty=nameWithType>|`Load-by-name`|<span data-ttu-id="8dc51-114">[이](../../csharp/language-reference/keywords/this.md) 인스턴스입니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-114">The [this](../../csharp/language-reference/keywords/this.md) instance.</span></span>|
|<xref:System.Runtime.Loader.AssemblyLoadContext.LoadFromAssemblyPath%2A?displayProperty=nameWithType><p><xref:System.Runtime.Loader.AssemblyLoadContext.LoadFromNativeImagePath%2A?displayProperty=nameWithType>|<span data-ttu-id="8dc51-115">경로에서 로드합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-115">Load from path.</span></span>|<span data-ttu-id="8dc51-116">[이](../../csharp/language-reference/keywords/this.md) 인스턴스입니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-116">The [this](../../csharp/language-reference/keywords/this.md) instance.</span></span>|
<xref:System.Runtime.Loader.AssemblyLoadContext.LoadFromStream%2A?displayProperty=nameWithType>|<span data-ttu-id="8dc51-117">개체에서 로드합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-117">Load from object.</span></span>|<span data-ttu-id="8dc51-118">[이](../../csharp/language-reference/keywords/this.md) 인스턴스입니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-118">The [this](../../csharp/language-reference/keywords/this.md) instance.</span></span>|
|<xref:System.Reflection.Assembly.LoadFile%2A?displayProperty=nameWithType>|<span data-ttu-id="8dc51-119">새 <xref:System.Runtime.Loader.AssemblyLoadContext> 인스턴스의 경로에서 로드</span><span class="sxs-lookup"><span data-stu-id="8dc51-119">Load from path in a new <xref:System.Runtime.Loader.AssemblyLoadContext> instance</span></span>|<span data-ttu-id="8dc51-120">새 <xref:System.Runtime.Loader.AssemblyLoadContext> 인스턴스입니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-120">The new <xref:System.Runtime.Loader.AssemblyLoadContext> instance.</span></span>|
<xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType>|<span data-ttu-id="8dc51-121"><xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType> 인스턴스의 경로에서 로드합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-121">Load from path in the <xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType> instance.</span></span><p><span data-ttu-id="8dc51-122"><xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType>에 <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving> 처리기를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-122">Adds a <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving> handler to <xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="8dc51-123">처리기는 해당 디렉터리에서 어셈블리의 종속성을 로드합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-123">The handler will load the assembly's dependencies from its directory.</span></span>|<span data-ttu-id="8dc51-124"><xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType> 인스턴스입니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-124">The <xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType> instance.</span></span>|
|<xref:System.Reflection.Assembly.Load(System.Reflection.AssemblyName)?displayProperty=nameWithType><p><xref:System.Reflection.Assembly.Load(System.String)?displayProperty=nameWithType><p><xref:System.Reflection.Assembly.LoadWithPartialName%2A?displayProperty=nameWithType>|<span data-ttu-id="8dc51-125">`Load-by-name`.</span><span class="sxs-lookup"><span data-stu-id="8dc51-125">`Load-by-name`.</span></span>|<span data-ttu-id="8dc51-126">호출자에서 유추됩니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-126">Inferred from caller.</span></span><p><span data-ttu-id="8dc51-127"><xref:System.Runtime.Loader.AssemblyLoadContext> 메서드를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-127">Prefer <xref:System.Runtime.Loader.AssemblyLoadContext> methods.</span></span>|
|<xref:System.Reflection.Assembly.Load(System.Byte[])?displayProperty=nameWithType><p><xref:System.Reflection.Assembly.Load(System.Byte[],System.Byte[])?displayProperty=nameWithType>|<span data-ttu-id="8dc51-128">개체에서 로드합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-128">Load from object.</span></span>|<span data-ttu-id="8dc51-129">호출자에서 유추됩니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-129">Inferred from caller.</span></span><p><span data-ttu-id="8dc51-130"><xref:System.Runtime.Loader.AssemblyLoadContext> 메서드를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-130">Prefer <xref:System.Runtime.Loader.AssemblyLoadContext> methods.</span></span>|
<xref:System.Type.GetType(System.String)?displayProperty=nameWithType><p><xref:System.Type.GetType(System.String,System.Boolean)?displayProperty=nameWithType><p><xref:System.Type.GetType(System.String,System.Boolean,System.Boolean)?displayProperty=nameWithType>|<span data-ttu-id="8dc51-131">`Load-by-name`.</span><span class="sxs-lookup"><span data-stu-id="8dc51-131">`Load-by-name`.</span></span>|<span data-ttu-id="8dc51-132">호출자에서 유추됩니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-132">Inferred from caller.</span></span><p><span data-ttu-id="8dc51-133">`assemblyResolver` 인수를 사용하여 <xref:System.Type.GetType%2A?displayProperty=nameWithType> 메서드를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-133">Prefer <xref:System.Type.GetType%2A?displayProperty=nameWithType> methods with an `assemblyResolver` argument.</span></span>|
<xref:System.Reflection.Assembly.GetType%2A?displayProperty=nameWithType>|<span data-ttu-id="8dc51-134">형식 `name`에서 어셈블리의 정규화된 제네릭 형식을 설명하는 경우 `Load-by-name`을 트리거합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-134">If type `name` describes an assembly qualified generic type, trigger a `Load-by-name`.</span></span>|<span data-ttu-id="8dc51-135">호출자에서 유추됩니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-135">Inferred from caller.</span></span><p><span data-ttu-id="8dc51-136">어셈블리의 정규화된 형식 이름을 사용할 때는 <xref:System.Type.GetType%2A?displayProperty=nameWithType>을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-136">Prefer <xref:System.Type.GetType%2A?displayProperty=nameWithType> when using assembly qualified type names.</span></span>|
<xref:System.Activator.CreateInstance(System.String,System.String)?displayProperty=nameWithType><p><xref:System.Activator.CreateInstance(System.String,System.String,System.Object[])?displayProperty=nameWithType><p><xref:System.Activator.CreateInstance(System.String,System.String,System.Boolean,System.Reflection.BindingFlags,System.Reflection.Binder,System.Object[],System.Globalization.CultureInfo,System.Object[])?displayProperty=nameWithType>|<span data-ttu-id="8dc51-137">`Load-by-name`.</span><span class="sxs-lookup"><span data-stu-id="8dc51-137">`Load-by-name`.</span></span>|<span data-ttu-id="8dc51-138">호출자에서 유추됩니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-138">Inferred from caller.</span></span><p><span data-ttu-id="8dc51-139"><xref:System.Type> 인수를 사용하는 <xref:System.Activator.CreateInstance%2A?displayProperty=nameWithType> 메서드를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-139">Prefer <xref:System.Activator.CreateInstance%2A?displayProperty=nameWithType> methods taking a <xref:System.Type> argument.</span></span>|

## <a name="algorithm"></a><span data-ttu-id="8dc51-140">알고리즘</span><span class="sxs-lookup"><span data-stu-id="8dc51-140">Algorithm</span></span>

<span data-ttu-id="8dc51-141">다음 알고리즘은 런타임에서 관리 어셈블리를 로드하는 방법을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-141">The following algorithm describes how the runtime loads a managed assembly.</span></span>

1. <span data-ttu-id="8dc51-142">`active` <xref:System.Runtime.Loader.AssemblyLoadContext>를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-142">Determine the `active` <xref:System.Runtime.Loader.AssemblyLoadContext>.</span></span>

    - <span data-ttu-id="8dc51-143">정적 어셈블리 참조의 경우 `active` <xref:System.Runtime.Loader.AssemblyLoadContext>는 참조하는 어셈블리를 로드한 인스턴스입니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-143">For a static assembly reference, the `active` <xref:System.Runtime.Loader.AssemblyLoadContext> is the instance that loaded the referring assembly.</span></span>
    - <span data-ttu-id="8dc51-144">기본 API는 `active` <xref:System.Runtime.Loader.AssemblyLoadContext>를 명시적으로 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-144">Preferred APIs make the `active` <xref:System.Runtime.Loader.AssemblyLoadContext> explicit.</span></span>
    - <span data-ttu-id="8dc51-145">다른 API는 `active` <xref:System.Runtime.Loader.AssemblyLoadContext>를 유추합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-145">Other APIs infer the `active` <xref:System.Runtime.Loader.AssemblyLoadContext>.</span></span> <span data-ttu-id="8dc51-146">이러한 API의 경우 <xref:System.Runtime.Loader.AssemblyLoadContext.CurrentContextualReflectionContext?displayProperty=nameWithType> 속성이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-146">For these APIs, the <xref:System.Runtime.Loader.AssemblyLoadContext.CurrentContextualReflectionContext?displayProperty=nameWithType> property is used.</span></span> <span data-ttu-id="8dc51-147">해당 값이 `null`이면 유추된 <xref:System.Runtime.Loader.AssemblyLoadContext> 인스턴스가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-147">If its value is `null`, then the inferred <xref:System.Runtime.Loader.AssemblyLoadContext> instance is used.</span></span>
    - <span data-ttu-id="8dc51-148">위의 표를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="8dc51-148">See table above.</span></span>

2. <span data-ttu-id="8dc51-149">`Load-by-name` 메서드의 경우 활성 <xref:System.Runtime.Loader.AssemblyLoadContext>가 어셈블리를 로드합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-149">For the `Load-by-name` methods, the active <xref:System.Runtime.Loader.AssemblyLoadContext> loads the assembly.</span></span> <span data-ttu-id="8dc51-150">우선순위에 따라 정렬:</span><span class="sxs-lookup"><span data-stu-id="8dc51-150">In priority order by:</span></span>
    - <span data-ttu-id="8dc51-151">해당 `cache-by-name`을 확인 중입니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-151">Checking its `cache-by-name`.</span></span>

    - <span data-ttu-id="8dc51-152"><xref:System.Runtime.Loader.AssemblyLoadContext.Load%2A?displayProperty=nameWithType> 함수를 호출 중입니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-152">Calling the <xref:System.Runtime.Loader.AssemblyLoadContext.Load%2A?displayProperty=nameWithType> function.</span></span>

    - <span data-ttu-id="8dc51-153"><xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType> 인스턴스의 캐시를 확인하고 [관리 어셈블리 기본 검색](default-probing.md#managed-assembly-default-probing) 논리를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-153">Checking the <xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType> instances' cache and running [managed assembly default probing](default-probing.md#managed-assembly-default-probing) logic.</span></span>

    - <span data-ttu-id="8dc51-154">활성 AssemblyLoadContext에 대한 <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> 이벤트를 발생시킵니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-154">Raising the <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> event for the active AssemblyLoadContext.</span></span>

    - <span data-ttu-id="8dc51-155"><xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> 이벤트가 발생 중입니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-155">Raising the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

3. <span data-ttu-id="8dc51-156">다른 유형의 로드의 경우 `active` <xref:System.Runtime.Loader.AssemblyLoadContext>가 어셈블리를 로드합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-156">For the other types of loads, the `active` <xref:System.Runtime.Loader.AssemblyLoadContext> loads the assembly.</span></span> <span data-ttu-id="8dc51-157">우선순위에 따라 정렬:</span><span class="sxs-lookup"><span data-stu-id="8dc51-157">In priority order by:</span></span>
    - <span data-ttu-id="8dc51-158">해당 `cache-by-name`을 확인 중입니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-158">Checking its `cache-by-name`.</span></span>

    - <span data-ttu-id="8dc51-159">지정된 경로 또는 원시 어셈블리 개체에서 로드하는 중입니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-159">Loading from the specified path or raw assembly object.</span></span>

4. <span data-ttu-id="8dc51-160">두 경우 모두 어셈블리가 새로 로드되면 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-160">In either case, if an assembly is newly loaded, then:</span></span>
   - <span data-ttu-id="8dc51-161"><xref:System.AppDomain.AssemblyLoad?displayProperty=nameWithType> 이벤트가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-161">The <xref:System.AppDomain.AssemblyLoad?displayProperty=nameWithType> event is raised.</span></span>
   - <span data-ttu-id="8dc51-162">참조가 어셈블리의 <xref:System.Runtime.Loader.AssemblyLoadContext> 인스턴스의 `cache-by-name`에 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-162">A reference is added to the assembly's <xref:System.Runtime.Loader.AssemblyLoadContext> instance's `cache-by-name`.</span></span>

5. <span data-ttu-id="8dc51-163">어셈블리가 있는 경우 `active` <xref:System.Runtime.Loader.AssemblyLoadContext> 인스턴스의 `cache-by-name`에 참조가 필요에 따라 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="8dc51-163">If the assembly is found, a reference is added as needed to the `active` <xref:System.Runtime.Loader.AssemblyLoadContext> instance's `cache-by-name`.</span></span>
